<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>disk - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Linux">Linux</a>&nbsp;&#187;&nbsp;disk
    <span class="updated">Page Updated&nbsp;
      2018-10-25 13:26
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">disk</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#disk">disk</a><ul>
<li><a href="#_1">磁盘格式化</a><ul>
<li><a href="#mke2fs">格式化命令mke2fs</a></li>
<li><a href="#blkid-uuid">blkid 挂载的分区UUID</a></li>
<li><a href="#inode">inode 对应信息</a></li>
</ul>
</li>
<li><a href="#mount">磁盘挂载 mount</a></li>
<li><a href="#fstab">分区挂载配置文件fstab</a></li>
<li><a href="#_2"></a></li>
<li><a href="#swap">手动增加swap空间</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="disk">disk</h1>
<h2 id="_1">磁盘格式化</h2>
<p>查看系统支持的分区类型： cat /etc/filesystems</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">filesystems</span> 
<span class="n">xfs</span>
<span class="n">ext4</span>
<span class="n">ext3</span>
<span class="n">ext2</span>
<span class="n">nodev</span> 
<span class="n">procnodev</span> 
<span class="n">devpts</span>
<span class="n">iso9660</span>
<span class="n">vfat</span>
<span class="n">hfs</span>
<span class="n">hfsplus</span><span class="o">*</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">mountsysfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span> <span class="n">type</span> <span class="n">sysfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">proc</span> <span class="n">on</span> <span class="o">/</span><span class="n">proc</span> <span class="n">type</span> <span class="n">proc</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">devtmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span> <span class="n">type</span> <span class="n">devtmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">244792</span><span class="n">k</span><span class="p">,</span><span class="n">nr_inodes</span><span class="o">=</span><span class="mi">61198</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">755</span><span class="p">)</span><span class="n">securityfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">security</span> <span class="n">type</span> <span class="n">securityfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">shm</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">)</span><span class="n">devpts</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">pts</span> <span class="n">type</span> <span class="n">devpts</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">620</span><span class="p">,</span><span class="n">ptmxmode</span><span class="o">=</span><span class="mo">000</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">run</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">755</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">ro</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">755</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">systemd</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">xattr</span><span class="p">,</span><span class="n">release_agent</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">cgroups</span><span class="o">-</span><span class="n">agent</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">systemd</span><span class="p">)</span><span class="n">pstore</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">pstore</span> <span class="n">type</span> <span class="n">pstore</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">freezer</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">freezer</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">memory</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">memory</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">pids</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">pids</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">perf_event</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">perf_event</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">cpuset</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">cpuset</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">net_cls</span><span class="p">,</span><span class="n">net_prio</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">net_prio</span><span class="p">,</span><span class="n">net_cls</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">cpu</span><span class="p">,</span><span class="n">cpuacct</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">cpuacct</span><span class="p">,</span><span class="n">cpu</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">devices</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">devices</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">blkio</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">blkio</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">hugetlb</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">hugetlb</span><span class="p">)</span><span class="n">configfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">config</span> <span class="n">type</span> <span class="n">configfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span> <span class="n">on</span> <span class="o">/</span> <span class="n">type</span> <span class="n">xfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">attr2</span><span class="p">,</span><span class="n">inode64</span><span class="p">,</span><span class="n">noquota</span><span class="p">)</span><span class="n">systemd</span><span class="o">-</span><span class="mi">1</span> <span class="n">on</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">binfmt_misc</span> <span class="n">type</span> <span class="n">autofs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">fd</span><span class="o">=</span><span class="mi">29</span><span class="p">,</span><span class="n">pgrp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">minproto</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">maxproto</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">direct</span><span class="p">)</span><span class="n">mqueue</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">mqueue</span> <span class="n">type</span> <span class="n">mqueue</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">debugfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span> <span class="n">type</span> <span class="n">debugfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">hugetlbfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">hugepages</span> <span class="n">type</span> <span class="n">hugetlbfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span> <span class="n">on</span> <span class="o">/</span><span class="n">boot</span> <span class="n">type</span> <span class="n">xfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">attr2</span><span class="p">,</span><span class="n">inode64</span><span class="p">,</span><span class="n">noquota</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">0</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">50748</span><span class="n">k</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">700</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span> <span class="n">on</span> <span class="o">/</span><span class="n">mnt</span> <span class="n">type</span> <span class="n">ext4</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">ordered</span><span class="p">)</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span>
</pre></div>


<blockquote>
<p>/boot 都是xfs文件系统</p>
<p>centos 7 xfs</p>
<p>centos 6 ext4</p>
<p>centos 5 ext3</p>
</blockquote>
<h3 id="mke2fs">格式化命令mke2fs</h3>
<p>mke2fs -t xfs -b 2048 /dev/sdb1</p>
<p>格式化/dev/sdb1 类型为xfs 块大小2048</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">mke2fs</span> <span class="o">-</span><span class="n">t</span> <span class="n">ext4</span> <span class="o">-</span><span class="n">b</span> <span class="mi">2048</span>  <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span>
<span class="n">mke2fs</span> <span class="mf">1.42.9</span> <span class="p">(</span><span class="mi">28</span><span class="o">-</span><span class="n">Dec</span><span class="o">-</span><span class="mi">2013</span><span class="p">)</span><span class="n">Filesystem</span> <span class="n">label</span><span class="o">=</span><span class="n">OS</span> <span class="n">type</span><span class="o">:</span> <span class="n">LinuxBlock</span> <span class="n">size</span><span class="o">=</span><span class="mi">2048</span> <span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="n">Fragment</span> <span class="n">size</span><span class="o">=</span><span class="mi">2048</span> <span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="n">Stride</span><span class="o">=</span><span class="mi">0</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">Stripe</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span> <span class="n">blocks305152</span> <span class="n">inodes</span><span class="p">,</span> <span class="mi">2440704</span> <span class="n">blocks122035</span> <span class="n">blocks</span> <span class="p">(</span><span class="mf">5.00</span><span class="o">%</span><span class="p">)</span> <span class="n">reserved</span> <span class="k">for</span> <span class="n">the</span> <span class="n">super</span> <span class="n">userFirst</span> <span class="n">data</span> <span class="n">block</span><span class="o">=</span><span class="mi">0</span><span class="n">Maximum</span> <span class="n">filesystem</span> <span class="n">blocks</span><span class="o">=</span><span class="mi">271056896149</span> <span class="n">block</span> <span class="n">groups16384</span> <span class="n">blocks</span> <span class="n">per</span> <span class="n">group</span><span class="p">,</span> <span class="mi">16384</span> <span class="n">fragments</span> <span class="n">per</span> <span class="n">group2048</span> <span class="n">inodes</span> <span class="n">per</span> <span class="n">groupSuperblock</span> <span class="n">backups</span> <span class="n">stored</span> <span class="n">on</span> <span class="n">blocks</span><span class="o">:</span> 
<span class="mi">16384</span><span class="p">,</span> <span class="mi">49152</span><span class="p">,</span> <span class="mi">81920</span><span class="p">,</span> <span class="mi">114688</span><span class="p">,</span> <span class="mi">147456</span><span class="p">,</span> <span class="mi">409600</span><span class="p">,</span> <span class="mi">442368</span><span class="p">,</span> <span class="mi">802816</span><span class="p">,</span> 
<span class="mi">1327104</span><span class="p">,</span>    <span class="mi">2048000</span><span class="n">Allocating</span> <span class="n">group</span> <span class="n">tables</span><span class="o">:</span> <span class="n">done</span>                            
<span class="n">Writing</span> <span class="n">inode</span> <span class="n">tables</span><span class="o">:</span> <span class="n">done</span>                            
<span class="n">Creating</span> <span class="n">journal</span> <span class="p">(</span><span class="mi">32768</span> <span class="n">blocks</span><span class="p">)</span><span class="o">:</span> <span class="n">doneWriting</span> <span class="n">superblocks</span> <span class="n">and</span> <span class="n">filesystem</span> <span class="n">accounting</span> <span class="n">information</span><span class="o">:</span> <span class="n">done</span>   

<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span>
</pre></div>


<p>mkfs.ext4 /dev/sdb1</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">mkfs</span><span class="p">.</span><span class="n">ext4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span>
<span class="n">mke2fs</span> <span class="mf">1.42.9</span> <span class="p">(</span><span class="mi">28</span><span class="o">-</span><span class="n">Dec</span><span class="o">-</span><span class="mi">2013</span><span class="p">)</span><span class="n">Filesystem</span> <span class="n">label</span><span class="o">=</span><span class="n">OS</span> <span class="n">type</span><span class="o">:</span> <span class="n">LinuxBlock</span> <span class="n">size</span><span class="o">=</span><span class="mi">4096</span> <span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="n">Fragment</span> <span class="n">size</span><span class="o">=</span><span class="mi">4096</span> <span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="n">Stride</span><span class="o">=</span><span class="mi">0</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">Stripe</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span> <span class="n">blocks305216</span> <span class="n">inodes</span><span class="p">,</span> <span class="mi">1220352</span> <span class="n">blocks61017</span> <span class="n">blocks</span> <span class="p">(</span><span class="mf">5.00</span><span class="o">%</span><span class="p">)</span> <span class="n">reserved</span> <span class="k">for</span> <span class="n">the</span> <span class="n">super</span> <span class="n">userFirst</span> <span class="n">data</span> <span class="n">block</span><span class="o">=</span><span class="mi">0</span><span class="n">Maximum</span> <span class="n">filesystem</span> <span class="n">blocks</span><span class="o">=</span><span class="mi">124990259238</span> <span class="n">block</span> <span class="n">groups32768</span> <span class="n">blocks</span> <span class="n">per</span> <span class="n">group</span><span class="p">,</span> <span class="mi">32768</span> <span class="n">fragments</span> <span class="n">per</span> <span class="n">group8032</span> <span class="n">inodes</span> <span class="n">per</span> <span class="n">groupSuperblock</span> <span class="n">backups</span> <span class="n">stored</span> <span class="n">on</span> <span class="n">blocks</span><span class="o">:</span> 
<span class="mi">32768</span><span class="p">,</span> <span class="mi">98304</span><span class="p">,</span> <span class="mi">163840</span><span class="p">,</span> <span class="mi">229376</span><span class="p">,</span> <span class="mi">294912</span><span class="p">,</span> <span class="mi">819200</span><span class="p">,</span> <span class="mi">884736</span><span class="n">Allocating</span> <span class="n">group</span> <span class="n">tables</span><span class="o">:</span> <span class="n">done</span>                            
<span class="n">Writing</span> <span class="n">inode</span> <span class="n">tables</span><span class="o">:</span> <span class="n">done</span>                            
<span class="n">Creating</span> <span class="n">journal</span> <span class="p">(</span><span class="mi">32768</span> <span class="n">blocks</span><span class="p">)</span><span class="o">:</span> <span class="n">doneWriting</span> <span class="n">superblocks</span> <span class="n">and</span> <span class="n">filesystem</span> <span class="n">accounting</span> <span class="n">information</span><span class="o">:</span> <span class="n">done</span> 

<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span>
</pre></div>


<h3 id="blkid-uuid">blkid 挂载的分区UUID</h3>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">blkid</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;e5344a19-9eec-459c-aa92-91dcb45bcb3e&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;xfs&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda2</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;d2ed2e32-6864-483b-8626-2faa42e9a598&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;swap&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;ed89722c-3249-4d7d-8d6f-c22416c9267b&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;xfs&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;91ab28a1-037e-4aea-8e3c-d9f408b5464c&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p1&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;da815dbc-0437-431d-a2ab-22182868d970&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;6cffe72d-a56e-4af6-aeeb-c3ce1aae8330&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p2&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;d51c97c1-263b-406b-ad18-032967f302a1&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sr0</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;2017-01-27-21-18-30-00&quot;</span> <span class="n">LABEL</span><span class="o">=</span><span class="s">&quot;CentOS 7 i686&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;iso9660&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb3</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;0f1a0771-561d-4882-88c7-71ea3700e64c&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p3&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;24efcacf-98b8-444f-9680-47c24c556fc7&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;7306780c-2706-4a34-922e-222fbb740b3e&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p4&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;f30ed796-ed62-47ed-ae0d-aebe25b24703&quot;</span> 
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span>
</pre></div>


<p>预留磁盘空间改为1%</p>
<p>blocks reserved for the super user</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">mke2fs</span> <span class="o">-</span><span class="n">m</span> <span class="mi">1</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span>
<span class="n">mke2fs</span> <span class="mf">1.42.9</span> <span class="p">(</span><span class="mi">28</span><span class="o">-</span><span class="n">Dec</span><span class="o">-</span><span class="mi">2013</span><span class="p">)</span>
<span class="n">Filesystem</span> <span class="n">label</span><span class="o">=</span>
<span class="n">OS</span> <span class="n">type</span><span class="o">:</span> <span class="n">Linux</span>
<span class="n">Block</span> <span class="n">size</span><span class="o">=</span><span class="mi">4096</span> <span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Fragment</span> <span class="n">size</span><span class="o">=</span><span class="mi">4096</span> <span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Stride</span><span class="o">=</span><span class="mi">0</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">Stripe</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span> <span class="n">blocks305216</span> <span class="n">inodes</span><span class="p">,</span> <span class="mi">1220352</span> <span class="n">blocks12203</span> <span class="n">blocks</span> <span class="p">(</span><span class="mf">1.00</span><span class="o">%</span><span class="p">)</span> <span class="n">reserved</span> <span class="k">for</span> <span class="n">the</span> <span class="n">super</span> <span class="n">user</span>
<span class="n">First</span> <span class="n">data</span> <span class="n">block</span><span class="o">=</span><span class="mi">0</span><span class="n">Maximum</span> <span class="n">filesystem</span> <span class="n">blocks</span><span class="o">=</span><span class="mi">124990259238</span> <span class="n">block</span> <span class="n">groups32768</span> <span class="n">blocks</span> <span class="n">per</span> <span class="n">group</span><span class="p">,</span> <span class="mi">32768</span> <span class="n">fragments</span> <span class="n">per</span> <span class="n">group8032</span> <span class="n">inodes</span> <span class="n">per</span> <span class="n">group</span>
<span class="n">Superblock</span> <span class="n">backups</span> <span class="n">stored</span> <span class="n">on</span> <span class="n">blocks</span><span class="o">:</span> 
<span class="mi">32768</span><span class="p">,</span> <span class="mi">98304</span><span class="p">,</span> <span class="mi">163840</span><span class="p">,</span> <span class="mi">229376</span><span class="p">,</span> <span class="mi">294912</span><span class="p">,</span> <span class="mi">819200</span><span class="p">,</span> <span class="mi">884736</span><span class="n">Allocating</span> <span class="n">group</span> <span class="n">tables</span><span class="o">:</span> <span class="n">done</span>                            
<span class="n">Writing</span> <span class="n">inode</span> <span class="n">tables</span><span class="o">:</span> <span class="n">done</span>                            
<span class="n">Writing</span> <span class="n">superblocks</span> <span class="n">and</span> <span class="n">filesystem</span> <span class="n">accounting</span> <span class="n">information</span><span class="o">:</span> <span class="n">done</span>
</pre></div>


<h3 id="inode">inode 对应信息</h3>
<p>默认大概1:4的关系：</p>
<div class="hlcode"><pre><span class="mi">305216</span> <span class="n">inodes</span><span class="p">,</span> <span class="mi">1220352</span> <span class="n">blocks</span>
</pre></div>


<p>mke2fs -i 8192 -t ext4 /dev/sdb1</p>
<div class="hlcode"><pre><span class="mi">610432</span> <span class="n">inodes</span><span class="p">,</span> <span class="mi">1220352</span> <span class="n">blocks</span>
</pre></div>


<p>mkfs.xfs -f /dev/sdb2</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">blkid</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;e5344a19-9eec-459c-aa92-91dcb45bcb3e&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;xfs&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda2</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;d2ed2e32-6864-483b-8626-2faa42e9a598&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;swap&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;ed89722c-3249-4d7d-8d6f-c22416c9267b&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;xfs&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;13eb97d6-fd9a-4205-b8a3-026f63a5fb55&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;xfs&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p1&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;da815dbc-0437-431d-a2ab-22182868d970&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;5601594d-ef23-4532-b275-1add4c5e0649&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;xfs&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p2&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;d51c97c1-263b-406b-ad18-032967f302a1&quot;</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sr0</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;2017-01-27-21-18-30-00&quot;</span> <span class="n">LABEL</span><span class="o">=</span><span class="s">&quot;CentOS 7 i686&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;iso9660&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb3</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;0f1a0771-561d-4882-88c7-71ea3700e64c&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p3&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;24efcacf-98b8-444f-9680-47c24c556fc7&quot;</span> 
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;7306780c-2706-4a34-922e-222fbb740b3e&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p4&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;f30ed796-ed62-47ed-ae0d-aebe25b24703&quot;</span>
</pre></div>


<p>du -sb 可查看原大小</p>
<h2 id="mount">磁盘挂载 mount</h2>
<p>mount /dev/sdb4 /mnt</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span> <span class="o">/</span><span class="n">opt</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">mount</span>
<span class="n">sysfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span> <span class="n">type</span> <span class="n">sysfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">proc</span> <span class="n">on</span> <span class="o">/</span><span class="n">proc</span> <span class="n">type</span> <span class="n">proc</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">devtmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span> <span class="n">type</span> <span class="n">devtmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">244792</span><span class="n">k</span><span class="p">,</span><span class="n">nr_inodes</span><span class="o">=</span><span class="mi">61198</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">755</span><span class="p">)</span><span class="n">securityfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">security</span> <span class="n">type</span> <span class="n">securityfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">shm</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">)</span><span class="n">devpts</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">pts</span> <span class="n">type</span> <span class="n">devpts</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">620</span><span class="p">,</span><span class="n">ptmxmode</span><span class="o">=</span><span class="mo">000</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">run</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">755</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">ro</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">755</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">systemd</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">xattr</span><span class="p">,</span><span class="n">release_agent</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">cgroups</span><span class="o">-</span><span class="n">agent</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">systemd</span><span class="p">)</span><span class="n">pstore</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">pstore</span> <span class="n">type</span> <span class="n">pstore</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">freezer</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">freezer</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">memory</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">memory</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">pids</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">pids</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">perf_event</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">perf_event</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">cpuset</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">cpuset</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">net_cls</span><span class="p">,</span><span class="n">net_prio</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">net_prio</span><span class="p">,</span><span class="n">net_cls</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">cpu</span><span class="p">,</span><span class="n">cpuacct</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">cpuacct</span><span class="p">,</span><span class="n">cpu</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">devices</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">devices</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">blkio</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">blkio</span><span class="p">)</span><span class="n">cgroup</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="o">/</span><span class="n">hugetlb</span> <span class="n">type</span> <span class="n">cgroup</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">noexec</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">hugetlb</span><span class="p">)</span><span class="n">configfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">config</span> <span class="n">type</span> <span class="n">configfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span> <span class="n">on</span> <span class="o">/</span> <span class="n">type</span> <span class="n">xfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">attr2</span><span class="p">,</span><span class="n">inode64</span><span class="p">,</span><span class="n">noquota</span><span class="p">)</span><span class="n">systemd</span><span class="o">-</span><span class="mi">1</span> <span class="n">on</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">binfmt_misc</span> <span class="n">type</span> <span class="n">autofs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">fd</span><span class="o">=</span><span class="mi">29</span><span class="p">,</span><span class="n">pgrp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">minproto</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">maxproto</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">direct</span><span class="p">)</span><span class="n">mqueue</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">mqueue</span> <span class="n">type</span> <span class="n">mqueue</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">debugfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">debug</span> <span class="n">type</span> <span class="n">debugfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="n">hugetlbfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">hugepages</span> <span class="n">type</span> <span class="n">hugetlbfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span> <span class="n">on</span> <span class="o">/</span><span class="n">boot</span> <span class="n">type</span> <span class="n">xfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">attr2</span><span class="p">,</span><span class="n">inode64</span><span class="p">,</span><span class="n">noquota</span><span class="p">)</span><span class="n">tmpfs</span> <span class="n">on</span> <span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">0</span> <span class="n">type</span> <span class="n">tmpfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">50748</span><span class="n">k</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="mi">700</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span> <span class="n">on</span> <span class="o">/</span><span class="n">mnt</span> <span class="n">type</span> <span class="n">ext4</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">ordered</span><span class="p">)</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span> <span class="n">on</span> <span class="o">/</span><span class="n">opt</span> <span class="n">type</span> <span class="n">xfs</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">attr2</span><span class="p">,</span><span class="n">inode64</span><span class="p">,</span><span class="n">noquota</span><span class="p">)</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span> <span class="o">/</span><span class="n">opt</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">ls</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">df</span> <span class="o">-</span><span class="n">h</span>
<span class="n">Filesystem</span>      <span class="n">Size</span>  <span class="n">Used</span> <span class="n">Avail</span> <span class="n">Use</span><span class="o">%</span> <span class="n">Mounted</span> <span class="n">on</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span>        <span class="mi">28</span><span class="n">G</span>  <span class="mi">960</span><span class="n">M</span>   <span class="mi">27</span><span class="n">G</span>   <span class="mi">4</span><span class="o">%</span> <span class="o">/</span>
<span class="n">devtmpfs</span>        <span class="mi">240</span><span class="n">M</span>     <span class="mi">0</span>  <span class="mi">240</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">dev</span>
<span class="n">tmpfs</span>           <span class="mi">248</span><span class="n">M</span>     <span class="mi">0</span>  <span class="mi">248</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">shm</span>
<span class="n">tmpfs</span>           <span class="mi">248</span><span class="n">M</span>  <span class="mf">4.6</span><span class="n">M</span>  <span class="mi">244</span><span class="n">M</span>   <span class="mi">2</span><span class="o">%</span> <span class="o">/</span><span class="n">run</span>
<span class="n">tmpfs</span>           <span class="mi">248</span><span class="n">M</span>     <span class="mi">0</span>  <span class="mi">248</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span>       <span class="mi">197</span><span class="n">M</span>  <span class="mi">105</span><span class="n">M</span>   <span class="mi">93</span><span class="n">M</span>  <span class="mi">54</span><span class="o">%</span> <span class="o">/</span><span class="n">boot</span>
<span class="n">tmpfs</span>            <span class="mi">50</span><span class="n">M</span>     <span class="mi">0</span>   <span class="mi">50</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span>        <span class="mi">11</span><span class="n">G</span>   <span class="mi">41</span><span class="n">M</span>  <span class="mf">9.9</span><span class="n">G</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">mnt</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span>       <span class="mf">2.8</span><span class="n">G</span>   <span class="mi">33</span><span class="n">M</span>  <span class="mf">2.8</span><span class="n">G</span>   <span class="mi">2</span><span class="o">%</span> <span class="o">/</span><span class="n">opt</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">umount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">df</span> <span class="o">-</span><span class="n">hFilesystem</span>      <span class="n">Size</span>  <span class="n">Used</span> <span class="n">Avail</span> <span class="n">Use</span><span class="o">%</span> <span class="n">Mounted</span> <span class="n">on</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span>        <span class="mi">28</span><span class="n">G</span>  <span class="mi">960</span><span class="n">M</span>   <span class="mi">27</span><span class="n">G</span>   <span class="mi">4</span><span class="o">%</span> <span class="o">/</span>
<span class="n">devtmpfs</span>        <span class="mi">240</span><span class="n">M</span>     <span class="mi">0</span>  <span class="mi">240</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">dev</span>
<span class="n">tmpfs</span>           <span class="mi">248</span><span class="n">M</span>     <span class="mi">0</span>  <span class="mi">248</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">shm</span>
<span class="n">tmpfs</span>           <span class="mi">248</span><span class="n">M</span>  <span class="mf">4.6</span><span class="n">M</span>  <span class="mi">244</span><span class="n">M</span>   <span class="mi">2</span><span class="o">%</span> <span class="o">/</span><span class="n">run</span>
<span class="n">tmpfs</span>           <span class="mi">248</span><span class="n">M</span>     <span class="mi">0</span>  <span class="mi">248</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span>       <span class="mi">197</span><span class="n">M</span>  <span class="mi">105</span><span class="n">M</span>   <span class="mi">93</span><span class="n">M</span>  <span class="mi">54</span><span class="o">%</span> <span class="o">/</span><span class="n">boot</span>
<span class="n">tmpfs</span>            <span class="mi">50</span><span class="n">M</span>     <span class="mi">0</span>   <span class="mi">50</span><span class="n">M</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span>        <span class="mi">11</span><span class="n">G</span>   <span class="mi">41</span><span class="n">M</span>  <span class="mf">9.9</span><span class="n">G</span>   <span class="mi">1</span><span class="o">%</span> <span class="o">/</span><span class="n">mnt</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span>
</pre></div>


<p>mount -o ro</p>
<p>默认选项：</p>
<div class="hlcode"><pre><span class="nx">defaults</span>              <span class="nx">Use</span> <span class="k">default</span> <span class="nx">options</span><span class="o">:</span> <span class="nx">rw</span><span class="p">,</span> <span class="nx">suid</span><span class="p">,</span> <span class="nx">dev</span><span class="p">,</span> <span class="nx">exec</span><span class="p">,</span> <span class="nx">auto</span><span class="p">,</span> <span class="nx">nouser</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">async</span><span class="p">.</span>

              <span class="nx">Note</span> <span class="nx">that</span> <span class="nx">the</span> <span class="nx">real</span> <span class="nx">set</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">all</span> <span class="k">default</span> <span class="nx">mount</span> <span class="nx">options</span> <span class="nx">depends</span> <span class="nx">on</span> <span class="nx">kernel</span> <span class="nx">and</span> <span class="nx">filesystem</span>              <span class="nx">type</span><span class="p">.</span> <span class="nx">See</span> <span class="nx">the</span> <span class="nx">begin</span> <span class="nx">of</span> <span class="k">this</span> <span class="nx">section</span> <span class="k">for</span> <span class="nx">more</span> <span class="nx">details</span><span class="p">.</span>
<span class="nx">remount</span>
              <span class="nx">Attempt</span> <span class="nx">to</span> <span class="nx">remount</span> <span class="nx">an</span> <span class="nx">already</span><span class="o">-</span><span class="nx">mounted</span> <span class="nx">filesystem</span><span class="p">.</span>  <span class="nx">This</span> <span class="nx">is</span> <span class="nx">commonly</span> <span class="nx">used</span> <span class="nx">to</span>  <span class="nx">change</span>  <span class="nx">the</span>
              <span class="nx">mount</span> <span class="nx">flags</span> <span class="k">for</span> <span class="nx">a</span> <span class="nx">filesystem</span><span class="p">,</span> <span class="nx">especially</span> <span class="nx">to</span> <span class="nx">make</span> <span class="nx">a</span> <span class="nx">readonly</span> <span class="nx">filesystem</span> <span class="nx">writable</span><span class="p">.</span> <span class="nx">It</span> <span class="nx">does</span>              <span class="nx">not</span> <span class="nx">change</span> <span class="nx">device</span> <span class="nx">or</span> <span class="nx">mount</span> <span class="nx">point</span><span class="p">.</span>

              <span class="nx">The</span> <span class="nx">remount</span> <span class="nx">functionality</span> <span class="nx">follows</span> <span class="nx">the</span> <span class="nx">standard</span> <span class="nx">way</span> <span class="nx">how</span>  <span class="nx">the</span>  <span class="nx">mount</span>  <span class="nx">command</span>  <span class="nx">works</span>  <span class="kd">with</span>
              <span class="nx">options</span>  <span class="nx">from</span> <span class="nx">fstab</span><span class="p">.</span> <span class="nx">It</span> <span class="nx">means</span> <span class="nx">the</span> <span class="nx">mount</span> <span class="nx">command</span> <span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span> <span class="nx">read</span> <span class="nx">fstab</span> <span class="p">(</span><span class="nx">or</span> <span class="nx">mtab</span><span class="p">)</span> <span class="nx">only</span> <span class="nx">when</span> <span class="nx">a</span>
              <span class="nx">device</span> <span class="nx">and</span> <span class="nx">dir</span> <span class="nx">are</span> <span class="nx">fully</span> <span class="nx">specified</span><span class="p">.</span>

              <span class="nx">mount</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">remount</span><span class="p">,</span><span class="nx">rw</span> <span class="o">/</span><span class="nx">dev</span><span class="o">/</span><span class="nx">foo</span> <span class="o">/</span><span class="nx">dir</span>

              <span class="nx">After</span> <span class="k">this</span> <span class="nx">call</span> <span class="nx">all</span> <span class="nx">old</span> <span class="nx">mount</span> <span class="nx">options</span> <span class="nx">are</span> <span class="nx">replaced</span> <span class="nx">and</span> <span class="nx">arbitrary</span>  <span class="nx">stuff</span>  <span class="nx">from</span>  <span class="nx">fstab</span>  <span class="nx">is</span>
              <span class="nx">ignored</span><span class="p">,</span>  <span class="nx">except</span>  <span class="nx">the</span>  <span class="nx">loop</span><span class="o">=</span>  <span class="nx">option</span> <span class="nx">which</span> <span class="nx">is</span> <span class="nx">internally</span> <span class="nx">generated</span> <span class="nx">and</span> <span class="nx">maintained</span> <span class="nx">by</span> <span class="nx">the</span>
              <span class="nx">mount</span> <span class="nx">command</span><span class="p">.</span>

              <span class="nx">mount</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">remount</span><span class="p">,</span><span class="nx">rw</span>  <span class="o">/</span><span class="nx">dir</span>

              <span class="nx">After</span> <span class="k">this</span> <span class="nx">call</span> <span class="nx">mount</span> <span class="nx">reads</span> <span class="nx">fstab</span> <span class="p">(</span><span class="nx">or</span> <span class="nx">mtab</span><span class="p">)</span> <span class="nx">and</span> <span class="nx">merges</span> <span class="nx">these</span> <span class="nx">options</span> <span class="kd">with</span>  <span class="nx">options</span>  <span class="nx">from</span>
              <span class="nx">command</span> <span class="nx">line</span> <span class="p">(</span> <span class="o">-</span><span class="nx">o</span> <span class="p">).</span>
</pre></div>


<h2 id="fstab">分区挂载配置文件fstab</h2>
<p>/etc/fstab</p>
<p>配置文件中六列代表意思：</p>
<p>第一列：挂载的磁盘</p>
<p>第二列：挂载的位置</p>
<p>第三列：挂载磁盘的分区类型</p>
<p>第四列：挂载时的选项</p>
<p>第五列：能否被dump备份命令作用：dump是一个用来作为备份的命令。通常这个参 数的值为0或者1</p>
<ul>
<li>0：代表不要做dump备份</li>
<li>1：代表要每天进行dump的操作</li>
<li>2：代表不定日期的进行dump操作</li>
</ul>
<p>第六列：是否检验扇区：开机的过程中，系统默认会以fsck检验我们系统是否为完整（clean）。</p>
<ul>
<li>0：不要检验</li>
<li>1：最早检验（一般根目录会选择）</li>
<li>2：1级别检验完成之后进行检验-</li>
</ul>
<div class="hlcode"><pre><span class="c">## /etc/fstab# Created by anaconda on Tue Aug  1 06:43:54 2017## Accessible filesystems, by reference, are maintained under &#39;/dev/disk&#39;# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info#UUID=ed89722c-3249-4d7d-8d6f-c22416c9267b /                       xfs     defaults        0 0UUID=e5344a19-9eec-459c-aa92-91dcb45bcb3e /boot                   xfs     defaults        0 0UUID=d2ed2e32-6864-483b-8626-2faa42e9a598 swap                    swap    defaults        0 0</span>
<span class="c">## /etc/fstab# Created by anaconda on Tue Aug  1 06:43:54 2017## Accessible filesystems, by reference, are maintained under &#39;/dev/disk&#39;# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info#UUID=ed89722c-3249-4d7d-8d6f-c22416c9267b /                       xfs     defaults        0 0UUID=e5344a19-9eec-459c-aa92-91dcb45bcb3e /boot                   xfs     defaults        0 0UUID=d2ed2e32-6864-483b-8626-2faa42e9a598 swap                    swap    defaults        0 0/dev/sdb2                                 /opt                    xfs     defaults        0 0</span>
</pre></div>


<p>man mount man fstab</p>
<h2 id="_2"></h2>
<p>查看UUID 命令blkid</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">blkid</span>  <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb4</span><span class="o">:</span> <span class="n">UUID</span><span class="o">=</span><span class="s">&quot;7306780c-2706-4a34-922e-222fbb740b3e&quot;</span> <span class="n">TYPE</span><span class="o">=</span><span class="s">&quot;ext4&quot;</span> <span class="n">PARTLABEL</span><span class="o">=</span><span class="s">&quot;p4&quot;</span> <span class="n">PARTUUID</span><span class="o">=</span><span class="s">&quot;f30ed796-ed62-47ed-ae0d-aebe25b24703&quot;</span> 
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span>
</pre></div>


<p>写入fstab</p>
<div class="hlcode"><pre><span class="cp">## /etc/fstab# Created by anaconda on Tue Aug  1 06:43:54 2017## Accessible filesystems, by reference, are maintained under &#39;/dev/disk&#39;# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info#</span>
<span class="n">UUID</span><span class="o">=</span><span class="n">ed89722c</span><span class="o">-</span><span class="mi">3249</span><span class="o">-</span><span class="mi">4</span><span class="n">d7d</span><span class="o">-</span><span class="mi">8</span><span class="n">d6f</span><span class="o">-</span><span class="n">c22416c9267b</span> <span class="o">/</span>                       <span class="n">xfs</span>     <span class="n">defaults</span>        <span class="mi">0</span> <span class="mi">0</span>
<span class="n">UUID</span><span class="o">=</span><span class="n">e5344a19</span><span class="o">-</span><span class="mi">9</span><span class="n">eec</span><span class="o">-</span><span class="mi">459</span><span class="n">c</span><span class="o">-</span><span class="n">aa92</span><span class="o">-</span><span class="mi">91</span><span class="n">dcb45bcb3e</span> <span class="o">/</span><span class="n">boot</span>                   <span class="n">xfs</span>     <span class="n">defaults</span>        <span class="mi">0</span> <span class="mi">0</span>
<span class="n">UUID</span><span class="o">=</span><span class="n">d2ed2e32</span><span class="o">-</span><span class="mi">6864</span><span class="o">-</span><span class="mi">483</span><span class="n">b</span><span class="o">-</span><span class="mi">8626</span><span class="o">-</span><span class="mf">2f</span><span class="n">aa42e9a598</span> <span class="n">swap</span>                    <span class="n">swap</span>    <span class="n">defaults</span>        <span class="mi">0</span> <span class="mi">0</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span>                                 <span class="o">/</span><span class="n">opt</span>                    <span class="n">xfs</span>     <span class="n">defaults</span>        <span class="mi">0</span> <span class="mi">0</span>
<span class="n">UUID</span><span class="o">=</span><span class="mi">7306780</span><span class="n">c</span><span class="o">-</span><span class="mi">2706</span><span class="o">-</span><span class="mi">4</span><span class="n">a34</span><span class="o">-</span><span class="mf">922e-222</span><span class="n">fbb740b3e</span>     <span class="o">/</span><span class="n">mnt</span>                     <span class="n">ext4</span>    <span class="n">defaults</span>        <span class="mi">0</span> <span class="mi">0</span>
</pre></div>


<h2 id="swap">手动增加swap空间</h2>
<p>当有需求要增加swap空间时，增加步骤如下 ：</p>
<ul>
<li>1、dd if=/dev/zero of=/tmp/newdisk bs=1M count=100 生成100M磁盘</li>
<li>2、chmod 600 /tmp/newdisk 修改磁盘文件权限</li>
<li>3、mkswap -f /tmp/newdisk 格式化磁盘</li>
<li>4、free -m 查看原swap 大小</li>
<li>5、swapon /tmp/newdisk 挂载新磁盘到swap中</li>
<li>6、free -m 再查看swap大小</li>
<li>7、swapoff /tmp/newdisk 卸载新加swap</li>
<li>8、free -m 最后看swap大小是否恢复</li>
<li>9、rm -rf /tmp/newdisk 删除生成的磁盘文件</li>
</ul>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">zero</span> <span class="n">of</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span> <span class="n">bs</span><span class="o">=</span><span class="mi">1</span><span class="n">M</span> <span class="n">count</span><span class="o">=</span><span class="mi">100</span>
<span class="mi">100</span><span class="o">+</span><span class="mi">0</span> <span class="n">records</span> <span class="n">in100</span><span class="o">+</span><span class="mi">0</span> <span class="n">records</span> <span class="n">out104857600</span> <span class="n">bytes</span> <span class="p">(</span><span class="mi">105</span> <span class="n">MB</span><span class="p">)</span> <span class="n">copied</span><span class="p">,</span> <span class="mf">3.73145</span> <span class="n">s</span><span class="p">,</span> <span class="mf">28.1</span> <span class="n">MB</span><span class="o">/</span><span class="n">s</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">ll</span> <span class="o">/</span><span class="n">tmp</span>
<span class="n">total</span> <span class="mi">102400</span><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">104857600</span> <span class="n">Aug</span> <span class="mi">17</span> <span class="mo">01</span><span class="o">:</span><span class="mi">28</span> <span class="n">newdisk</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">ls</span> <span class="o">-</span><span class="n">lh</span> <span class="o">/</span><span class="n">tmp</span>
<span class="n">total</span> <span class="mi">100</span><span class="n">M</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">100</span><span class="n">M</span> <span class="n">Aug</span> <span class="mi">17</span> <span class="mo">01</span><span class="o">:</span><span class="mi">28</span> <span class="n">newdisk</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">mkswap</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span> 
<span class="n">Setting</span> <span class="n">up</span> <span class="n">swapspace</span> <span class="n">version</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">102396</span> <span class="n">KiB</span>
<span class="n">no</span> <span class="n">label</span><span class="p">,</span> <span class="n">UUID</span><span class="o">=</span><span class="mi">14</span><span class="n">cdc2cb</span><span class="o">-</span><span class="n">dc3c</span><span class="o">-</span><span class="mi">4</span><span class="n">d7e</span><span class="o">-</span><span class="n">a486</span><span class="o">-</span><span class="n">deb1f7f3201c</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">free</span> <span class="o">-</span><span class="n">m</span>
              <span class="n">total</span>        <span class="n">used</span>        <span class="n">free</span>      <span class="n">shared</span>  <span class="n">buff</span><span class="o">/</span><span class="n">cache</span>   <span class="n">available</span>
<span class="nl">Mem:</span>            <span class="mi">495</span>          <span class="mi">68</span>         <span class="mi">142</span>           <span class="mi">4</span>         <span class="mi">285</span>         <span class="mi">401</span><span class="n">Swap</span><span class="o">:</span>          <span class="mi">2047</span>           <span class="mi">0</span>        <span class="mi">2047</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">swapon</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span> 
<span class="nl">swapon:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span><span class="o">:</span> <span class="n">insecure</span> <span class="n">permissions</span> <span class="mo">0644</span><span class="p">,</span> <span class="mo">0600</span> <span class="n">suggested</span><span class="p">.</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">free</span> <span class="o">-</span><span class="n">m</span>
              <span class="n">total</span>        <span class="n">used</span>        <span class="n">free</span>      <span class="n">shared</span>  <span class="n">buff</span><span class="o">/</span><span class="n">cache</span>   <span class="n">available</span>
<span class="nl">Mem:</span>            <span class="mi">495</span>          <span class="mi">68</span>         <span class="mi">142</span>           <span class="mi">4</span>         <span class="mi">285</span>         <span class="mi">401</span><span class="n">Swap</span><span class="o">:</span>          <span class="mi">2147</span>           <span class="mi">0</span>        <span class="mi">2147</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">chmod</span> <span class="mi">600</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span>
 <span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> 
 <span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">swapoff</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span> 
 <span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span> <span class="n">free</span> <span class="o">-</span><span class="n">m</span>
              <span class="n">total</span>        <span class="n">used</span>        <span class="n">free</span>      <span class="n">shared</span>  <span class="n">buff</span><span class="o">/</span><span class="n">cache</span>   <span class="n">available</span>
<span class="nl">Mem:</span>            <span class="mi">495</span>          <span class="mi">68</span>         <span class="mi">142</span>           <span class="mi">4</span>         <span class="mi">285</span>         <span class="mi">401</span><span class="n">Swap</span><span class="o">:</span>          <span class="mi">2047</span>           <span class="mi">0</span>        <span class="mi">2047</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span>  <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">newdisk</span> 
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">fxq</span><span class="o">-</span><span class="mi">1</span> <span class="n">opt</span><span class="p">]</span><span class="err">#</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-02-18 21:25:37</p>
      </span>
    </div>

    
    
  </body>
</html>