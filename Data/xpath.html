<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>xpath - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Data">Data</a>&nbsp;&#187;&nbsp;xpath
    <span class="updated">Page Updated&nbsp;
      2018-07-29 20:20
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">xpath</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#xpath">xpath</a><ul>
<li><a href="#_1">插件</a></li>
<li><a href="#_2">选取节点</a></li>
<li><a href="#_3">谓语</a></li>
<li><a href="#_4">运算符</a><ul>
<li><a href="#_5">过滤数据</a></li>
</ul>
</li>
<li><a href="#_6">通配符</a></li>
<li><a href="#_7">取多个路径</a></li>
<li><a href="#xpath_1">Xpath轴</a></li>
<li><a href="#_8">功能函数</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="xpath">xpath</h1>
<p>XML Path Language 是在XML和HTML文档中查找信息的语言，可以用来和HTML文档中对元素和属性进行遍历</p>
<h2 id="_1">插件</h2>
<p>Chrome -&gt; XPath Helper</p>
<p>Firefox -&gt; XPath Checker</p>
<h2 id="_2">选取节点</h2>
<p>常用的路径表达式：</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
<th>实例</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>nodename</td>
<td>选取nodename节点的所有子节点</td>
<td>xpath('//div')</td>
<td>选取了div节点的所有子节点</td>
</tr>
<tr>
<td>/</td>
<td>从根节点选取</td>
<td>xpath('/div')</td>
<td>从根节点上选取div节点</td>
</tr>
<tr>
<td>//</td>
<td>选取所有的当前节点，不考虑他们的位置</td>
<td>xpath('//div')</td>
<td>选取所有的div节点</td>
</tr>
<tr>
<td>.</td>
<td>选取当前节点</td>
<td>xpath('./div')</td>
<td>选取当前节点下的div节点</td>
</tr>
<tr>
<td>..</td>
<td>选取当前节点的父节点</td>
<td>xpath('..')</td>
<td>回到上一个节点</td>
</tr>
<tr>
<td>@</td>
<td>选取属性</td>
<td>xpath（'//@calss'</td>
<td>选取所有的class属性</td>
</tr>
</tbody>
</table>
<h2 id="_3">谓语</h2>
<p>谓语被嵌在方括号内，用来查找某个特定的节点或包含某个制定的值的节点</p>
<p>实例：</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath('/body/div[1]')</td>
<td>选取body下的第一个div节点</td>
</tr>
<tr>
<td>xpath('/body/div[last()]')</td>
<td>选取body下最后一个div节点</td>
</tr>
<tr>
<td>xpath('/body/div[last()-1]')</td>
<td>选取body下倒数第二个div节点</td>
</tr>
<tr>
<td>xpath('/body/div[positon()&lt;3]')</td>
<td>选取body下前两个div节点</td>
</tr>
<tr>
<td>xpath('/body/div[<a href="https://my.oschina.net/liwenlong7758">@class</a>]')</td>
<td>选取body下带有class属性的div节点</td>
</tr>
<tr>
<td>xpath('/body/div[@class="main"]')</td>
<td>选取body下class属性为main的div节点</td>
</tr>
<tr>
<td>xpath('/body/div[price&gt;35.00]')</td>
<td>选取body下price元素值大于35的div节点</td>
</tr>
</tbody>
</table>
<h2 id="_4">运算符</h2>
<p>下面列出了可用在 XPath 表达式中的运算符：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>|</td>
<td>计算两个节点集</td>
<td>//book | //cd</td>
<td>返回所有拥有 book 和 cd 元素的节点集</td>
</tr>
<tr>
<td>+</td>
<td>加法</td>
<td>6 + 4</td>
<td>10</td>
</tr>
<tr>
<td>–</td>
<td>减法</td>
<td>6 – 4</td>
<td>2</td>
</tr>
<tr>
<td>*</td>
<td>乘法</td>
<td>6 * 4</td>
<td>24</td>
</tr>
<tr>
<td>div</td>
<td>除法</td>
<td>8 div 4</td>
<td>2</td>
</tr>
<tr>
<td>=</td>
<td>等于</td>
<td>price=9.80</td>
<td>如果 price 是 9.80，则返回 true。如果 price 是 9.90，则返回 false。</td>
</tr>
<tr>
<td>!=</td>
<td>不等于</td>
<td>price!=9.80</td>
<td>如果 price 是 9.90，则返回 true。如果 price 是 9.80，则返回 false。</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
<td>price&lt;9.80</td>
<td>如果 price 是 9.00，则返回 true。如果 price 是 9.90，则返回 false。</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于或等于</td>
<td>price&lt;=9.80</td>
<td>如果 price 是 9.00，则返回 true。如果 price 是 9.90，则返回 false。</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
<td>price&gt;9.80</td>
<td>如果 price 是 9.90，则返回 true。如果 price 是 9.80，则返回 false。</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于或等于</td>
<td>price&gt;=9.80</td>
<td>如果 price 是 9.90，则返回 true。如果 price 是 9.70，则返回 false。</td>
</tr>
<tr>
<td>or</td>
<td>或</td>
<td>price=9.80 or price=9.70</td>
<td>如果 price 是 9.80，则返回 true。如果 price 是 9.50，则返回 false。</td>
</tr>
<tr>
<td>and</td>
<td>与</td>
<td>price&gt;9.00 and price&lt;9.90</td>
<td>如果 price 是 9.80，则返回 true。如果 price 是 8.50，则返回 false。</td>
</tr>
<tr>
<td>mod</td>
<td>计算除法的余数</td>
<td>5 mod 2</td>
<td>1</td>
</tr>
</tbody>
</table>
<h3 id="_5">过滤数据</h3>
<p>取职位信息（第一行数据不需要)</p>
<div class="hlcode"><pre><span class="nt">&lt;tbody&gt;&lt;tr</span> <span class="na">class=</span><span class="s">&quot;h&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l&quot;</span> <span class="na">width=</span><span class="s">&quot;374&quot;</span><span class="nt">&gt;</span>职位名称<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>职位类别<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>人数<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>地点<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>发布时间<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;even&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44425&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>23675-推荐后台高级工程师（北京）<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;hot&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>1<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;odd&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44413&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>23674-新闻内容理解高级工程师<span class="nt">&lt;/a&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;even&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44415&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>23486-自选股IOS客户端开发工程师（北京）<span class="nt">&lt;/a&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>1<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;odd&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44382&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>OMG097-视频安全后台开发（北京）<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;hot&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>3<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;even&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44383&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>OMG097-互动安全后台开发<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;hot&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>3<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;odd&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44384&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>OMG097-运营后台开发<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;hot&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;even&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44369&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>SA-腾讯社交广告联盟广告应用开发高级工程师（北京）<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;hot&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>1<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;odd&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44351&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>WXG02-116  微信搜索和信息流系统测试工程师（深圳）<span class="nt">&lt;/a&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>1<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;even&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44347&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>OMG097-web前端开发（北京）<span class="nt">&lt;/a&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;hot&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>3<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;odd&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;l square&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">href=</span><span class="s">&quot;position_detail.php?id=44303&amp;amp;keywords=&amp;amp;tid=87&amp;amp;lid=2156&quot;</span><span class="nt">&gt;</span>MIG09-QQ浏览器前端开发工程师<span class="nt">&lt;/a&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>技术类<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>1<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>北京<span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>2018-09-23<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                                <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;f&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;</span>共<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;lightblue total&quot;</span><span class="nt">&gt;</span>217<span class="nt">&lt;/span&gt;</span>个职位<span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;right&quot;</span><span class="nt">&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;pagenav&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;javascript:;&quot;</span> <span class="na">class=</span><span class="s">&quot;noactive&quot;</span> <span class="na">id=</span><span class="s">&quot;prev&quot;</span><span class="nt">&gt;</span>上一页<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">class=</span><span class="s">&quot;active&quot;</span> <span class="na">href=</span><span class="s">&quot;javascript:;&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=10#a&quot;</span><span class="nt">&gt;</span>2<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=20#a&quot;</span><span class="nt">&gt;</span>3<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=30#a&quot;</span><span class="nt">&gt;</span>4<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=40#a&quot;</span><span class="nt">&gt;</span>5<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=50#a&quot;</span><span class="nt">&gt;</span>6<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=60#a&quot;</span><span class="nt">&gt;</span>7<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=70#a&quot;</span><span class="nt">&gt;</span>...<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=210#a&quot;</span><span class="nt">&gt;</span>22<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;position.php?keywords=&amp;amp;lid=2156&amp;amp;tid=87&amp;amp;start=10#a&quot;</span> <span class="na">id=</span><span class="s">&quot;next&quot;</span><span class="nt">&gt;</span>下一页<span class="nt">&lt;/a&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;clr&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;clr&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
                    <span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;/tbody&gt;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">from</span> <span class="n">lxml</span> <span class="n">import</span> <span class="n">etree</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">etree</span><span class="p">.</span><span class="n">HTMLParser</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="err">&#39;</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">etree</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="err">&#39;</span><span class="n">tencent</span><span class="p">.</span><span class="n">html</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>

<span class="n">trs</span> <span class="o">=</span> <span class="n">html</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">&quot;//tr[position()&gt;1]&quot;</span><span class="p">)</span>

<span class="n">positions</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">tr</span> <span class="n">in</span> <span class="n">trs</span><span class="o">:</span>
    <span class="n">href</span> <span class="o">=</span> <span class="n">tr</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">&quot;.//a/@href&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="err">#</span> <span class="err">某个标签下，获取这个标签下的子元素</span>
    <span class="n">full_url</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">https</span><span class="o">:</span><span class="c1">//hr.tencent.com/&#39; + href</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">tr</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="err">&#39;</span><span class="p">.</span><span class="o">/</span><span class="n">td</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="c1">//text()&#39;)[0]</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">tr</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">&quot;./td[2]/text()&quot;</span><span class="p">)</span>
    <span class="n">nums</span> <span class="o">=</span> <span class="n">tr</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">&quot;./td[3]/text()&quot;</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">tr</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">&quot;./td[4]/text()&quot;</span><span class="p">)</span>
    <span class="n">pub_time</span> <span class="o">=</span> <span class="n">tr</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">&quot;./td[5]/text()&quot;</span><span class="p">)</span>

    <span class="n">position</span> <span class="o">=</span> <span class="p">{</span>
        <span class="err">&#39;</span><span class="n">url</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">full_url</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">title</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">title</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">category</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">category</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">nums</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">nums</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">address</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">address</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">pub_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">pub_time</span>
    <span class="p">}</span>
    <span class="n">positions</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>
</pre></div>


<h2 id="_6">通配符</h2>
<p>Xpath通过通配符来选取未知的XML元素</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath（'/div/*'）</td>
<td>选取div下的所有子节点</td>
</tr>
<tr>
<td>xpath('/div[<a href="https://my.oschina.net/u/138045">@*</a>]')</td>
<td>选取所有带属性的div节点</td>
</tr>
</tbody>
</table>
<h2 id="_7">取多个路径</h2>
<p>使用“|”运算符可以选取多个路径</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath('//div|//table')</td>
<td>选取所有的div和table节点</td>
</tr>
</tbody>
</table>
<h2 id="xpath_1">Xpath轴</h2>
<p>轴可以定义相对于当前节点的节点集</p>
<table>
<thead>
<tr>
<th>轴名称</th>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ancestor</td>
<td>xpath('./ancestor::*')</td>
<td>选取当前节点的所有先辈节点（父、祖父）</td>
</tr>
<tr>
<td>ancestor-or-self</td>
<td>xpath('./ancestor-or-self::*')</td>
<td>选取当前节点的所有先辈节点以及节点本身</td>
</tr>
<tr>
<td>attribute</td>
<td>xpath('./attribute::*')</td>
<td>选取当前节点的所有属性</td>
</tr>
<tr>
<td>child</td>
<td>xpath('./child::*')</td>
<td>返回当前节点的所有子节点</td>
</tr>
<tr>
<td>descendant</td>
<td>xpath('./descendant::*')</td>
<td>返回当前节点的所有后代节点（子节点、孙节点）</td>
</tr>
<tr>
<td>following</td>
<td>xpath('./following::*')</td>
<td>选取文档中当前节点结束标签后的所有节点</td>
</tr>
<tr>
<td>following-sibing</td>
<td>xpath('./following-sibling::*')</td>
<td>选取当前节点之后的兄弟节点</td>
</tr>
<tr>
<td>parent</td>
<td>xpath('./parent::*')</td>
<td>选取当前节点的父节点</td>
</tr>
<tr>
<td>preceding</td>
<td>xpath('./preceding::*')</td>
<td>选取文档中当前节点开始标签前的所有节点</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>preceding-sibling</th>
<th>xpath('./preceding-sibling::*')</th>
<th>选取当前节点之前的兄弟节点</th>
</tr>
</thead>
<tbody>
<tr>
<td>self</td>
<td>xpath('./self::*')</td>
<td>选取当前节点</td>
</tr>
</tbody>
</table>
<h2 id="_8">功能函数</h2>
<p>使用功能函数能够更好的进行模糊搜索</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>starts-with</td>
<td>xpath('//div[starts-with(<a href="https://my.oschina.net/u/3451001">@id</a>,"ma")]')</td>
<td>选取id值以ma开头的div节点</td>
</tr>
<tr>
<td>contains</td>
<td>xpath('//div[contains(@id,"ma")]')</td>
<td>选取id值包含ma的div节点</td>
</tr>
<tr>
<td>and</td>
<td>xpath('//div[contains(@id,"ma") and contains(@id,"in")]')</td>
<td>选取id值包含ma和in的div节点</td>
</tr>
<tr>
<td>text()</td>
<td>xpath('//div[contains(text(),"ma")]')</td>
<td>选取节点文本包含ma的div节点</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-06-18 11:32:33</p>
      </span>
    </div>

    
    
  </body>
</html>