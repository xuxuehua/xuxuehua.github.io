<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>chattr - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Linux_commands">Linux_commands</a>&nbsp;&#187;&nbsp;chattr
    <span class="updated">Page Updated&nbsp;
      2018-12-22 20:00
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">chattr</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#chattr">chattr</a><ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#options">Options</a><ul>
<li><a href="#43">+ 增加</a></li>
<li><a href="#45">- 删除</a></li>
<li><a href="#_1">= 指定</a></li>
<li><a href="#-r">-R 递归</a></li>
<li><a href="#-v">-V 版本</a></li>
<li><a href="#-f">-f 隐藏错误</a></li>
<li><a href="#-v_1">-v 设置文件版本</a></li>
</ul>
</li>
<li><a href="#_2">控制属性</a><ul>
<li><a href="#a">a 仅仅增加数据</a></li>
<li><a href="#a-access-time">A access time</a></li>
<li><a href="#c">c 自动压缩和解压缩</a></li>
<li><a href="#c_1">C</a></li>
<li><a href="#d">d 转储</a></li>
<li><a href="#d_1">D 同步目录更新</a></li>
<li><a href="#e">e</a></li>
<li><a href="#i">i 锁定所有权限</a></li>
<li><a href="#j-journal">j  日志journal记录</a></li>
<li><a href="#s">s 保密删除</a></li>
<li><a href="#s_1">S 同步写入磁盘</a></li>
<li><a href="#t">t</a></li>
<li><a href="#t_1">T</a></li>
<li><a href="#u">u 还原删除</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="chattr">chattr</h1>
<p>文件有隐藏属性，隐藏属性对系统有很大的帮助。尤其是在系统安全（Security）方面</p>
<p>chattr命令不能保护/、/dev、/tmp、/var目录。</p>
<p>lsattr命令是显示chattr命令设置的文件属性。</p>
<h2 id="usage">Usage</h2>
<div class="hlcode"><pre><span class="n">chattr</span> <span class="p">[</span><span class="o">-</span><span class="n">RVf</span><span class="p">]</span> <span class="p">[</span><span class="n">mode</span><span class="p">]</span>  <span class="p">[</span><span class="n">file</span><span class="p">]</span>
</pre></div>


<h2 id="options">Options</h2>
<h3 id="43">+ 增加</h3>
<p>增加某个特殊参数，其他原本存在的参数不动。 </p>
<h3 id="45">- 删除</h3>
<p>删除某个特殊参数，其他原本存在的参数不动。 </p>
<h3 id="_1">= 指定</h3>
<p>设置一定，且仅有后面接的参数 </p>
<h3 id="-r">-R 递归</h3>
<p>递归的列出文件夹中所有文件的属性</p>
<h3 id="-v">-V 版本</h3>
<p>查看chattr版本</p>
<h3 id="-f">-f 隐藏错误</h3>
<p>抑制大多数错误消息</p>
<h3 id="-v_1">-v 设置文件版本</h3>
<p>设置文件的版本号or代号</p>
<h2 id="_2">控制属性</h2>
<h3 id="a">a 仅仅增加数据</h3>
<p>即append，设定该参数后，只能向文件中添加数据，而不能删除，多用于服务器日志文件安全，只有root才能设定这个属性。</p>
<p>如果是登录文件，就更需要 +a参数，使之可以增加但不能修改与删除原有的数据。</p>
<h3 id="a-access-time">A access time</h3>
<p>当设置了A属性时，这个文件（或目录）的存取时间atime（access）将不可被修改，可避免例如手提电脑有磁盘I/O错误的情况发生</p>
<h3 id="c">c 自动压缩和解压缩</h3>
<p>即compresse，设定文件是否经压缩后再存储。读取时需要经过自动解压操作。</p>
<p>这个属性设置之后，将会自动将此文件“压缩”，在读取的时候将会自动解压缩，但在存储的时候，将会先进行压缩后再存储（对于大文件有用）</p>
<h3 id="c_1">C</h3>
<p>no copy on write</p>
<h3 id="d">d 转储</h3>
<p>即no dump，设定文件不能成为dump程序的备份目标。</p>
<h3 id="d_1">D 同步目录更新</h3>
<p>synchronous directory updates</p>
<h3 id="e">e</h3>
<p>extent format</p>
<h3 id="i">i 锁定所有权限</h3>
<p>immutable，作用很大。它可以让一个文件“不能被删除、改名、设置连接，也无法写入或新增数据”。对于系统安全性有相当大的帮助</p>
<p>因为它可以让一个文件无法被更改，对于需要很高系统安全性的人来说，相当重要。</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">linuxtmp</span><span class="p">]</span><span class="err">#</span> <span class="n">touch</span> <span class="n">attrtest</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">linuxtmp</span><span class="p">]</span><span class="err">#</span> <span class="n">chattr</span> <span class="o">+</span><span class="n">i</span> <span class="n">attrtest</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">linuxtmp</span><span class="p">]</span><span class="err">#</span> <span class="n">rm</span> <span class="n">attrtest</span>
<span class="nl">rm:</span> <span class="n">remove</span> <span class="n">write</span><span class="o">-</span><span class="n">protected</span> <span class="n">regular</span> <span class="n">empty</span> <span class="n">file</span> <span class="err">`</span><span class="n">attrtest</span><span class="err">&#39;</span><span class="o">?</span> <span class="n">y</span>
<span class="nl">rm:</span> <span class="n">cannot</span> <span class="n">remove</span> <span class="err">`</span><span class="n">attrtest</span><span class="err">&#39;</span><span class="o">:</span> <span class="n">Operation</span> <span class="n">not</span> <span class="n">permitted</span>
</pre></div>


<h3 id="j-journal">j  日志journal记录</h3>
<p>即journal，设定此参数使得当通过mount参数：data=ordered 或者 data=writeback 挂 载的文件系统，文件在写入时会先被记录(在journal中)。如果filesystem被设定参数为 data=journal，则该参数自动失效。 </p>
<h3 id="s">s 保密删除</h3>
<p>保密性地删除文件或目录，即硬盘空间被全部收回。</p>
<h3 id="s_1">S 同步写入磁盘</h3>
<p>这个功能有点类似sync。就是将数据同步写入磁盘中。可以有效地避免数据流失</p>
<h3 id="t">t</h3>
<p>no  tail-merging</p>
<h3 id="t_1">T</h3>
<p>top of directory hierarchy</p>
<h3 id="u">u 还原删除</h3>
<p>与s相反，当设定为u时，数据内容其实还存在磁盘中，可以用于undeletion。</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-07-31 09:57:19</p>
      </span>
    </div>

    
    
  </body>
</html>