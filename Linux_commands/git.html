<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>git - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Linux_commands">Linux_commands</a>&nbsp;&#187;&nbsp;git
    <span class="updated">Page Updated&nbsp;
      2018-08-27 18:14
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">git</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#git">git</a><ul>
<li><a href="#proxy">proxy</a></li>
<li><a href="#commands">Commands</a><ul>
<li><a href="#clone">clone</a></li>
</ul>
</li>
<li><a href="#create">创建 Create</a></li>
<li><a href="#local-change">本地修改 Local Change</a></li>
<li><a href="#commit-history">提交历史 Commit History</a></li>
<li><a href="#branch-tags">分支和标签 Branch &amp; Tags</a></li>
<li><a href="#update-publish">更新和提交 Update &amp; Publish</a></li>
<li><a href="#merge-rebase">合并和重建 Merge &amp; Rebase</a></li>
<li><a href="#undo">撤销 Undo</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="git">git</h1>
<h2 id="proxy">proxy</h2>
<p>可以用git config --list查看是否设置成功</p>
<div class="hlcode"><pre><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">http</span><span class="p">.</span><span class="n">proxy</span> <span class="n">http</span><span class="o">:</span><span class="c1">//localhost:8123</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">https</span><span class="p">.</span><span class="n">proxy</span> <span class="n">http</span><span class="o">:</span><span class="c1">//localhost:8123</span>
</pre></div>


<h2 id="commands">Commands</h2>
<h3 id="clone">clone</h3>
<p>克隆分支</p>
<div class="hlcode"><pre><span class="n">git</span> <span class="n">clone</span> <span class="o">-</span><span class="n">b</span> <span class="n">mybranch</span> <span class="o">--</span><span class="n">single</span><span class="o">-</span><span class="n">branch</span> <span class="n">git</span><span class="o">:</span><span class="c1">//sub.domain.com/repo.git</span>
</pre></div>


<h2 id="create">创建 Create</h2>
<div class="hlcode"><pre><span class="cp"># Clone an existing repository</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">clone</span> <span class="n">ssh</span><span class="o">:</span><span class="c1">//git@github.com/username/repo.git</span>

<span class="cp"># Create a new local repository</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">init</span>
</pre></div>


<hr />
<h2 id="local-change">本地修改 Local Change</h2>
<div class="hlcode"><pre><span class="err">#</span> <span class="nx">Changed</span> <span class="n">files</span> <span class="k">in</span> <span class="nx">your</span> <span class="nx">working</span> <span class="nx">directory</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">status</span>


<span class="err">#</span> <span class="nx">Changes</span> <span class="k">to</span> <span class="nx">tracked</span> <span class="nx">files</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">diff</span>

<span class="err">#</span> <span class="nb">Add</span> <span class="kc">all</span> <span class="nx">current</span> <span class="nx">changes</span> <span class="k">to</span> <span class="nx">the</span> <span class="nb">next</span> <span class="nx">commit</span> 
<span class="err">$</span> <span class="nx">git</span> <span class="nb">add</span> <span class="nx">.</span>

<span class="err">#</span> <span class="nb">Add</span> <span class="nx">some</span> <span class="n">changes</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nb">file</span><span class="o">&gt;</span> <span class="k">to</span> <span class="nx">the</span> <span class="nb">next</span> <span class="nx">commit</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">add</span> <span class="na">-p</span> <span class="o">&lt;</span><span class="nb">file</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nx">Commit</span> <span class="kc">all</span> <span class="kd">local</span> <span class="n">changes</span> <span class="k">in</span> <span class="nx">tracked</span> <span class="nx">files</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">commit</span> <span class="na">-a</span> 

<span class="err">#</span> <span class="nx">Commit</span> <span class="nx">previously</span> <span class="nx">Staged</span> <span class="nx">changes</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">commit</span>

<span class="err">#</span> <span class="nx">Change</span> <span class="nx">the</span> <span class="nb">last</span> <span class="nx">commit</span> 
<span class="o">*</span> <span class="nx">Don</span><span class="s1">&#39;t amend published commits</span>
<span class="s1">$ git commit --amend</span>
</pre></div>


<hr />
<h2 id="commit-history">提交历史 Commit History</h2>
<div class="hlcode"><pre><span class="err">#</span> <span class="nx">Show</span> <span class="kc">all</span> <span class="nx">commits</span><span class="p">,</span> <span class="nx">starting</span> <span class="k">with</span> <span class="nx">newest</span>
<span class="err">$</span> <span class="nx">git</span> <span class="k">log</span>

<span class="err">#</span> <span class="nx">Show</span> <span class="nx">changes</span> <span class="nx">over</span> <span class="nb">time</span> <span class="nb">for</span> <span class="nx">a</span> <span class="nx">specific</span> <span class="nb">file</span>
<span class="err">$</span> <span class="nx">git</span> <span class="k">log</span> <span class="na">-p</span> <span class="o">&lt;</span><span class="nb">file</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nx">Who</span> <span class="nx">changed</span> <span class="nx">what</span> <span class="ow">and</span> <span class="n">when</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nb">file</span><span class="o">&gt;</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">blame</span> <span class="o">&lt;</span><span class="nb">file</span><span class="o">&gt;</span>
</pre></div>


<hr />
<h2 id="branch-tags">分支和标签 Branch &amp; Tags</h2>
<div class="hlcode"><pre><span class="err">#</span> <span class="nb">List</span> <span class="kc">all</span> <span class="nx">existing</span> <span class="nx">branches</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">branch</span> <span class="na">-av</span>

<span class="err">#</span> <span class="nx">Switch</span> <span class="nb">HEAD</span> <span class="nx">branch</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">checkout</span> <span class="o">&lt;</span><span class="nx">branch</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nb">Create</span> <span class="nx">a</span> <span class="nb">new</span> <span class="nx">branch</span> <span class="nx">based</span> <span class="k">on</span> <span class="nx">your</span> <span class="nx">current</span> <span class="nb">HEAD</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">branch</span> <span class="o">&lt;</span><span class="nb">new</span><span class="na">-branch</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nb">Create</span> <span class="nx">a</span> <span class="nb">new</span> <span class="nx">tracking</span> <span class="nx">branch</span> <span class="nx">base</span> <span class="k">on</span> <span class="nx">a</span> <span class="nx">remote</span> <span class="nx">branch</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">checkout</span> <span class="o">--</span><span class="nx">track</span> <span class="o">&lt;</span><span class="nx">remote</span><span class="p">/</span><span class="nx">branch</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nb">Delete</span> <span class="nx">a</span> <span class="kd">local</span> <span class="nx">branch</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">branch</span> <span class="na">-d</span> <span class="o">&lt;</span><span class="nx">branch_name</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nx">Mark</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">commit</span> <span class="k">with</span> <span class="nx">a</span> <span class="kt">tag</span>
<span class="err">$</span> <span class="nx">git</span> <span class="kt">tag</span> <span class="o">&lt;</span><span class="k">tag_name</span><span class="o">&gt;</span>
</pre></div>


<hr />
<h2 id="update-publish">更新和提交 Update &amp; Publish</h2>
<div class="hlcode"><pre><span class="err">#</span> <span class="nb">List</span> <span class="kc">all</span> <span class="nx">currently</span> <span class="nx">configured</span> <span class="nx">remotes</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">remote</span> <span class="na">-v</span> 

<span class="err">#</span> <span class="nx">Show</span> <span class="nx">information</span> <span class="nx">about</span> <span class="nx">a</span> <span class="nx">remote</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">remote</span> <span class="nx">show</span> <span class="o">&lt;</span><span class="nx">remote</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nb">Add</span> <span class="nb">new</span> <span class="nx">remote</span> <span class="nx">repository</span><span class="p">,</span> <span class="nb">named</span> <span class="o">&lt;</span><span class="nx">remote</span><span class="o">&gt;</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">remote</span> <span class="nb">add</span> <span class="o">&lt;</span><span class="nx">shortname</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">url</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nx">Download</span> <span class="kc">all</span> <span class="nx">changes</span> <span class="nb">from</span> <span class="o">&lt;</span><span class="nx">remote</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">but</span> <span class="nx">don</span><span class="s1">&#39;t integrate into HEAD</span>
<span class="s1">$ git fetch &lt;remote&gt;</span>

<span class="s1"># Download changes and directly merge/integrate into HEAD</span>
<span class="s1">$ git pull &lt;remote&gt; &lt;branch&gt;</span>

<span class="s1"># Publish local changes on a remote</span>
<span class="s1">$ git push &lt;remote&gt; &lt;branch&gt;</span>

<span class="s1"># Delete a branch on the remote </span>
<span class="s1">$ git branch -dr &lt;remote/branch&gt;</span>

<span class="s1"># Publish your tags</span>
<span class="s1">$ git push --tags</span>
</pre></div>


<hr />
<h2 id="merge-rebase">合并和重建 Merge &amp; Rebase</h2>
<div class="hlcode"><pre><span class="err">#</span> <span class="nb">Merge</span> <span class="o">&lt;</span><span class="nx">branch</span><span class="o">&gt;</span> <span class="k">into</span> <span class="n">your</span> <span class="nx">current</span> <span class="nb">HEAD</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">merge</span> <span class="o">&lt;</span><span class="nx">branch</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nx">Rebase</span> <span class="nx">your</span> <span class="nx">current</span> <span class="nb">HEAD</span> <span class="nx">onto</span> <span class="o">&lt;</span><span class="nx">branch</span><span class="o">&gt;</span>
<span class="o">*</span> <span class="nx">Don</span><span class="s1">&#39;t rebase published commits</span>
<span class="s1">$ git rebase &lt;branch&gt;</span>

<span class="s1"># Abort a rebase</span>
<span class="s1">$ git rebase --abort</span>

<span class="s1"># Continue a rebase after resolving conflicts</span>
<span class="s1">$ git rebase --continue</span>

<span class="s1"># Use your configurd merge tool to solve conflicts</span>
<span class="s1">$ git mergetool</span>

<span class="s1"># Use your editor to manually solve conflicts and (after resloving) mark file as resolved </span>
<span class="s1">$ git add &lt;resolved-file&gt;</span>
<span class="s1">$ git rm &lt;resolved-file&gt;</span>
</pre></div>


<hr />
<h2 id="undo">撤销 Undo</h2>
<div class="hlcode"><pre><span class="err">#</span> <span class="nx">Discard</span> <span class="kc">all</span> <span class="kd">local</span> <span class="n">changes</span> <span class="k">in</span> <span class="nx">your</span> <span class="nx">working</span> <span class="nx">directory</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">reset</span> <span class="o">--</span><span class="nx">hard</span> <span class="nb">HEAD</span>

<span class="err">#</span> <span class="nx">Discard</span> <span class="kd">local</span> <span class="n">changes</span> <span class="k">in</span> <span class="nx">a</span> <span class="nx">specific</span> <span class="nb">file</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">checkout</span> <span class="nb">HEAD</span> <span class="o">&lt;</span><span class="nb">file</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="nx">Revert</span> <span class="nx">a</span> <span class="nx">commit</span> <span class="p">(</span><span class="k">by</span> <span class="nx">producing</span> <span class="nx">a</span> <span class="nx">enw</span> <span class="nx">commit</span> <span class="ow">and</span> <span class="nx">discard</span> <span class="kc">all</span> <span class="nx">changes</span> <span class="nx">since</span> <span class="nx">then</span><span class="p">)</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">reset</span> <span class="o">--</span><span class="nx">hard</span> <span class="o">&lt;</span><span class="nx">commit</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="ow">And</span> <span class="nx">preserve</span> <span class="kc">all</span> <span class="nx">changes</span> <span class="nx">as</span> <span class="nx">unstaged</span> <span class="nx">changes</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">reset</span> <span class="o">&lt;</span><span class="nx">commit</span><span class="o">&gt;</span>

<span class="err">#</span> <span class="ow">And</span> <span class="nx">preserve</span> <span class="nx">uncommitted</span> <span class="kd">local</span> <span class="nx">changes</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nb">reset</span> <span class="o">--</span><span class="nx">keep</span> <span class="o">&lt;</span><span class="nx">commit</span><span class="o">&gt;</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-03-03 15:03:08</p>
      </span>
    </div>

    
    
  </body>
</html>