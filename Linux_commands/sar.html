<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>sar - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Linux_commands">Linux_commands</a>&nbsp;&#187;&nbsp;sar
    <span class="updated">Page Updated&nbsp;
      2018-11-27 01:07
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">sar</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#sar">sar</a><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#option">option</a><ul>
<li><a href="#-b-io">-b I/O 数据</a></li>
<li><a href="#-b-paging">-B Paging 数据</a></li>
<li><a href="#-d">-d 块设备状态</a></li>
<li><a href="#-h">-H 配置使用状态</a></li>
<li><a href="#-i">-I 中断信息</a></li>
<li><a href="#-n">-n 网络统计</a><ul>
<li><a href="#iface">IFACE 参数</a></li>
</ul>
</li>
<li><a href="#-m">-m 硬件信息</a></li>
<li><a href="#-q">-q 队列</a></li>
<li><a href="#-r">-r 内存使用率</a></li>
<li><a href="#-r_1">-R 内存状态</a></li>
<li><a href="#-s-swap">-S swap空间</a></li>
<li><a href="#-u-all-cpu">-u [ ALL ] CPU使用率</a></li>
<li><a href="#-v">-v 内核信息</a></li>
<li><a href="#-w">-w 任务信息</a></li>
<li><a href="#-w-swapping">-W swapping 状态</a></li>
<li><a href="#-y-tty">-y tty设备</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="sar">sar</h1>
<p>System Activity Report </p>
<p>sar 命令用于收集、汇报和保存系统活动信息, 不仅仅用于监控网络，还可以现实CPU，运行队列，磁盘I/O，分页交换区，内存，CPU中断等性能数据</p>
<p><img alt="img" src="https://snag.gy/TZ3BPa.jpg" /></p>
<h2 id="installation">Installation</h2>
<div class="hlcode"><pre><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">sysstat</span>
</pre></div>


<h2 id="usage">Usage</h2>
<div class="hlcode"><pre><span class="nx">sar</span> <span class="err">[</span> <span class="nx">options</span> <span class="cp">]</span> <span class="cp">[</span> <span class="o">&lt;</span><span class="nx">interval</span><span class="o">&gt;</span> <span class="err">[</span> <span class="o">&lt;</span><span class="nb">count</span><span class="o">&gt;</span> <span class="cp">]</span> ]
</pre></div>


<h2 id="option">option</h2>
<h3 id="-b-io">-b I/O 数据</h3>
<p>I/O and transfer rate statistics</p>
<h3 id="-b-paging">-B Paging 数据</h3>
<p>Paging statistics</p>
<h3 id="-d">-d 块设备状态</h3>
<p>Block device statistics</p>
<p>报告设备使用情况</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">local</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">sar</span> <span class="o">-</span><span class="n">d</span> <span class="mi">10</span> <span class="mi">3</span>
<span class="n">Linux</span> <span class="mf">5.0.10</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="p">.</span><span class="n">elrepo</span><span class="p">.</span><span class="n">x86_64</span> <span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">novalocal</span><span class="p">)</span>  <span class="mo">05</span><span class="o">/</span><span class="mo">03</span><span class="o">/</span><span class="mi">2019</span>  <span class="n">_x86_64_</span>    <span class="p">(</span><span class="mi">2</span> <span class="n">CPU</span><span class="p">)</span>

<span class="mi">08</span><span class="o">:</span><span class="mo">04</span><span class="o">:</span><span class="mi">47</span> <span class="n">PM</span>       <span class="n">DEV</span>       <span class="n">tps</span>  <span class="n">rd_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">wr_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">avgrq</span><span class="o">-</span><span class="n">sz</span>  <span class="n">avgqu</span><span class="o">-</span><span class="n">sz</span>     <span class="n">await</span>     <span class="n">svctm</span>     <span class="o">%</span><span class="n">util</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">04</span><span class="o">:</span><span class="mi">57</span> <span class="n">PM</span>    <span class="n">dev8</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">04</span><span class="o">:</span><span class="mi">57</span> <span class="n">PM</span>  <span class="n">dev253</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">04</span><span class="o">:</span><span class="mi">57</span> <span class="n">PM</span>  <span class="n">dev253</span><span class="o">-</span><span class="mi">1</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>

<span class="mi">08</span><span class="o">:</span><span class="mo">04</span><span class="o">:</span><span class="mi">57</span> <span class="n">PM</span>       <span class="n">DEV</span>       <span class="n">tps</span>  <span class="n">rd_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">wr_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">avgrq</span><span class="o">-</span><span class="n">sz</span>  <span class="n">avgqu</span><span class="o">-</span><span class="n">sz</span>     <span class="n">await</span>     <span class="n">svctm</span>     <span class="o">%</span><span class="n">util</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mo">07</span> <span class="n">PM</span>    <span class="n">dev8</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mo">07</span> <span class="n">PM</span>  <span class="n">dev253</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mo">07</span> <span class="n">PM</span>  <span class="n">dev253</span><span class="o">-</span><span class="mi">1</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>

<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mo">07</span> <span class="n">PM</span>       <span class="n">DEV</span>       <span class="n">tps</span>  <span class="n">rd_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">wr_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">avgrq</span><span class="o">-</span><span class="n">sz</span>  <span class="n">avgqu</span><span class="o">-</span><span class="n">sz</span>     <span class="n">await</span>     <span class="n">svctm</span>     <span class="o">%</span><span class="n">util</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mi">17</span> <span class="n">PM</span>    <span class="n">dev8</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mi">17</span> <span class="n">PM</span>  <span class="n">dev253</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">05</span><span class="o">:</span><span class="mi">17</span> <span class="n">PM</span>  <span class="n">dev253</span><span class="o">-</span><span class="mi">1</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>

<span class="nl">Average:</span>          <span class="n">DEV</span>       <span class="n">tps</span>  <span class="n">rd_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">wr_sec</span><span class="o">/</span><span class="n">s</span>  <span class="n">avgrq</span><span class="o">-</span><span class="n">sz</span>  <span class="n">avgqu</span><span class="o">-</span><span class="n">sz</span>     <span class="n">await</span>     <span class="n">svctm</span>     <span class="o">%</span><span class="n">util</span>
<span class="nl">Average:</span>       <span class="n">dev8</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="nl">Average:</span>     <span class="n">dev253</span><span class="o">-</span><span class="mi">0</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
<span class="nl">Average:</span>     <span class="n">dev253</span><span class="o">-</span><span class="mi">1</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>
</pre></div>


<blockquote>
<p>tps:每秒从物理磁盘I/O的次数.多个逻辑请求会被合并为一个I/O磁盘请<br />
求,一次传输的大小是不确定的.<br />
rd_sec/s:每秒读扇区的次数.<br />
wr_sec/s:每秒写扇区的次数.<br />
avgrq-sz:平均每次设备I/O操作的数据大小(扇区).<br />
avgqu-sz:磁盘请求队列的平均长度.<br />
await:从请求磁盘操作到系统完成处理,每次请求的平均消耗时间,包括请<br />
求队列等待时间,单位是毫秒(1秒=1000毫秒).<br />
svctm:系统处理每次请求的平均时间,不包括在请求队列中消耗的时间.<br />
%util:I/O请求占CPU的百分比,比率越大,说明越饱和.<br />
avgqu-sz 的值较低时，设备的利用率较高。<br />
当%util的值接近 1% 时，表示设备带宽已经占满。</p>
</blockquote>
<h3 id="-h">-H 配置使用状态</h3>
<p>Hugepages utilization statistics</p>
<h3 id="-i">-I 中断信息</h3>
<p>Interrupts statistics</p>
<div class="hlcode"><pre><span class="na">-I</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nx">int</span><span class="o">&gt;</span> <span class="o">|</span> <span class="k">SUM</span> <span class="o">|</span> <span class="kc">ALL</span> <span class="o">|</span> <span class="nx">XALL</span> <span class="p">}</span>
</pre></div>


<h3 id="-n">-n 网络统计</h3>
<div class="hlcode"><pre><span class="na">-n</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nb">keyword</span><span class="o">&gt;</span> <span class="err">[</span><span class="p">,</span><span class="nx">...</span><span class="cp">]</span> | ALL }
</pre></div>


<div class="hlcode"><pre><span class="n">Network</span> <span class="n">statistics</span>
<span class="n">Keywords</span> <span class="n">are</span><span class="o">:</span>

    <span class="n">DEV</span> <span class="n">Network</span> <span class="n">interfaces</span>  <span class="err">显示网络接口信息</span>
    <span class="n">EDEV</span>    <span class="n">Network</span> <span class="n">interfaces</span> <span class="p">(</span><span class="n">errors</span><span class="p">)</span>     <span class="err">显示关于网络错误的统计数据</span>
    <span class="n">NFS</span> <span class="n">NFS</span> <span class="n">client</span>  <span class="err">统计活动的</span><span class="n">NFS</span><span class="err">客户端的信息</span>
    <span class="n">NFSD</span>    <span class="n">NFS</span> <span class="n">server</span>  <span class="err">统计</span><span class="n">NFS</span><span class="err">服务器信息</span>
    <span class="n">SOCK</span>    <span class="n">Sockets</span> <span class="p">(</span><span class="n">v4</span><span class="p">)</span>    <span class="err">显示套接字信息</span>
    <span class="n">ALL</span> <span class="n">Display</span> <span class="n">all</span> <span class="n">above</span> <span class="mi">5</span> <span class="n">infos</span>
    <span class="n">IP</span>  <span class="n">IP</span> <span class="n">traffic</span>  <span class="p">(</span><span class="n">v4</span><span class="p">)</span>
    <span class="n">EIP</span> <span class="n">IP</span> <span class="n">traffic</span>  <span class="p">(</span><span class="n">v4</span><span class="p">)</span> <span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="n">ICMP</span>    <span class="n">ICMP</span> <span class="n">traffic</span>    <span class="p">(</span><span class="n">v4</span><span class="p">)</span>
    <span class="n">EICMP</span>   <span class="n">ICMP</span> <span class="n">traffic</span>    <span class="p">(</span><span class="n">v4</span><span class="p">)</span> <span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="n">TCP</span> <span class="n">TCP</span> <span class="n">traffic</span> <span class="p">(</span><span class="n">v4</span><span class="p">)</span>
    <span class="n">ETCP</span>    <span class="n">TCP</span> <span class="n">traffic</span> <span class="p">(</span><span class="n">v4</span><span class="p">)</span> <span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="n">UDP</span> <span class="n">UDP</span> <span class="n">traffic</span> <span class="p">(</span><span class="n">v4</span><span class="p">)</span>
    <span class="n">SOCK6</span>   <span class="n">Sockets</span> <span class="p">(</span><span class="n">v6</span><span class="p">)</span>
    <span class="n">IP6</span> <span class="n">IP</span> <span class="n">traffic</span>  <span class="p">(</span><span class="n">v6</span><span class="p">)</span>
    <span class="n">EIP6</span>    <span class="n">IP</span> <span class="n">traffic</span>  <span class="p">(</span><span class="n">v6</span><span class="p">)</span> <span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="n">ICMP6</span>   <span class="n">ICMP</span> <span class="n">traffic</span>    <span class="p">(</span><span class="n">v6</span><span class="p">)</span>
    <span class="n">EICMP6</span>  <span class="n">ICMP</span> <span class="n">traffic</span>    <span class="p">(</span><span class="n">v6</span><span class="p">)</span> <span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="n">UDP6</span>    <span class="n">UDP</span> <span class="n">traffic</span> <span class="p">(</span><span class="n">v6</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre><span class="n">sar</span> <span class="o">-</span><span class="n">n</span> <span class="n">DEV</span> <span class="o">|</span> <span class="n">more</span>
</pre></div>


<p>显示 24 日的网络统计</p>
<div class="hlcode"><pre><span class="c"># sar -n DEV -f /var/log/sa/sa24 | more</span>
</pre></div>


<p>显示实时使用情况</p>
<div class="hlcode"><pre><span class="c"># sar 4 5</span>
</pre></div>


<h4 id="iface">IFACE 参数</h4>
<div class="hlcode"><pre><span class="n">rxpck</span><span class="o">/</span><span class="n">s</span>      <span class="err">每秒钟接收的数据包</span> 
<span class="n">txpck</span><span class="o">/</span><span class="n">s</span>    <span class="err">每秒钟发送的数据包</span>
<span class="n">rxkB</span><span class="o">/</span><span class="n">s</span>     <span class="err">每秒钟接收的字节数</span>
<span class="n">txkB</span><span class="o">/</span><span class="n">s</span>       <span class="err">每秒钟发送的字节数</span>
<span class="n">rxcmp</span><span class="o">/</span><span class="n">s</span>    <span class="err">每秒钟接收的压缩数据包</span>
<span class="n">txcmp</span><span class="o">/</span><span class="n">s</span>    <span class="err">每秒钟发送的压缩数据包</span>
<span class="n">rxmcst</span><span class="o">/</span><span class="n">s</span>     <span class="err">每秒钟接收的多播数据包</span>
</pre></div>


<h3 id="-m">-m 硬件信息</h3>
<div class="hlcode"><pre><span class="na">-m</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nb">keyword</span><span class="o">&gt;</span> <span class="err">[</span><span class="p">,</span><span class="nx">...</span><span class="cp">]</span> | ALL }
</pre></div>


<div class="hlcode"><pre><span class="n">Power</span> <span class="n">management</span> <span class="n">statistics</span>
<span class="n">Keywords</span> <span class="n">are</span><span class="o">:</span>

    <span class="n">CPU</span> <span class="n">CPU</span> <span class="n">instantaneous</span> <span class="n">clock</span> <span class="n">frequency</span>
    <span class="n">FAN</span> <span class="n">Fans</span> <span class="n">speed</span>
    <span class="n">FREQ</span>    <span class="n">CPU</span> <span class="n">average</span> <span class="n">clock</span> <span class="n">frequency</span>
    <span class="n">IN</span>  <span class="n">Voltage</span> <span class="n">inputs</span>
    <span class="n">TEMP</span>    <span class="n">Devices</span> <span class="n">temperature</span>
    <span class="n">USB</span> <span class="n">USB</span> <span class="n">devices</span> <span class="n">plugged</span> <span class="n">into</span> <span class="n">the</span> <span class="n">system</span>
</pre></div>


<h3 id="-q">-q 队列</h3>
<p>Queue length and load average statistics</p>
<h3 id="-r">-r 内存使用率</h3>
<p>Memory utilization statistics</p>
<p>监控内存分页</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">local</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span>  <span class="n">sar</span> <span class="o">-</span><span class="n">r</span> <span class="mi">10</span> <span class="mi">3</span>
<span class="n">Linux</span> <span class="mf">5.0.10</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="p">.</span><span class="n">elrepo</span><span class="p">.</span><span class="n">x86_64</span> <span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">novalocal</span><span class="p">)</span>  <span class="mo">05</span><span class="o">/</span><span class="mo">03</span><span class="o">/</span><span class="mi">2019</span>  <span class="n">_x86_64_</span>    <span class="p">(</span><span class="mi">2</span> <span class="n">CPU</span><span class="p">)</span>

<span class="mi">08</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mo">03</span> <span class="n">PM</span> <span class="n">kbmemfree</span> <span class="n">kbmemused</span>  <span class="o">%</span><span class="n">memused</span> <span class="n">kbbuffers</span>  <span class="n">kbcached</span>  <span class="n">kbcommit</span>   <span class="o">%</span><span class="n">commit</span>  <span class="n">kbactive</span>   <span class="n">kbinact</span>   <span class="n">kbdirty</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mi">13</span> <span class="n">PM</span>   <span class="mi">1424472</span>    <span class="mi">616412</span>     <span class="mf">30.20</span>     <span class="mi">58692</span>    <span class="mi">401196</span>    <span class="mi">301860</span>     <span class="mf">11.82</span>    <span class="mi">335508</span>    <span class="mi">182568</span>         <span class="mi">4</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mi">23</span> <span class="n">PM</span>   <span class="mi">1423808</span>    <span class="mi">617076</span>     <span class="mf">30.24</span>     <span class="mi">58692</span>    <span class="mi">401204</span>    <span class="mi">301860</span>     <span class="mf">11.82</span>    <span class="mi">335820</span>    <span class="mi">182568</span>        <span class="mi">20</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mi">33</span> <span class="n">PM</span>   <span class="mi">1423984</span>    <span class="mi">616900</span>     <span class="mf">30.23</span>     <span class="mi">58704</span>    <span class="mi">401208</span>    <span class="mi">301860</span>     <span class="mf">11.82</span>    <span class="mi">335828</span>    <span class="mi">182568</span>        <span class="mi">24</span>
<span class="nl">Average:</span>      <span class="mi">1424088</span>    <span class="mi">616796</span>     <span class="mf">30.22</span>     <span class="mi">58696</span>    <span class="mi">401203</span>    <span class="mi">301860</span>     <span class="mf">11.82</span>    <span class="mi">335719</span>    <span class="mi">182568</span>        <span class="mi">16</span>
</pre></div>


<blockquote>
<p>kbmemfree：这个值和free命令中的free值基本一致,所以它不包括buffer和cache的空间.<br />
kbmemused：这个值和free命令中的used值基本一致,所以它包括buffer和cache的空间.<br />
%memused：这个值是kbmemused和内存总量(不包括swap)的一个百分比.<br />
kbbuffers和kbcached：这两个值就是free命令中的buffer和cache.<br />
kbcommit：保证当前系统所需要的内存,即为了确保不溢出而需要的内存(RAM+swap).<br />
%commit：这个值是kbcommit与内存总量(包括swap)的一个百分比   </p>
</blockquote>
<h3 id="-r_1">-R 内存状态</h3>
<p>Memory statistics</p>
<h3 id="-s-swap">-S swap空间</h3>
<p>Swap space utilization statistics</p>
<h3 id="-u-all-cpu">-u [ ALL ] CPU使用率</h3>
<p>CPU utilization statistics</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">localhost</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">sar</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">o</span> <span class="n">test</span> <span class="mi">10</span> <span class="mi">3</span>
<span class="n">Linux</span> <span class="mf">5.0.10</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="p">.</span><span class="n">elrepo</span><span class="p">.</span><span class="n">x86_64</span> <span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">novalocal</span><span class="p">)</span>  <span class="mo">05</span><span class="o">/</span><span class="mo">03</span><span class="o">/</span><span class="mi">2019</span>  <span class="n">_x86_64_</span>    <span class="p">(</span><span class="mi">2</span> <span class="n">CPU</span><span class="p">)</span>

<span class="mo">07</span><span class="o">:</span><span class="mi">54</span><span class="o">:</span><span class="mi">39</span> <span class="n">PM</span>     <span class="n">CPU</span>     <span class="o">%</span><span class="n">user</span>     <span class="o">%</span><span class="n">nice</span>   <span class="o">%</span><span class="n">system</span>   <span class="o">%</span><span class="n">iowait</span>    <span class="o">%</span><span class="n">steal</span>     <span class="o">%</span><span class="n">idle</span>
<span class="mo">07</span><span class="o">:</span><span class="mi">54</span><span class="o">:</span><span class="mi">49</span> <span class="n">PM</span>     <span class="n">all</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.05</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>     <span class="mf">99.95</span>
<span class="mo">07</span><span class="o">:</span><span class="mi">54</span><span class="o">:</span><span class="mi">59</span> <span class="n">PM</span>     <span class="n">all</span>      <span class="mf">0.05</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>     <span class="mf">99.95</span>
<span class="mo">07</span><span class="o">:</span><span class="mi">55</span><span class="o">:</span><span class="mi">09</span> <span class="n">PM</span>     <span class="n">all</span>      <span class="mf">0.00</span>      <span class="mf">0.00</span>      <span class="mf">0.05</span>      <span class="mf">0.05</span>      <span class="mf">0.05</span>     <span class="mf">99.85</span>
<span class="nl">Average:</span>        <span class="n">all</span>      <span class="mf">0.02</span>      <span class="mf">0.00</span>      <span class="mf">0.03</span>      <span class="mf">0.02</span>      <span class="mf">0.02</span>     <span class="mf">99.92</span>
</pre></div>


<blockquote>
<p>iowait    显示用于等待I/O操作占用CPU总时间的百分比， 若过高表示磁盘存在I/O瓶颈</p>
<p>steal      管理程序hypervisor为另一个虚拟进程提供服务而等待虚拟CPU的百分比</p>
<p>idle     显示CPU空闲时间占用CPU总时间的百分比， 若过高但系统响应慢，可能是CPU等待分配内存，需要加大内存容量， 若持续低于1，则系统的CPU处理能力相对较低，表明系统中最需要解决CPU资源问题</p>
</blockquote>
<p>查看生成的二进制文件</p>
<div class="hlcode"><pre><span class="n">sar</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">f</span> <span class="n">test</span>
</pre></div>


<h3 id="-v">-v 内核信息</h3>
<p>Kernel table statistics</p>
<p>观察核心表的状态</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">local</span> <span class="o">~</span><span class="p">]</span><span class="err">#</span> <span class="n">sar</span> <span class="o">-</span><span class="n">v</span> <span class="mi">10</span> <span class="mi">3</span>
<span class="n">Linux</span> <span class="mf">5.0.10</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="p">.</span><span class="n">elrepo</span><span class="p">.</span><span class="n">x86_64</span> <span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">novalocal</span><span class="p">)</span>  <span class="mo">05</span><span class="o">/</span><span class="mo">03</span><span class="o">/</span><span class="mi">2019</span>  <span class="n">_x86_64_</span>    <span class="p">(</span><span class="mi">2</span> <span class="n">CPU</span><span class="p">)</span>

<span class="mi">08</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mi">52</span> <span class="n">PM</span> <span class="n">dentunusd</span>   <span class="n">file</span><span class="o">-</span><span class="n">nr</span>  <span class="n">inode</span><span class="o">-</span><span class="n">nr</span>    <span class="n">pty</span><span class="o">-</span><span class="n">nr</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">01</span><span class="o">:</span><span class="mo">02</span> <span class="n">PM</span>    <span class="mi">129226</span>      <span class="mi">1440</span>     <span class="mi">26630</span>         <span class="mi">1</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">01</span><span class="o">:</span><span class="mi">12</span> <span class="n">PM</span>    <span class="mi">129226</span>      <span class="mi">1408</span>     <span class="mi">26597</span>         <span class="mi">1</span>
<span class="mi">08</span><span class="o">:</span><span class="mo">01</span><span class="o">:</span><span class="mi">22</span> <span class="n">PM</span>    <span class="mi">129226</span>      <span class="mi">1440</span>     <span class="mi">26630</span>         <span class="mi">1</span>
<span class="nl">Average:</span>       <span class="mi">129226</span>      <span class="mi">1429</span>     <span class="mi">26619</span>         <span class="mi">1</span>
</pre></div>


<blockquote>
<p>dentunusd：目录高速缓存中未被使用的条目数量<br />
file-nr：文件句柄（ file handle）的使用数量<br />
inode-nr：索引节点句柄（ inode handle）的使用数量<br />
pty-nr：使用的pty数量</p>
</blockquote>
<p>​   </p>
<h3 id="-w">-w 任务信息</h3>
<p>Task creation and system switching statistics</p>
<h3 id="-w-swapping">-W swapping 状态</h3>
<p>Swapping statistics</p>
<h3 id="-y-tty">-y tty设备</h3>
<p>TTY device statistics</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-09-22 23:06:24</p>
      </span>
    </div>

    
    
  </body>
</html>