<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>pod - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Kubernetes">Kubernetes</a>&nbsp;&#187;&nbsp;pod
    <span class="updated">Page Updated&nbsp;
      2019-02-27 21:42
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">pod</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#pod">Pod</a><ul>
<li><a href="#_1">状态信息</a><ul>
<li><a href="#pending">Pending</a></li>
<li><a href="#running">Running</a></li>
<li><a href="#succeeded">Succeeded</a></li>
<li><a href="#failed">Failed</a></li>
<li><a href="#crashloopbackoff">CrashLoopBackOff</a></li>
</ul>
</li>
<li><a href="#pod-controller">Pod 控制器 Controller</a><ul>
<li><a href="#replication-controller">Replication Controller (淘汰)</a></li>
<li><a href="#replicaset">ReplicaSet</a></li>
<li><a href="#deployment">Deployment （常用）</a></li>
<li><a href="#services">Services</a><ul>
<li><a href="#services_1">Services 类型</a></li>
</ul>
</li>
<li><a href="#job">Job</a></li>
<li><a href="#daemonset">DaemonSet</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="pod">Pod</h1>
<h2 id="_1">状态信息</h2>
<h3 id="pending">Pending</h3>
<h3 id="running">Running</h3>
<h3 id="succeeded">Succeeded</h3>
<h3 id="failed">Failed</h3>
<h3 id="crashloopbackoff">CrashLoopBackOff</h3>
<p>Kubernetes. 尝试一次又一次的重启Pod</p>
<h2 id="pod-controller">Pod 控制器 Controller</h2>
<p>借助Controller 对Pod进行管理，实现一次性的Pod对象管理</p>
<p>包括以下多种调度器</p>
<h3 id="replication-controller">Replication Controller (淘汰)</h3>
<p>定义了一个期望的场景，声明某种pod的副本数量在任意时刻都符合某个预期值</p>
<p>e.g. <code>apiVersion: extensions/v1beat1 kind: Replication metadata: name: frontend</code></p>
<h3 id="replicaset">ReplicaSet</h3>
<p>确保给一个pod所指定数量的replicas 会一直运行</p>
<h3 id="deployment">Deployment （常用）</h3>
<p>Deployment 为Pod和ReplicaSet提供一个声明方法，用来替代Replication Controller 来方便管理</p>
<p>可以声明一个yaml文件，确保deployment的状态信息</p>
<h3 id="services">Services</h3>
<p>允许多个deployments之间通信，从而确保pods之间通信</p>
<p>实例</p>
<div class="hlcode"><pre><span class="n">kind</span><span class="o">:</span> <span class="n">Service</span>
<span class="n">opiVersion</span><span class="o">:</span> <span class="n">v1</span>
<span class="n">metadata</span><span class="o">:</span>
  <span class="n">name</span><span class="o">:</span> <span class="n">my</span><span class="o">-</span><span class="n">service</span>
<span class="n">spec</span><span class="o">:</span>
  <span class="n">selector</span><span class="o">:</span>
    <span class="n">app</span><span class="o">:</span> <span class="n">MyApp</span>
  <span class="n">ports</span><span class="o">:</span>
    <span class="o">-</span> <span class="n">protocol</span><span class="o">:</span> <span class="n">TCP</span>
      <span class="n">port</span><span class="o">:</span> <span class="mi">80</span>
      <span class="n">targetPort</span><span class="o">:</span> <span class="mi">9376</span>
</pre></div>


<h4 id="services_1">Services 类型</h4>
<div class="hlcode"><pre><span class="n">Internal</span><span class="o">:</span><span class="err">仅用于集群内部通信的</span><span class="n">ClusterIP</span><span class="err">类型，即</span><span class="kd">internal</span> <span class="n">IP</span>

<span class="n">External</span><span class="o">:</span> <span class="err">接入集群外部请求的</span><span class="n">NodePort</span><span class="err">类型，</span> <span class="err">工作于每个节点的主机</span><span class="n">IP</span><span class="err">之上，</span>

<span class="n">LoadBalance</span><span class="o">:</span> <span class="err">可以把外部请求负载均衡至多个</span><span class="n">Node</span><span class="err">主机</span><span class="n">IP</span><span class="err">的</span><span class="n">NodePort</span><span class="err">之上</span>
</pre></div>


<h3 id="job">Job</h3>
<p>Pods管理程序，包含一系列job</p>
<p>类似于cronjob</p>
<h3 id="daemonset">DaemonSet</h3>
<p>确保所有nodes 运行同一个指定类型的pod</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-03-01 00:35:55</p>
      </span>
    </div>

    
    
  </body>
</html>