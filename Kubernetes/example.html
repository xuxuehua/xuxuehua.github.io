<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>example - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Kubernetes">Kubernetes</a>&nbsp;&#187;&nbsp;example
    <span class="updated">Page Updated&nbsp;
      2019-03-03 21:17
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">example</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#example">example</a><ul>
<li><a href="#hello-world">hello world</a><ul>
<li><a href="#expose-it-as-service">expose it as service</a></li>
<li><a href="#check-the-service">check the service</a></li>
<li><a href="#scale-deploy">Scale deploy</a></li>
<li><a href="#label-operation">label operation</a><ul>
<li><a href="#add-remove">add &amp; remove</a></li>
<li><a href="#searching">searching</a><ul>
<li><a href="#single-label">single label</a></li>
<li><a href="#multipe-labels">multipe labels</a></li>
</ul>
</li>
<li><a href="#delete">delete</a></li>
</ul>
</li>
<li><a href="#health-checks">health checks</a><ul>
<li><a href="#normal">normal</a></li>
<li><a href="#unnormal">unnormal</a></li>
</ul>
</li>
<li><a href="#upgrade">upgrade</a></li>
</ul>
</li>
<li><a href="#guestbook">guestbook</a><ul>
<li><a href="#initiaze-complicated-task">initiaze complicated task</a></li>
<li><a href="#enable-minikube-dashboard">enable minikube dashboard</a></li>
</ul>
</li>
<li><a href="#configmap">configmap</a></li>
<li><a href="#secrets">secrets</a><ul>
<li><a href="#_1">生成</a></li>
<li><a href="#_2">使用</a></li>
</ul>
</li>
<li><a href="#running-job">running job</a><ul>
<li><a href="#simple-job">simple job</a></li>
<li><a href="#cronjob">cronjob</a></li>
</ul>
</li>
<li><a href="#applications">applications</a><ul>
<li><a href="#stateful">stateful</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="example">example</h1>
<h2 id="hello-world">hello world</h2>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">minikube</span> <span class="n">start</span>
<span class="err">😄</span>  <span class="n">minikube</span> <span class="n">v0</span><span class="mf">.34.1</span> <span class="n">on</span> <span class="n">darwin</span> <span class="p">(</span><span class="n">amd64</span><span class="p">)</span>
<span class="err">🔥</span>  <span class="n">Creating</span> <span class="n">virtualbox</span> <span class="n">VM</span> <span class="p">(</span><span class="n">CPUs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Memory</span><span class="o">=</span><span class="mi">2048</span><span class="n">MB</span><span class="p">,</span> <span class="n">Disk</span><span class="o">=</span><span class="mi">20000</span><span class="n">MB</span><span class="p">)</span> <span class="p">...</span>
<span class="err">📶</span>  <span class="s">&quot;minikube&quot;</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">is</span> <span class="mf">192.168.99.104</span>
<span class="err">🐳</span>  <span class="n">Configuring</span> <span class="n">Docker</span> <span class="n">as</span> <span class="n">the</span> <span class="n">container</span> <span class="n">runtime</span> <span class="p">...</span>
<span class="err">✨</span>  <span class="n">Preparing</span> <span class="n">Kubernetes</span> <span class="n">environment</span> <span class="p">...</span>
<span class="err">🚜</span>  <span class="n">Pulling</span> <span class="n">images</span> <span class="n">required</span> <span class="n">by</span> <span class="n">Kubernetes</span> <span class="n">v1</span><span class="mf">.13.3</span> <span class="p">...</span>
<span class="err">🚀</span>  <span class="n">Launching</span> <span class="n">Kubernetes</span> <span class="n">v1</span><span class="mf">.13.3</span> <span class="n">using</span> <span class="n">kubeadm</span> <span class="p">...</span>
<span class="err">🔑</span>  <span class="n">Configuring</span> <span class="n">cluster</span> <span class="n">permissions</span> <span class="p">...</span>
<span class="err">🤔</span>  <span class="n">Verifying</span> <span class="n">component</span> <span class="n">health</span> <span class="p">.....</span>
<span class="err">💗</span>  <span class="n">kubectl</span> <span class="n">is</span> <span class="n">now</span> <span class="n">configured</span> <span class="n">to</span> <span class="n">use</span> <span class="s">&quot;minikube&quot;</span>
<span class="err">🏄</span>  <span class="n">Done</span><span class="o">!</span> <span class="n">Thank</span> <span class="n">you</span> <span class="k">for</span> <span class="n">using</span> <span class="n">minikube</span><span class="o">!</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">nodes</span>
<span class="n">NAME</span>       <span class="n">STATUS</span>    <span class="n">ROLES</span>     <span class="n">AGE</span>       <span class="n">VERSION</span>
<span class="n">minikube</span>   <span class="n">Ready</span>     <span class="n">master</span>    <span class="mi">50</span><span class="n">m</span>       <span class="n">v1</span><span class="mf">.13.3</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">run</span> <span class="n">hw</span> <span class="o">--</span><span class="n">image</span><span class="o">=</span><span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span> <span class="o">--</span><span class="n">port</span><span class="o">=</span><span class="mi">80</span>
<span class="n">deployment</span><span class="p">.</span><span class="n">apps</span> <span class="s">&quot;hw&quot;</span> <span class="n">created</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deployments</span>
<span class="n">NAME</span>      <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">hw</span>        <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">0</span>           <span class="mi">10</span><span class="n">s</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">rs</span>
<span class="n">NAME</span>            <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">READY</span>     <span class="n">AGE</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">0</span>         <span class="mi">16</span><span class="n">s</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>              <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">24</span><span class="n">s</span>
</pre></div>


<h3 id="expose-it-as-service">expose it as service</h3>
<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="err">~</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">expose</span> <span class="nx">deployment</span> <span class="nx">hw</span> <span class="o">--</span><span class="k">type</span><span class="o">=</span><span class="nx">NodePort</span>
<span class="nx">service</span> <span class="s2">&quot;hw&quot;</span> <span class="nx">exposed</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="err">~</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">services</span>
<span class="nb">NAME</span>         <span class="k">TYPE</span>        <span class="nx">CLUSTER</span><span class="na">-IP</span>      <span class="nx">EXTERNAL</span><span class="na">-IP</span>   <span class="nb">PORT</span><span class="p">(</span><span class="nb">S</span><span class="p">)</span>        <span class="nx">AGE</span>
<span class="nx">hw</span>           <span class="nx">NodePort</span>    <span class="mf">10.109.209.48</span>   <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">80</span><span class="p">:</span><span class="mi">30201</span><span class="p">/</span><span class="nx">TCP</span>   <span class="mi">9</span><span class="nb">s</span>
<span class="nx">kubernetes</span>   <span class="nx">ClusterIP</span>   <span class="mf">10.96.0.1</span>       <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">443</span><span class="p">/</span><span class="nx">TCP</span>        <span class="mi">56</span><span class="nx">m</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="err">~</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">minikube</span> <span class="nx">service</span> <span class="nx">hw</span>
<span class="err">🎉</span>  <span class="nx">Opening</span> <span class="nx">kubernetes</span> <span class="nx">service</span> <span class="nb">default</span><span class="p">/</span><span class="nx">hw</span> <span class="k">in</span> <span class="nb">default</span> <span class="nx">browser...</span>
</pre></div>


<h3 id="check-the-service">check the service</h3>
<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="err">~</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="kc">all</span>
<span class="nb">NAME</span>                      <span class="nb">READY</span>     <span class="nb">STATUS</span>    <span class="nx">RESTARTS</span>   <span class="nx">AGE</span>
<span class="nx">pod</span><span class="p">/</span><span class="nx">hw</span><span class="o">-</span><span class="mi">747</span><span class="nx">fddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="nx">jmpl</span>   <span class="mi">1</span><span class="p">/</span><span class="nx">1</span>       <span class="nb">Running</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="nb">d</span>

<span class="nb">NAME</span>                 <span class="k">TYPE</span>        <span class="nx">CLUSTER</span><span class="na">-IP</span>      <span class="nx">EXTERNAL</span><span class="na">-IP</span>   <span class="nb">PORT</span><span class="p">(</span><span class="nb">S</span><span class="p">)</span>        <span class="nx">AGE</span>
<span class="nx">service</span><span class="p">/</span><span class="nx">hw</span>           <span class="nx">NodePort</span>    <span class="mf">10.109.209.48</span>   <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">80</span><span class="p">:</span><span class="mi">30201</span><span class="p">/</span><span class="nx">TCP</span>   <span class="mi">1</span><span class="nb">d</span>
<span class="nx">service</span><span class="p">/</span><span class="nx">kubernetes</span>   <span class="nx">ClusterIP</span>   <span class="mf">10.96.0.1</span>       <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">443</span><span class="p">/</span><span class="nx">TCP</span>        <span class="mi">2</span><span class="nb">d</span>

<span class="nb">NAME</span>                 <span class="nx">DESIRED</span>   <span class="nx">CURRENT</span>   <span class="nb">UP</span><span class="na">-TO-DATE</span>   <span class="nx">AVAILABLE</span>   <span class="nx">AGE</span>
<span class="nx">deployment.apps</span><span class="p">/</span><span class="nx">hw</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">1</span><span class="nb">d</span>

<span class="nb">NAME</span>                            <span class="nx">DESIRED</span>   <span class="nx">CURRENT</span>   <span class="nb">READY</span>     <span class="nx">AGE</span>
<span class="nx">replicaset.apps</span><span class="p">/</span><span class="nx">hw</span><span class="o">-</span><span class="mi">747</span><span class="nx">fddfdb8</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span><span class="nb">d</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="err">~</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">deploy</span><span class="p">/</span><span class="nx">hw</span> <span class="na">-o</span> <span class="nx">yaml</span>
<span class="nx">apiVersion</span><span class="p">:</span> <span class="nb">extensions</span><span class="p">/</span><span class="nx">v1beta1</span>
<span class="nx">kind</span><span class="p">:</span> <span class="nx">Deployment</span>
<span class="nx">metadata</span><span class="p">:</span>
  <span class="nx">annotations</span><span class="p">:</span>
    <span class="nx">deployment.kubernetes.io</span><span class="p">/</span><span class="nx">revision</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
  <span class="nx">creationTimestamp</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">01</span><span class="nx">T06</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">15</span><span class="nb">Z</span>
  <span class="nx">generation</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">labels</span><span class="p">:</span>
    <span class="nb">run</span><span class="p">:</span> <span class="nx">hw</span>
  <span class="nb">name</span><span class="p">:</span> <span class="nx">hw</span>
  <span class="nx">namespace</span><span class="p">:</span> <span class="nb">default</span>
  <span class="nx">resourceVersion</span><span class="p">:</span> <span class="s2">&quot;4354&quot;</span>
  <span class="nx">selfLink</span><span class="p">:</span> <span class="p">/</span><span class="nx">apis</span><span class="p">/</span><span class="nb">extensions</span><span class="p">/</span><span class="nx">v1beta1</span><span class="p">/</span><span class="nb">namespaces</span><span class="p">/</span><span class="nb">default</span><span class="p">/</span><span class="nx">deployments</span><span class="p">/</span><span class="nx">hw</span>
  <span class="nx">uid</span><span class="p">:</span> <span class="mi">610</span><span class="nx">a81f5</span><span class="o">-</span><span class="mi">3</span><span class="nx">be9</span><span class="o">-</span><span class="mi">11</span><span class="nx">e9</span><span class="na">-b4d5</span><span class="o">-</span><span class="mi">0800273</span><span class="nx">e7607</span>
<span class="nx">spec</span><span class="p">:</span>
  <span class="nx">progressDeadlineSeconds</span><span class="p">:</span> <span class="mi">2147483647</span>
  <span class="nx">replicas</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">revisionHistoryLimit</span><span class="p">:</span> <span class="mi">2147483647</span>
  <span class="nx">selector</span><span class="p">:</span>
    <span class="nx">matchLabels</span><span class="p">:</span>
      <span class="nb">run</span><span class="p">:</span> <span class="nx">hw</span>
  <span class="nx">strategy</span><span class="p">:</span>
    <span class="nx">rollingUpdate</span><span class="p">:</span>
      <span class="nx">maxSurge</span><span class="p">:</span> <span class="mi">1</span>
      <span class="nx">maxUnavailable</span><span class="p">:</span> <span class="mi">1</span>
    <span class="k">type</span><span class="p">:</span> <span class="nx">RollingUpdate</span>
  <span class="nx">template</span><span class="p">:</span>
    <span class="nx">metadata</span><span class="p">:</span>
      <span class="nx">creationTimestamp</span><span class="p">:</span> <span class="kt">null</span>
      <span class="nx">labels</span><span class="p">:</span>
        <span class="nb">run</span><span class="p">:</span> <span class="nx">hw</span>
    <span class="nx">spec</span><span class="p">:</span>
      <span class="nx">containers</span><span class="p">:</span>
      <span class="o">-</span> <span class="nb">image</span><span class="p">:</span> <span class="nx">karthequian</span><span class="p">/</span><span class="nx">helloworld</span>
        <span class="nx">imagePullPolicy</span><span class="p">:</span> <span class="nx">Always</span>
        <span class="nb">name</span><span class="p">:</span> <span class="nx">hw</span>
        <span class="nx">ports</span><span class="p">:</span>
        <span class="o">-</span> <span class="nx">containerPort</span><span class="p">:</span> <span class="mi">80</span>
          <span class="nx">protocol</span><span class="p">:</span> <span class="nx">TCP</span>
        <span class="nb">resources</span><span class="p">:</span> <span class="p">{}</span>
        <span class="nx">terminationMessagePath</span><span class="p">:</span> <span class="p">/</span><span class="nx">dev</span><span class="p">/</span><span class="nx">termination</span><span class="na">-log</span>
        <span class="nx">terminationMessagePolicy</span><span class="p">:</span> <span class="nb">File</span>
      <span class="nx">dnsPolicy</span><span class="p">:</span> <span class="nx">ClusterFirst</span>
      <span class="nx">restartPolicy</span><span class="p">:</span> <span class="nx">Always</span>
      <span class="nx">schedulerName</span><span class="p">:</span> <span class="nb">default</span><span class="na">-scheduler</span>
      <span class="nx">securityContext</span><span class="p">:</span> <span class="p">{}</span>
      <span class="nx">terminationGracePeriodSeconds</span><span class="p">:</span> <span class="mi">30</span>
<span class="nb">status</span><span class="p">:</span>
  <span class="nx">availableReplicas</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">conditions</span><span class="p">:</span>
  <span class="o">-</span> <span class="nx">lastTransitionTime</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">01</span><span class="nx">T06</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">15</span><span class="nb">Z</span>
    <span class="nx">lastUpdateTime</span><span class="p">:</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">01</span><span class="nx">T06</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">15</span><span class="nb">Z</span>
    <span class="nx">message</span><span class="p">:</span> <span class="nx">Deployment</span> <span class="nx">has</span> <span class="nx">minimum</span> <span class="nx">availability.</span>
    <span class="nx">reason</span><span class="p">:</span> <span class="nx">MinimumReplicasAvailable</span>
    <span class="nb">status</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span>
    <span class="k">type</span><span class="p">:</span> <span class="nx">Available</span>
  <span class="nx">observedGeneration</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">readyReplicas</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">replicas</span><span class="p">:</span> <span class="mi">1</span>
  <span class="nx">updatedReplicas</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>


<h3 id="scale-deploy">Scale deploy</h3>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deployments</span>
<span class="n">NAME</span>      <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">hw</span>        <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">2</span><span class="n">d</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">scale</span> <span class="o">--</span><span class="n">replicas</span><span class="o">=</span><span class="mi">3</span> <span class="n">deploy</span><span class="o">/</span><span class="n">hw</span>
<span class="n">deployment</span><span class="p">.</span><span class="n">extensions</span> <span class="s">&quot;hw&quot;</span> <span class="n">scaled</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deploy</span><span class="o">/</span><span class="n">hw</span>
<span class="n">NAME</span>      <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">hw</span>        <span class="mi">3</span>         <span class="mi">3</span>         <span class="mi">3</span>            <span class="mi">3</span>           <span class="mi">2</span><span class="n">d</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:~</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">49</span><span class="n">s</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">49</span><span class="n">s</span>
</pre></div>


<h3 id="label-operation">label operation</h3>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">lables</span><span class="p">.</span><span class="n">yml</span>

<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">helloworld</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">author:</span> <span class="n">karthequian</span>
    <span class="nl">application_type:</span> <span class="n">ui</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">latest</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">lables</span><span class="p">.</span><span class="n">yml</span>
<span class="n">pod</span> <span class="s">&quot;helloworld&quot;</span> <span class="n">created</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">21</span><span class="n">s</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">19</span><span class="n">m</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">19</span><span class="n">m</span>
</pre></div>


<h4 id="add-remove">add &amp; remove</h4>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">20</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">20</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">label</span> <span class="n">po</span><span class="o">/</span><span class="n">helloworld</span> <span class="n">app</span><span class="o">=</span><span class="n">helloworldapp</span> <span class="o">--</span><span class="n">overwrite</span>
<span class="n">pod</span> <span class="s">&quot;helloworld&quot;</span> <span class="n">labeled</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">app</span><span class="o">=</span><span class="n">helloworldapp</span><span class="p">,</span><span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">20</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">20</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">label</span> <span class="n">pod</span><span class="o">/</span><span class="n">helloworld</span> <span class="n">app</span><span class="o">-</span>
<span class="n">pod</span> <span class="s">&quot;helloworld&quot;</span> <span class="n">labeled</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">21</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">21</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
</pre></div>


<h4 id="searching">searching</h4>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">sample</span><span class="o">-</span><span class="n">infrastructure</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">labels</span><span class="p">.</span><span class="n">yml</span>

<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">homepage</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">karthik</span>
    <span class="nl">team:</span> <span class="n">web</span>
    <span class="nl">application_type:</span> <span class="n">ui</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;12.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">homepage</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">web</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">karthik</span>
    <span class="nl">application_type:</span> <span class="n">ui</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;12.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">web</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">karthik</span>
    <span class="nl">application_type:</span> <span class="n">ui</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;12.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">login</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="nl">team:</span> <span class="n">auth</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">jim</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">login</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">login</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">auth</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">jim</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">login</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">login</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">auth</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">jim</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">login</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">cart</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">carisa</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">cart</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">cart</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">carisa</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">cart</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">cart</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">carisa</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">cart</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>

<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">social</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="nl">team:</span> <span class="n">marketing</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">carisa</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;2.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">social</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">social</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">marketing</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">marketing</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">social</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">social</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">marketing</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">marketing</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">social</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">catalog</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">daniel</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;4.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">catalog</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">catalog</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">daniel</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;4.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">catalog</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">daniel</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;4.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">catalog</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">quote</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">amy</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;2.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">quote</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">quote</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">amy</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;2.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">quote</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">quote</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">ecommerce</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">amy</span>
    <span class="nl">application_type:</span> <span class="n">api</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;1.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">quote</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">ordering</span><span class="o">-</span><span class="n">dev</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">development</span>
    <span class="nl">team:</span> <span class="n">purchasing</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">chen</span>
    <span class="nl">application_type:</span> <span class="n">backend</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;2.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">ordering</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">staging</span>
    <span class="nl">team:</span> <span class="n">purchasing</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">chen</span>
    <span class="nl">application_type:</span> <span class="n">backend</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;2.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">ordering</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Pod</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>
  <span class="nl">labels:</span>
    <span class="nl">env:</span> <span class="n">production</span>
    <span class="nl">team:</span> <span class="n">purchasing</span>
    <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">:</span> <span class="n">chen</span>
    <span class="nl">application_type:</span> <span class="n">backend</span>
    <span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">:</span> <span class="s">&quot;2.0&quot;</span>
<span class="nl">spec:</span>
  <span class="nl">containers:</span>
  <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">ordering</span>
    <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">ruby</span><span class="o">:</span><span class="n">latest</span>
<span class="o">---</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">sample</span><span class="o">-</span><span class="n">infrastructure</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">labels</span><span class="p">.</span><span class="n">yml</span>
<span class="n">pod</span> <span class="s">&quot;homepage-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;homepage-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;homepage-prod&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;login-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;login-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;login-prod&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;cart-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;cart-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;cart-prod&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;social-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;social-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;social-prod&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;catalog-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;catalog-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;catalog-prod&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;quote-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;quote-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;quote-prod&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;ordering-dev&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;ordering-staging&quot;</span> <span class="n">created</span>
<span class="n">pod</span> <span class="s">&quot;ordering-prod&quot;</span> <span class="n">created</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>              <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">cart</span><span class="o">-</span><span class="n">dev</span>              <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>             <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">dev</span>           <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>          <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">8</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">27</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">27</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">login</span><span class="o">-</span><span class="n">dev</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>            <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">staging</span>         <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">quote</span><span class="o">-</span><span class="n">dev</span>             <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>            <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">staging</span>         <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">social</span><span class="o">-</span><span class="n">dev</span>            <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>           <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">staging</span>        <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
</pre></div>


<h5 id="single-label">single label</h5>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">selector</span> <span class="n">env</span><span class="o">=</span><span class="n">production</span>
<span class="n">NAME</span>            <span class="n">READY</span>     <span class="n">STATUS</span>              <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>       <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>    <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">helloworld</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">9</span><span class="n">m</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>   <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>     <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">selector</span> <span class="n">env</span><span class="o">=</span><span class="n">production</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>            <span class="n">READY</span>     <span class="n">STATUS</span>              <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>    <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">helloworld</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">9</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>             <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>     <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">selector</span> <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span>
<span class="n">NAME</span>           <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">cart</span><span class="o">-</span><span class="n">dev</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">m</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">m</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">m</span>
<span class="n">social</span><span class="o">-</span><span class="n">dev</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">m</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">-</span><span class="n">l</span> <span class="err">&#39;</span><span class="n">release</span><span class="o">-</span><span class="n">version</span> <span class="n">in</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">)</span><span class="err">&#39;</span>
<span class="n">NAME</span>               <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">cart</span><span class="o">-</span><span class="n">dev</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">helloworld</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">12</span><span class="n">m</span>
<span class="n">login</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">login</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">dev</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">quote</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">quote</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">social</span><span class="o">-</span><span class="n">dev</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>        <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">social</span><span class="o">-</span><span class="n">staging</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">-</span><span class="n">l</span> <span class="err">&#39;</span><span class="n">release</span><span class="o">-</span><span class="n">version</span> <span class="n">in</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">)</span><span class="err">&#39;</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>               <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">cart</span><span class="o">-</span><span class="n">dev</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">helloworld</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">13</span><span class="n">m</span>       <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">login</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">dev</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">quote</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">social</span><span class="o">-</span><span class="n">dev</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>        <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">staging</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">-</span><span class="n">l</span> <span class="err">&#39;</span><span class="n">release</span><span class="o">-</span><span class="n">version</span> <span class="n">notin</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">)</span><span class="err">&#39;</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">dev</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">32</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">32</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
</pre></div>


<h5 id="multipe-labels">multipe labels</h5>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">selector</span> <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span>
<span class="n">NAME</span>               <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">staging</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
</pre></div>


<p>取反</p>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">selector</span> <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">!=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span>
<span class="n">NAME</span>               <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">staging</span>    <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
<span class="n">login</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
<span class="n">quote</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
<span class="n">social</span><span class="o">-</span><span class="n">staging</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
</pre></div>


<h4 id="delete">delete</h4>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">cart</span><span class="o">-</span><span class="n">dev</span>              <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">dev</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">14</span><span class="n">m</span>       <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">33</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">33</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">login</span><span class="o">-</span><span class="n">dev</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">staging</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">quote</span><span class="o">-</span><span class="n">dev</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">staging</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">social</span><span class="o">-</span><span class="n">dev</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">staging</span>        <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">delete</span> <span class="n">pods</span> <span class="o">-</span><span class="n">l</span> <span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span>
<span class="n">pod</span> <span class="s">&quot;homepage-dev&quot;</span> <span class="n">deleted</span>
<span class="n">pod</span> <span class="s">&quot;homepage-prod&quot;</span> <span class="n">deleted</span>
<span class="n">pod</span> <span class="s">&quot;homepage-staging&quot;</span> <span class="n">deleted</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">labels</span>
<span class="n">NAME</span>                  <span class="n">READY</span>     <span class="n">STATUS</span>        <span class="n">RESTARTS</span>   <span class="n">AGE</span>       <span class="n">LABELS</span>
<span class="n">cart</span><span class="o">-</span><span class="n">dev</span>              <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">prod</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">cart</span><span class="o">-</span><span class="n">staging</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">dev</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">prod</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">catalog</span><span class="o">-</span><span class="n">staging</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">daniel</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">helloworld</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">14</span><span class="n">m</span>       <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="n">karthequian</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Terminating</span>   <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Terminating</span>   <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">homepage</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Terminating</span>   <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">ui</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">karthik</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">web</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="mi">7</span><span class="n">jmpl</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">2</span><span class="n">d</span>        <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">c5lf6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">34</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">hw</span><span class="o">-</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="o">-</span><span class="n">tmrl6</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">34</span><span class="n">m</span>       <span class="n">pod</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">hash</span><span class="o">=</span><span class="mf">747f</span><span class="n">ddfdb8</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="n">hw</span>
<span class="n">login</span><span class="o">-</span><span class="n">dev</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">prod</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">login</span><span class="o">-</span><span class="n">staging</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">jim</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">auth</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">dev</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">prod</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">ordering</span><span class="o">-</span><span class="n">staging</span>      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">chen</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">purchasing</span>
<span class="n">quote</span><span class="o">-</span><span class="n">dev</span>             <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">prod</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">quote</span><span class="o">-</span><span class="n">staging</span>         <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">amy</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">ecommerce</span>
<span class="n">social</span><span class="o">-</span><span class="n">dev</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">carisa</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">development</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">prod</span>           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">production</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
<span class="n">social</span><span class="o">-</span><span class="n">staging</span>        <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">7</span><span class="n">m</span>        <span class="n">application_type</span><span class="o">=</span><span class="n">api</span><span class="p">,</span><span class="n">dev</span><span class="o">-</span><span class="n">lead</span><span class="o">=</span><span class="n">marketing</span><span class="p">,</span><span class="n">env</span><span class="o">=</span><span class="n">staging</span><span class="p">,</span><span class="n">release</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">team</span><span class="o">=</span><span class="n">marketing</span>
</pre></div>


<h3 id="health-checks">health checks</h3>
<h4 id="normal">normal</h4>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">probes</span><span class="p">.</span><span class="n">yml</span>

<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">Deployment</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">probe</span>
<span class="nl">spec:</span>
  <span class="nl">selector:</span>
    <span class="nl">matchLabels:</span>
      <span class="nl">app:</span> <span class="n">helloworld</span>
  <span class="nl">replicas:</span> <span class="mi">1</span> <span class="err">#</span> <span class="n">tells</span> <span class="n">deployment</span> <span class="n">to</span> <span class="n">run</span> <span class="mi">1</span> <span class="n">pods</span> <span class="n">matching</span> <span class="n">the</span> <span class="n">template</span>
  <span class="nl">template:</span> <span class="err">#</span> <span class="n">create</span> <span class="n">pods</span> <span class="n">using</span> <span class="n">pod</span> <span class="n">definition</span> <span class="n">in</span> <span class="n">this</span> <span class="n">template</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">app:</span> <span class="n">helloworld</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
        <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">latest</span>
        <span class="nl">ports:</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">80</span>
        <span class="nl">readinessProbe:</span>
          <span class="err">#</span> <span class="n">length</span> <span class="n">of</span> <span class="n">time</span> <span class="n">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">a</span> <span class="n">pod</span> <span class="n">to</span> <span class="n">initialize</span>
          <span class="err">#</span> <span class="n">after</span> <span class="n">pod</span> <span class="n">startup</span><span class="p">,</span> <span class="n">before</span> <span class="n">applying</span> <span class="n">health</span> <span class="n">checking</span>
          <span class="nl">initialDelaySeconds:</span> <span class="mi">10</span>
          <span class="err">#</span> <span class="n">Amount</span> <span class="n">of</span> <span class="n">time</span> <span class="n">to</span> <span class="n">wait</span> <span class="n">before</span> <span class="n">timing</span> <span class="n">out</span>
          <span class="nl">initialDelaySeconds:</span> <span class="mi">1</span>
          <span class="err">#</span> <span class="n">Probe</span> <span class="k">for</span> <span class="n">http</span>
          <span class="nl">httpGet:</span>
            <span class="err">#</span> <span class="n">Path</span> <span class="n">to</span> <span class="n">probe</span>
            <span class="nl">path:</span> <span class="o">/</span>
            <span class="err">#</span> <span class="n">Port</span> <span class="n">to</span> <span class="n">probe</span>
            <span class="nl">port:</span> <span class="mi">80</span>
        <span class="nl">livenessProbe:</span>
          <span class="err">#</span> <span class="n">length</span> <span class="n">of</span> <span class="n">time</span> <span class="n">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">a</span> <span class="n">pod</span> <span class="n">to</span> <span class="n">initialize</span>
          <span class="err">#</span> <span class="n">after</span> <span class="n">pod</span> <span class="n">startup</span><span class="p">,</span> <span class="n">before</span> <span class="n">applying</span> <span class="n">health</span> <span class="n">checking</span>
          <span class="nl">initialDelaySeconds:</span> <span class="mi">10</span>
          <span class="err">#</span> <span class="n">Amount</span> <span class="n">of</span> <span class="n">time</span> <span class="n">to</span> <span class="n">wait</span> <span class="n">before</span> <span class="n">timing</span> <span class="n">out</span>
          <span class="nl">timeoutSeconds:</span> <span class="mi">1</span>
          <span class="err">#</span> <span class="n">Probe</span> <span class="k">for</span> <span class="n">http</span>
          <span class="nl">httpGet:</span>
            <span class="err">#</span> <span class="n">Path</span> <span class="n">to</span> <span class="n">probe</span>
            <span class="nl">path:</span> <span class="o">/</span>
            <span class="err">#</span> <span class="n">Port</span> <span class="n">to</span> <span class="n">probe</span>
            <span class="nl">port:</span> <span class="mi">80</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">probes</span><span class="p">.</span><span class="n">yml</span><span class="err">&#39;</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deployments</span>
<span class="n">NAME</span>                               <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">helloworld</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">probe</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">0</span>           <span class="mi">9</span><span class="n">s</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                                               <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">helloworld</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">probe</span><span class="o">-</span><span class="mi">58</span><span class="n">b85784c</span><span class="o">-</span><span class="n">xnz2r</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">15</span><span class="n">s</span>
</pre></div>


<h4 id="unnormal">unnormal</h4>
<p>这里端口错误，设置成90</p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">bad</span><span class="o">-</span><span class="n">liveness</span><span class="o">-</span><span class="n">probe</span><span class="p">.</span><span class="n">yml</span>

<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">Deployment</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">bad</span><span class="o">-</span><span class="n">liveness</span><span class="o">-</span><span class="n">probe</span>
<span class="nl">spec:</span>
  <span class="nl">selector:</span>
    <span class="nl">matchLabels:</span>
      <span class="nl">app:</span> <span class="n">helloworld</span>
  <span class="nl">replicas:</span> <span class="mi">1</span> <span class="err">#</span> <span class="n">tells</span> <span class="n">deployment</span> <span class="n">to</span> <span class="n">run</span> <span class="mi">1</span> <span class="n">pods</span> <span class="n">matching</span> <span class="n">the</span> <span class="n">template</span>
  <span class="nl">template:</span> <span class="err">#</span> <span class="n">create</span> <span class="n">pods</span> <span class="n">using</span> <span class="n">pod</span> <span class="n">definition</span> <span class="n">in</span> <span class="n">this</span> <span class="n">template</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">app:</span> <span class="n">helloworld</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
        <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">latest</span>
        <span class="nl">ports:</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">80</span>
        <span class="nl">livenessProbe:</span>
          <span class="err">#</span> <span class="n">length</span> <span class="n">of</span> <span class="n">time</span> <span class="n">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">a</span> <span class="n">pod</span> <span class="n">to</span> <span class="n">initialize</span>
          <span class="err">#</span> <span class="n">after</span> <span class="n">pod</span> <span class="n">startup</span><span class="p">,</span> <span class="n">before</span> <span class="n">applying</span> <span class="n">health</span> <span class="n">checking</span>
          <span class="nl">initialDelaySeconds:</span> <span class="mi">10</span>
          <span class="err">#</span> <span class="n">How</span> <span class="n">often</span> <span class="p">(</span><span class="n">in</span> <span class="n">seconds</span><span class="p">)</span> <span class="n">to</span> <span class="n">perform</span> <span class="n">the</span> <span class="n">probe</span><span class="p">.</span>
          <span class="nl">periodSeconds:</span> <span class="mi">5</span>
          <span class="err">#</span> <span class="n">Amount</span> <span class="n">of</span> <span class="n">time</span> <span class="n">to</span> <span class="n">wait</span> <span class="n">before</span> <span class="n">timing</span> <span class="n">out</span>
          <span class="nl">timeoutSeconds:</span> <span class="mi">1</span>
          <span class="err">#</span> <span class="n">Kubernetes</span> <span class="n">will</span> <span class="n">try</span> <span class="n">failureThreshold</span> <span class="n">times</span> <span class="n">before</span> <span class="n">giving</span> <span class="n">up</span> <span class="n">and</span> <span class="n">restarting</span> <span class="n">the</span> <span class="n">Pod</span>
          <span class="nl">failureThreshold:</span> <span class="mi">2</span>
          <span class="err">#</span> <span class="n">Probe</span> <span class="k">for</span> <span class="n">http</span>
          <span class="nl">httpGet:</span>
            <span class="err">#</span> <span class="n">Path</span> <span class="n">to</span> <span class="n">probe</span>
            <span class="nl">path:</span> <span class="o">/</span>
            <span class="err">#</span> <span class="n">Port</span> <span class="n">to</span> <span class="n">probe</span>
            <span class="nl">port:</span> <span class="mi">90</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deployments</span>
<span class="n">NAME</span>                                            <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">helloworld</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">bad</span><span class="o">-</span><span class="n">liveness</span><span class="o">-</span><span class="n">probe</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">50</span><span class="n">s</span>
<span class="n">helloworld</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">probe</span>                <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">12</span><span class="n">m</span>
</pre></div>


<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">describe</span> <span class="nx">helloworld</span><span class="na">-deployment-with-bad-liveness-probe</span><span class="o">-</span><span class="mi">5</span><span class="nx">bbc87b8db</span><span class="na">-rw9zh</span>
<span class="nb">error</span><span class="p">:</span> <span class="nx">the</span> <span class="nx">server</span> <span class="nx">doesn</span><span class="s1">&#39;t have a resource type &quot;helloworld-deployment-with-bad-liveness-probe-5bbc87b8db-rw9zh&quot;</span>
<span class="s1">xhxu-mac:test xhxu$ kubectl describe pods/helloworld-deployment-with-bad-liveness-probe-5bbc87b8db-rw9zh</span>
<span class="s1">Name:               helloworld-deployment-with-bad-liveness-probe-5bbc87b8db-rw9zh</span>
<span class="s1">Namespace:          default</span>
<span class="s1">Priority:           0</span>
<span class="s1">PriorityClassName:  &lt;none&gt;</span>
<span class="s1">Node:               minikube/10.0.2.15</span>
<span class="s1">Start Time:         Sun, 03 Mar 2019 15:39:45 +0800</span>
<span class="s1">Labels:             app=helloworld</span>
<span class="s1">                    pod-template-hash=5bbc87b8db</span>
<span class="s1">Annotations:        &lt;none&gt;</span>
<span class="s1">Status:             Running</span>
<span class="s1">IP:                 172.17.0.5</span>
<span class="s1">Controlled By:      ReplicaSet/helloworld-deployment-with-bad-liveness-probe-5bbc87b8db</span>
<span class="s1">Containers:</span>
<span class="s1">  helloworld:</span>
<span class="s1">    Container ID:   docker://11986fd2b5d87f85863e1d3b644a354b595b60799924ac922b4f23a8a3e37bd0</span>
<span class="s1">    Image:          karthequian/helloworld:latest</span>
<span class="s1">    Image ID:       docker-pullable://karthequian/helloworld@sha256:745af01b498d71c954dd3f11930918800de1bd89182b7415809a21d194872e88</span>
<span class="s1">    Port:           80/TCP</span>
<span class="s1">    Host Port:      0/TCP</span>
<span class="s1">    State:          Waiting</span>
<span class="s1">      Reason:       CrashLoopBackOff</span>
<span class="s1">    Last State:     Terminated</span>
<span class="s1">      Reason:       Completed</span>
<span class="s1">      Exit Code:    0</span>
<span class="s1">      Started:      Sun, 03 Mar 2019 15:41:10 +0800</span>
<span class="s1">      Finished:     Sun, 03 Mar 2019 15:41:26 +0800</span>
<span class="s1">    Ready:          False</span>
<span class="s1">    Restart Count:  4</span>
<span class="s1">    Liveness:       http-get http://:90/ delay=10s timeout=1s period=5s #success=1 #failure=2</span>
<span class="s1">    Environment:    &lt;none&gt;</span>
<span class="s1">    Mounts:</span>
<span class="s1">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-47q5g (ro)</span>
<span class="s1">Conditions:</span>
<span class="s1">  Type              Status</span>
<span class="s1">  Initialized       True</span>
<span class="s1">  Ready             False</span>
<span class="s1">  ContainersReady   False</span>
<span class="s1">  PodScheduled      True</span>
<span class="s1">Volumes:</span>
<span class="s1">  default-token-47q5g:</span>
<span class="s1">    Type:        Secret (a volume populated by a Secret)</span>
<span class="s1">    SecretName:  default-token-47q5g</span>
<span class="s1">    Optional:    false</span>
<span class="s1">QoS Class:       BestEffort</span>
<span class="s1">Node-Selectors:  &lt;none&gt;</span>
<span class="s1">Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s</span>
<span class="s1">                 node.kubernetes.io/unreachable:NoExecute for 300s</span>
<span class="s1">Events:</span>
<span class="s1">  Type     Reason     Age               From               Message</span>
<span class="s1">  ----     ------     ----              ----               -------</span>
<span class="s1">  Normal   Scheduled  1m                default-scheduler  Successfully assigned default/helloworld-deployment-with-bad-liveness-probe-5bbc87b8db-rw9zh to minikube</span>
<span class="s1">  Normal   Pulling    52s (x4 over 1m)  kubelet, minikube  pulling image &quot;karthequian/helloworld:latest&quot;</span>
<span class="s1">  Warning  Unhealthy  52s (x6 over 1m)  kubelet, minikube  Liveness probe failed: Get http://172.17.0.5:90/: dial tcp 172.17.0.5:90: connect: connection refused</span>
<span class="s1">  Normal   Killing    52s (x3 over 1m)  kubelet, minikube  Killing container with id docker://helloworld:Container failed liveness probe.. Container will be killed and recreated.</span>
<span class="s1">  Normal   Pulled     49s (x4 over 1m)  kubelet, minikube  Successfully pulled image &quot;karthequian/helloworld:latest&quot;</span>
<span class="s1">  Normal   Created    49s (x4 over 1m)  kubelet, minikube  Created container</span>
<span class="s1">  Normal   Started    49s (x4 over 1m)  kubelet, minikube  Started container</span>
</pre></div>


<h3 id="upgrade">upgrade</h3>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">helloworld</span><span class="o">-</span><span class="n">black</span><span class="p">.</span><span class="n">yml</span>

<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">Deployment</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">navbar</span><span class="o">-</span><span class="n">deployment</span>
<span class="nl">spec:</span>
  <span class="nl">selector:</span>
    <span class="nl">matchLabels:</span>
      <span class="nl">app:</span> <span class="n">helloworld</span>
  <span class="nl">replicas:</span> <span class="mi">3</span> <span class="err">#</span> <span class="n">tells</span> <span class="n">deployment</span> <span class="n">to</span> <span class="n">run</span> <span class="mi">3</span> <span class="n">pods</span> <span class="n">matching</span> <span class="n">the</span> <span class="n">template</span>
  <span class="nl">template:</span> <span class="err">#</span> <span class="n">create</span> <span class="n">pods</span> <span class="n">using</span> <span class="n">pod</span> <span class="n">definition</span> <span class="n">in</span> <span class="n">this</span> <span class="n">template</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">app:</span> <span class="n">helloworld</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">helloworld</span>
        <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">black</span>
        <span class="nl">ports:</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">80</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Service</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">navbar</span><span class="o">-</span><span class="n">service</span>
<span class="nl">spec:</span>
  <span class="err">#</span> <span class="k">if</span> <span class="n">your</span> <span class="n">cluster</span> <span class="n">supports</span> <span class="n">it</span><span class="p">,</span> <span class="n">uncomment</span> <span class="n">the</span> <span class="n">following</span> <span class="n">to</span> <span class="n">automatically</span> <span class="n">create</span>
  <span class="err">#</span> <span class="n">an</span> <span class="n">external</span> <span class="n">load</span><span class="o">-</span><span class="n">balanced</span> <span class="n">IP</span> <span class="k">for</span> <span class="n">the</span> <span class="n">frontend</span> <span class="n">service</span><span class="p">.</span>
  <span class="nl">type:</span> <span class="n">NodePort</span>
  <span class="nl">ports:</span>
  <span class="o">-</span> <span class="n">port</span><span class="o">:</span> <span class="mi">80</span>
    <span class="nl">protocol:</span> <span class="n">TCP</span>
    <span class="nl">targetPort:</span> <span class="mi">80</span>
  <span class="nl">selector:</span>
    <span class="nl">app:</span> <span class="n">helloworld</span>
</pre></div>


<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">create</span> <span class="na">-f</span> <span class="nx">helloworld</span><span class="na">-black.yml</span> <span class="o">--</span><span class="nx">record</span>
<span class="nx">deployment.apps</span> <span class="s2">&quot;navbar-deployment&quot;</span> <span class="nx">created</span>
<span class="nx">service</span> <span class="s2">&quot;navbar-service&quot;</span> <span class="nx">created</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">service</span>
<span class="nb">NAME</span>             <span class="k">TYPE</span>        <span class="nx">CLUSTER</span><span class="na">-IP</span>      <span class="nx">EXTERNAL</span><span class="na">-IP</span>   <span class="nb">PORT</span><span class="p">(</span><span class="nb">S</span><span class="p">)</span>        <span class="nx">AGE</span>
<span class="nx">kubernetes</span>       <span class="nx">ClusterIP</span>   <span class="mf">10.96.0.1</span>       <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">443</span><span class="p">/</span><span class="nx">TCP</span>        <span class="mi">51</span><span class="nb">s</span>
<span class="nx">navbar</span><span class="na">-service</span>   <span class="nx">NodePort</span>    <span class="mf">10.108.47.218</span>   <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">80</span><span class="p">:</span><span class="mi">30683</span><span class="p">/</span><span class="nx">TCP</span>   <span class="mi">42</span><span class="nb">s</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">minikube</span>  <span class="nx">service</span> <span class="nx">navbar</span><span class="na">-service</span>
<span class="err">🎉</span>  <span class="nx">Opening</span> <span class="nx">kubernetes</span> <span class="nx">service</span> <span class="nb">default</span><span class="p">/</span><span class="nx">navbar</span><span class="na">-service</span> <span class="k">in</span> <span class="nb">default</span> <span class="nx">browser...</span>
</pre></div>


<blockquote>
<p>打开浏览器看到页面内容</p>
</blockquote>
<p>更新背景色为蓝色</p>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">set</span> <span class="n">image</span> <span class="n">deployment</span><span class="o">/</span><span class="n">navbar</span><span class="o">-</span><span class="n">deployment</span> <span class="n">helloworld</span><span class="o">=</span><span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">blue</span>
<span class="n">deployment</span><span class="p">.</span><span class="n">apps</span> <span class="s">&quot;navbar-deployment&quot;</span> <span class="n">image</span> <span class="n">updated</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deployments</span>
<span class="n">NAME</span>                <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">navbar</span><span class="o">-</span><span class="n">deployment</span>   <span class="mi">3</span>         <span class="mi">4</span>         <span class="mi">1</span>            <span class="mi">3</span>           <span class="mi">2</span><span class="n">m</span>
</pre></div>


<p>恢复到之前版本</p>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">rollout</span> <span class="n">history</span> <span class="n">deployment</span><span class="o">/</span><span class="n">navbar</span><span class="o">-</span><span class="n">deployment</span>
<span class="n">deployments</span> <span class="s">&quot;navbar-deployment&quot;</span>
<span class="n">REVISION</span>  <span class="n">CHANGE</span><span class="o">-</span><span class="n">CAUSE</span>
<span class="mi">1</span>         <span class="n">kubectl</span> <span class="n">create</span> <span class="o">--</span><span class="n">filename</span><span class="o">=</span><span class="n">helloworld</span><span class="o">-</span><span class="n">black</span><span class="p">.</span><span class="n">yml</span> <span class="o">--</span><span class="n">record</span><span class="o">=</span><span class="nb">true</span>
<span class="mi">2</span>         <span class="n">kubectl</span> <span class="n">set</span> <span class="n">image</span> <span class="n">deployment</span><span class="o">/</span><span class="n">navbar</span><span class="o">-</span><span class="n">deployment</span> <span class="n">helloworld</span><span class="o">=</span><span class="n">karthequian</span><span class="o">/</span><span class="n">helloworld</span><span class="o">:</span><span class="n">blue</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">rollout</span> <span class="n">undo</span> <span class="n">deployment</span><span class="o">/</span><span class="n">navbar</span><span class="o">-</span><span class="n">deployment</span>
<span class="n">deployment</span><span class="p">.</span><span class="n">apps</span> <span class="s">&quot;navbar-deployment&quot;</span>
</pre></div>


<h2 id="guestbook">guestbook</h2>
<h3 id="initiaze-complicated-task">initiaze complicated task</h3>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">guestbook</span><span class="p">.</span><span class="n">yml</span>
</pre></div>


<div class="hlcode"><pre><span class="n">apiVersion</span><span class="o">:</span> <span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span> <span class="n">Service</span>
<span class="n">metadata</span><span class="o">:</span>
  <span class="n">name</span><span class="o">:</span> <span class="n">redis</span><span class="o">-</span><span class="n">master</span>
  <span class="n">labels</span><span class="o">:</span>
    <span class="n">app</span><span class="o">:</span> <span class="n">redis</span>
    <span class="n">tier</span><span class="o">:</span> <span class="n">backend</span>
    <span class="n">role</span><span class="o">:</span> <span class="n">master</span>
<span class="n">spec</span><span class="o">:</span>
  <span class="n">ports</span><span class="o">:</span>
  <span class="o">-</span> <span class="n">port</span><span class="o">:</span> <span class="mi">6379</span>
    <span class="n">targetPort</span><span class="o">:</span> <span class="mi">6379</span>
  <span class="n">selector</span><span class="o">:</span>
    <span class="n">app</span><span class="o">:</span> <span class="n">redis</span>
    <span class="n">tier</span><span class="o">:</span> <span class="n">backend</span>
    <span class="n">role</span><span class="o">:</span> <span class="n">master</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span> <span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="n">kind</span><span class="o">:</span> <span class="n">Deployment</span>
<span class="n">metadata</span><span class="o">:</span>
  <span class="n">name</span><span class="o">:</span> <span class="n">redis</span><span class="o">-</span><span class="n">master</span>
<span class="n">spec</span><span class="o">:</span>
  <span class="n">replicas</span><span class="o">:</span> <span class="mi">1</span>
  <span class="n">template</span><span class="o">:</span>
    <span class="n">metadata</span><span class="o">:</span>
      <span class="n">labels</span><span class="o">:</span>
        <span class="n">app</span><span class="o">:</span> <span class="n">redis</span>
        <span class="n">role</span><span class="o">:</span> <span class="n">master</span>
        <span class="n">tier</span><span class="o">:</span> <span class="n">backend</span>
    <span class="n">spec</span><span class="o">:</span>
      <span class="n">containers</span><span class="o">:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">master</span>
        <span class="n">image</span><span class="o">:</span> <span class="n">gcr</span><span class="o">.</span><span class="na">io</span><span class="sr">/google_containers/</span><span class="n">redis</span><span class="o">:</span><span class="n">e2e</span>  <span class="err">#</span> <span class="n">or</span> <span class="n">just</span> <span class="n">image</span><span class="o">:</span> <span class="n">redis</span>
        <span class="n">resources</span><span class="o">:</span>
          <span class="n">requests</span><span class="o">:</span>
            <span class="n">cpu</span><span class="o">:</span> <span class="mi">100</span><span class="n">m</span>
            <span class="n">memory</span><span class="o">:</span> <span class="mi">100</span><span class="n">Mi</span>
        <span class="n">ports</span><span class="o">:</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">6379</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span> <span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span> <span class="n">Service</span>
<span class="n">metadata</span><span class="o">:</span>
  <span class="n">name</span><span class="o">:</span> <span class="n">redis</span><span class="o">-</span><span class="n">slave</span>
  <span class="n">labels</span><span class="o">:</span>
    <span class="n">app</span><span class="o">:</span> <span class="n">redis</span>
    <span class="n">tier</span><span class="o">:</span> <span class="n">backend</span>
    <span class="n">role</span><span class="o">:</span> <span class="n">slave</span>
<span class="n">spec</span><span class="o">:</span>
  <span class="n">ports</span><span class="o">:</span>
  <span class="o">-</span> <span class="n">port</span><span class="o">:</span> <span class="mi">6379</span>
  <span class="n">selector</span><span class="o">:</span>
    <span class="n">app</span><span class="o">:</span> <span class="n">redis</span>
    <span class="n">tier</span><span class="o">:</span> <span class="n">backend</span>
    <span class="n">role</span><span class="o">:</span> <span class="n">slave</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span> <span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="n">kind</span><span class="o">:</span> <span class="n">Deployment</span>
<span class="n">metadata</span><span class="o">:</span>
  <span class="n">name</span><span class="o">:</span> <span class="n">redis</span><span class="o">-</span><span class="n">slave</span>
<span class="n">spec</span><span class="o">:</span>
  <span class="n">replicas</span><span class="o">:</span> <span class="mi">2</span>
  <span class="n">template</span><span class="o">:</span>
    <span class="n">metadata</span><span class="o">:</span>
      <span class="n">labels</span><span class="o">:</span>
        <span class="n">app</span><span class="o">:</span> <span class="n">redis</span>
        <span class="n">role</span><span class="o">:</span> <span class="n">slave</span>
        <span class="n">tier</span><span class="o">:</span> <span class="n">backend</span>
    <span class="n">spec</span><span class="o">:</span>
      <span class="n">containers</span><span class="o">:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">slave</span>
        <span class="n">image</span><span class="o">:</span> <span class="n">gcr</span><span class="o">.</span><span class="na">io</span><span class="sr">/google_samples/g</span><span class="n">b</span><span class="o">-</span><span class="n">redisslave</span><span class="o">:</span><span class="n">v1</span>
        <span class="n">resources</span><span class="o">:</span>
          <span class="n">requests</span><span class="o">:</span>
            <span class="n">cpu</span><span class="o">:</span> <span class="mi">100</span><span class="n">m</span>
            <span class="n">memory</span><span class="o">:</span> <span class="mi">100</span><span class="n">Mi</span>
        <span class="n">env</span><span class="o">:</span>
        <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">GET_HOSTS_FROM</span>
          <span class="n">value</span><span class="o">:</span> <span class="n">dns</span>
          <span class="err">#</span> <span class="n">If</span> <span class="n">your</span> <span class="n">cluster</span> <span class="n">config</span> <span class="n">does</span> <span class="n">not</span> <span class="k">include</span> <span class="n">a</span> <span class="n">dns</span> <span class="n">service</span><span class="o">,</span> <span class="n">then</span> <span class="n">to</span>
          <span class="err">#</span> <span class="n">instead</span> <span class="n">access</span> <span class="n">an</span> <span class="n">environment</span> <span class="n">variable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">the</span> <span class="n">master</span>
          <span class="err">#</span> <span class="n">service</span><span class="s1">&#39;s host, comment out the &#39;</span><span class="n">value</span><span class="o">:</span> <span class="n">dns</span><span class="s1">&#39; line above, and</span>
<span class="s1">          # uncomment the line below:</span>
<span class="s1">          # value: env</span>
<span class="s1">        ports:</span>
<span class="s1">        - containerPort: 6379</span>
<span class="s1">---</span>
<span class="s1">apiVersion: v1</span>
<span class="s1">kind: Service</span>
<span class="s1">metadata:</span>
<span class="s1">  name: frontend</span>
<span class="s1">  labels:</span>
<span class="s1">    app: guestbook</span>
<span class="s1">    tier: frontend</span>
<span class="s1">spec:</span>
<span class="s1">  type: NodePort</span>
<span class="s1">  ports:</span>
<span class="s1">  - port: 80</span>
<span class="s1">  selector:</span>
<span class="s1">    app: guestbook</span>
<span class="s1">    tier: frontend</span>
<span class="s1">---</span>
<span class="s1">apiVersion: extensions/v1beta1</span>
<span class="s1">kind: Deployment</span>
<span class="s1">metadata:</span>
<span class="s1">  name: frontend</span>
<span class="s1">spec:</span>
<span class="s1">  replicas: 3</span>
<span class="s1">  template:</span>
<span class="s1">    metadata:</span>
<span class="s1">      labels:</span>
<span class="s1">        app: guestbook</span>
<span class="s1">        tier: frontend</span>
<span class="s1">    spec:</span>
<span class="s1">      containers:</span>
<span class="s1">      - name: php-redis</span>
<span class="s1">        image: gcr.io/google-samples/gb-frontend:v4</span>
<span class="s1">        resources:</span>
<span class="s1">          requests:</span>
<span class="s1">            cpu: 100m</span>
<span class="s1">            memory: 100Mi</span>
<span class="s1">        env:</span>
<span class="s1">        - name: GET_HOSTS_FROM</span>
<span class="s1">          value: dns</span>
<span class="s1">          # If your cluster config does not include a dns service, then to</span>
<span class="s1">          # instead access environment variables to find service host</span>
<span class="s1">          # info, comment out the &#39;</span><span class="n">value</span><span class="o">:</span> <span class="n">dns</span><span class="err">&#39;</span> <span class="n">line</span> <span class="n">above</span><span class="o">,</span> <span class="n">and</span> <span class="n">uncomment</span> <span class="n">the</span>
          <span class="err">#</span> <span class="n">line</span> <span class="n">below</span><span class="o">:</span>
          <span class="err">#</span> <span class="n">value</span><span class="o">:</span> <span class="n">env</span>
        <span class="n">ports</span><span class="o">:</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">80</span>
</pre></div>


<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">deployments</span>
<span class="nb">NAME</span>           <span class="nx">DESIRED</span>   <span class="nx">CURRENT</span>   <span class="nb">UP</span><span class="na">-TO-DATE</span>   <span class="nx">AVAILABLE</span>   <span class="nx">AGE</span>
<span class="nx">frontend</span>       <span class="mi">3</span>         <span class="mi">3</span>         <span class="mi">3</span>            <span class="mi">0</span>           <span class="mi">23</span><span class="nb">s</span>
<span class="nx">redis</span><span class="na">-master</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">0</span>           <span class="mi">23</span><span class="nb">s</span>
<span class="nx">redis</span><span class="na">-slave</span>    <span class="mi">2</span>         <span class="mi">2</span>         <span class="mi">2</span>            <span class="mi">0</span>           <span class="mi">23</span><span class="nb">s</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">services</span>
<span class="nb">NAME</span>           <span class="k">TYPE</span>        <span class="nx">CLUSTER</span><span class="na">-IP</span>      <span class="nx">EXTERNAL</span><span class="na">-IP</span>   <span class="nb">PORT</span><span class="p">(</span><span class="nb">S</span><span class="p">)</span>        <span class="nx">AGE</span>
<span class="nx">frontend</span>       <span class="nx">NodePort</span>    <span class="mf">10.105.81.29</span>    <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">80</span><span class="p">:</span><span class="mi">32355</span><span class="p">/</span><span class="nx">TCP</span>   <span class="mi">46</span><span class="nb">s</span>
<span class="nx">kubernetes</span>     <span class="nx">ClusterIP</span>   <span class="mf">10.96.0.1</span>       <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">443</span><span class="p">/</span><span class="nx">TCP</span>        <span class="mi">52</span><span class="nb">s</span>
<span class="nx">redis</span><span class="na">-master</span>   <span class="nx">ClusterIP</span>   <span class="mf">10.102.41.68</span>    <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">6379</span><span class="p">/</span><span class="nx">TCP</span>       <span class="mi">46</span><span class="nb">s</span>
<span class="nx">redis</span><span class="na">-slave</span>    <span class="nx">ClusterIP</span>   <span class="mf">10.101.52.152</span>   <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>        <span class="mi">6379</span><span class="p">/</span><span class="nx">TCP</span>       <span class="mi">46</span><span class="nb">s</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">minikube</span> <span class="nx">service</span> <span class="nx">frontend</span>
<span class="err">🎉</span>  <span class="nx">Opening</span> <span class="nx">kubernetes</span> <span class="nx">service</span> <span class="nb">default</span><span class="p">/</span><span class="nx">frontend</span> <span class="k">in</span> <span class="nb">default</span> <span class="nx">browser...</span>
</pre></div>


<h3 id="enable-minikube-dashboard">enable minikube dashboard</h3>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">minikube</span> <span class="n">addons</span> <span class="n">list</span>
<span class="o">-</span> <span class="n">addon</span><span class="o">-</span><span class="n">manager</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">dashboard</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="k">default</span><span class="o">-</span><span class="n">storageclass</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">efk</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">freshpod</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">gvisor</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">heapster</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">ingress</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">logviewer</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">metrics</span><span class="o">-</span><span class="n">server</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">nvidia</span><span class="o">-</span><span class="n">driver</span><span class="o">-</span><span class="n">installer</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">nvidia</span><span class="o">-</span><span class="n">gpu</span><span class="o">-</span><span class="n">device</span><span class="o">-</span><span class="n">plugin</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">registry</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">registry</span><span class="o">-</span><span class="n">creds</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">storage</span><span class="o">-</span><span class="n">provisioner</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">storage</span><span class="o">-</span><span class="n">provisioner</span><span class="o">-</span><span class="n">gluster</span><span class="o">:</span> <span class="n">disabled</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">minikube</span>  <span class="n">addons</span> <span class="n">enable</span> <span class="n">dashboard</span>
<span class="err">✅</span>  <span class="n">dashboard</span> <span class="n">was</span> <span class="n">successfully</span> <span class="n">enabled</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">minikube</span>  <span class="n">addons</span> <span class="n">enable</span> <span class="n">heapster</span>
<span class="err">✅</span>  <span class="n">heapster</span> <span class="n">was</span> <span class="n">successfully</span> <span class="n">enabled</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">minikube</span>  <span class="n">addons</span> <span class="n">list</span>
<span class="o">-</span> <span class="n">addon</span><span class="o">-</span><span class="n">manager</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">dashboard</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="k">default</span><span class="o">-</span><span class="n">storageclass</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">efk</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">freshpod</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">gvisor</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">heapster</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">ingress</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">logviewer</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">metrics</span><span class="o">-</span><span class="n">server</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">nvidia</span><span class="o">-</span><span class="n">driver</span><span class="o">-</span><span class="n">installer</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">nvidia</span><span class="o">-</span><span class="n">gpu</span><span class="o">-</span><span class="n">device</span><span class="o">-</span><span class="n">plugin</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">registry</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">registry</span><span class="o">-</span><span class="n">creds</span><span class="o">:</span> <span class="n">disabled</span>
<span class="o">-</span> <span class="n">storage</span><span class="o">-</span><span class="n">provisioner</span><span class="o">:</span> <span class="n">enabled</span>
<span class="o">-</span> <span class="n">storage</span><span class="o">-</span><span class="n">provisioner</span><span class="o">-</span><span class="n">gluster</span><span class="o">:</span> <span class="n">disabled</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">minikube</span> <span class="n">dashboard</span>
<span class="err">🔌</span>  <span class="n">Enabling</span> <span class="n">dashboard</span> <span class="p">...</span>
<span class="err">🤔</span>  <span class="n">Verifying</span> <span class="n">dashboard</span> <span class="n">health</span> <span class="p">...</span>
<span class="err">🚀</span>  <span class="n">Launching</span> <span class="n">proxy</span> <span class="p">...</span>
<span class="err">🤔</span>  <span class="n">Verifying</span> <span class="n">proxy</span> <span class="n">health</span> <span class="p">...</span>
<span class="err">🎉</span>  <span class="n">Opening</span> <span class="n">http</span><span class="o">:</span><span class="c1">//127.0.0.1:54649/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/ in your default browser...</span>
</pre></div>


<h2 id="configmap">configmap</h2>
<p>动态传递data</p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">reader</span><span class="o">-</span><span class="n">deployment</span><span class="p">.</span><span class="n">yml</span>

<span class="nl">apiVersion:</span> <span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">Deployment</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">logreader</span>
<span class="nl">spec:</span>
  <span class="nl">replicas:</span> <span class="mi">1</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">name:</span> <span class="n">logreader</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">logreader</span>
        <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">reader</span><span class="o">:</span><span class="n">latest</span>
        <span class="nl">env:</span>
        <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">log_level</span>
          <span class="nl">value:</span> <span class="s">&quot;error&quot;</span>
</pre></div>


<blockquote>
<p>这里传递了env 里面的参数</p>
</blockquote>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                           <span class="n">READY</span>     <span class="n">STATUS</span>        <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">logreader</span><span class="o">-</span><span class="mi">86</span><span class="n">bfcfbf76</span><span class="o">-</span><span class="mi">4</span><span class="n">ghzs</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>       <span class="mi">0</span>          <span class="mi">38</span><span class="n">s</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">logs</span> <span class="n">logreader</span><span class="o">-</span><span class="mi">86</span><span class="n">bfcfbf76</span><span class="o">-</span><span class="mi">4</span><span class="n">ghzs</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">error</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">error</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">error</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">error</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">error</span><span class="err">&#39;</span>
</pre></div>


<p>通过configmap 修改输出</p>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="n">configmap</span> <span class="n">logger</span> <span class="o">--</span><span class="n">from</span><span class="o">-</span><span class="n">literal</span><span class="o">=</span><span class="n">log_level</span><span class="o">=</span><span class="n">debug</span>
<span class="n">configmap</span> <span class="s">&quot;logger&quot;</span> <span class="n">created</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">vim</span> <span class="n">reader</span><span class="o">-</span><span class="n">configmap</span><span class="o">-</span><span class="n">deployment</span><span class="p">.</span><span class="n">yml</span>
</pre></div>


<div class="hlcode"><pre><span class="n">apiVersion</span><span class="o">:</span> <span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="n">kind</span><span class="o">:</span> <span class="n">Deployment</span>
<span class="n">metadata</span><span class="o">:</span>
  <span class="n">name</span><span class="o">:</span> <span class="n">logreader</span><span class="o">-</span><span class="kd">dynamic</span>
<span class="n">spec</span><span class="o">:</span>
  <span class="n">replicas</span><span class="o">:</span> <span class="mi">1</span>
  <span class="n">template</span><span class="o">:</span>
    <span class="n">metadata</span><span class="o">:</span>
      <span class="n">labels</span><span class="o">:</span>
        <span class="n">name</span><span class="o">:</span> <span class="n">logreader</span><span class="o">-</span><span class="kd">dynamic</span>
    <span class="n">spec</span><span class="o">:</span>
      <span class="n">containers</span><span class="o">:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">logreader</span>
        <span class="n">image</span><span class="o">:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">reader</span><span class="o">:</span><span class="n">latest</span>
        <span class="n">env</span><span class="o">:</span>
        <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">log_level</span>
          <span class="n">valueFrom</span><span class="o">:</span>
            <span class="n">configMapKeyRef</span><span class="o">:</span>
              <span class="n">name</span><span class="o">:</span> <span class="n">logger</span> <span class="err">#</span><span class="n">Read</span> <span class="n">from</span> <span class="n">a</span> <span class="n">configmap</span> <span class="n">called</span> <span class="n">log</span><span class="o">-</span><span class="n">level</span>
              <span class="n">key</span><span class="o">:</span> <span class="n">log_level</span>  <span class="err">#</span><span class="n">Read</span> <span class="n">the</span> <span class="n">key</span> <span class="n">called</span> <span class="n">log_level</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">reader</span><span class="o">-</span><span class="n">configmap</span><span class="o">-</span><span class="n">deployment</span><span class="p">.</span><span class="n">yml</span>
<span class="n">deployment</span><span class="p">.</span><span class="n">extensions</span> <span class="s">&quot;logreader-dynamic&quot;</span> <span class="n">created</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">configmaps</span>
<span class="n">NAME</span>      <span class="n">DATA</span>      <span class="n">AGE</span>
<span class="n">logger</span>    <span class="mi">1</span>         <span class="mi">1</span><span class="n">m</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">configmap</span><span class="o">/</span><span class="n">logger</span> <span class="o">-</span><span class="n">o</span> <span class="n">yaml</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">data:</span>
  <span class="nl">log_level:</span> <span class="n">debug</span>
<span class="nl">kind:</span> <span class="n">ConfigMap</span>
<span class="nl">metadata:</span>
  <span class="nl">creationTimestamp:</span> <span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">03</span><span class="n">T09</span><span class="o">:</span><span class="mo">07</span><span class="o">:</span><span class="mi">11</span><span class="n">Z</span>
  <span class="nl">name:</span> <span class="n">logger</span>
  <span class="nl">namespace:</span> <span class="k">default</span>
  <span class="nl">resourceVersion:</span> <span class="s">&quot;78987&quot;</span>
  <span class="nl">selfLink:</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">namespaces</span><span class="o">/</span><span class="k">default</span><span class="o">/</span><span class="n">configmaps</span><span class="o">/</span><span class="n">logger</span>
  <span class="nl">uid:</span> <span class="n">ba88bdbd</span><span class="o">-</span><span class="mi">3</span><span class="n">d93</span><span class="o">-</span><span class="mf">11e9</span><span class="o">-</span><span class="mf">9f</span><span class="mi">7</span><span class="n">b</span><span class="o">-</span><span class="mf">0800273e7607</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                                <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">logreader</span><span class="o">-</span><span class="mi">86</span><span class="n">bfcfbf76</span><span class="o">-</span><span class="mi">4</span><span class="n">ghzs</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">4</span><span class="n">m</span>
<span class="n">logreader</span><span class="o">-</span><span class="n">dynamic</span><span class="o">-</span><span class="n">f49f5fcdb</span><span class="o">-</span><span class="n">nl7dt</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">logs</span> <span class="n">logreader</span><span class="o">-</span><span class="n">dynamic</span><span class="o">-</span><span class="n">f49f5fcdb</span><span class="o">-</span><span class="n">nl7dt</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
<span class="n">Log</span> <span class="n">level</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variables</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">debug</span><span class="err">&#39;</span>
</pre></div>


<blockquote>
<p>这里的输出变了</p>
</blockquote>
<h2 id="secrets">secrets</h2>
<h3 id="_1">生成</h3>
<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="n">secret</span> <span class="n">generic</span> <span class="n">apikey</span> <span class="o">--</span><span class="n">from</span><span class="o">-</span><span class="n">literal</span><span class="o">=</span><span class="n">api_key</span><span class="o">=</span><span class="mi">123456</span>
<span class="n">secret</span> <span class="s">&quot;apikey&quot;</span> <span class="n">created</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">secrets</span>
<span class="n">NAME</span>                  <span class="n">TYPE</span>                                  <span class="n">DATA</span>      <span class="n">AGE</span>
<span class="n">apikey</span>                <span class="n">Opaque</span>                                <span class="mi">1</span>         <span class="mi">18</span><span class="n">s</span>
<span class="k">default</span><span class="o">-</span><span class="n">token</span><span class="o">-</span><span class="mi">47</span><span class="n">q5g</span>   <span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">service</span><span class="o">-</span><span class="n">account</span><span class="o">-</span><span class="n">token</span>   <span class="mi">3</span>         <span class="mi">2</span><span class="n">d</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">secret</span> <span class="n">apikey</span>
<span class="n">NAME</span>      <span class="n">TYPE</span>      <span class="n">DATA</span>      <span class="n">AGE</span>
<span class="n">apikey</span>    <span class="n">Opaque</span>    <span class="mi">1</span>         <span class="mi">31</span><span class="n">s</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">secret</span> <span class="n">apikey</span>  <span class="o">-</span><span class="n">o</span> <span class="n">yaml</span>
<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">data:</span>
  <span class="nl">api_key:</span> <span class="n">MTIzNDU2</span>
<span class="nl">kind:</span> <span class="n">Secret</span>
<span class="nl">metadata:</span>
  <span class="nl">creationTimestamp:</span> <span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">03</span><span class="n">T09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mi">49</span><span class="n">Z</span>
  <span class="nl">name:</span> <span class="n">apikey</span>
  <span class="nl">namespace:</span> <span class="k">default</span>
  <span class="nl">resourceVersion:</span> <span class="s">&quot;80356&quot;</span>
  <span class="nl">selfLink:</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">namespaces</span><span class="o">/</span><span class="k">default</span><span class="o">/</span><span class="n">secrets</span><span class="o">/</span><span class="n">apikey</span>
  <span class="nl">uid:</span> <span class="mi">5526</span><span class="n">b626</span><span class="o">-</span><span class="mi">3</span><span class="n">d96</span><span class="o">-</span><span class="mf">11e9</span><span class="o">-</span><span class="mf">9f</span><span class="mi">7</span><span class="n">b</span><span class="o">-</span><span class="mf">0800273e7607</span>
<span class="nl">type:</span> <span class="n">Opaque</span>
</pre></div>


<h3 id="_2">使用</h3>
<p>部署secret reader</p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">secretreader</span><span class="o">-</span><span class="n">deployment</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">Deployment</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">secretreader</span>
<span class="nl">spec:</span>
  <span class="nl">replicas:</span> <span class="mi">1</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">name:</span> <span class="n">secretreader</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">secretreader</span>
        <span class="nl">image:</span> <span class="n">karthequian</span><span class="o">/</span><span class="n">secretreader</span><span class="o">:</span><span class="n">latest</span>
        <span class="nl">env:</span>
        <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">api_key</span>
          <span class="nl">valueFrom:</span>
            <span class="nl">secretKeyRef:</span>
              <span class="nl">name:</span> <span class="n">apikey</span>
              <span class="nl">key:</span> <span class="n">api_key</span>
</pre></div>


<div class="hlcode"><pre><span class="n">deployment</span><span class="p">.</span><span class="n">extensions</span> <span class="s">&quot;secretreader&quot;</span> <span class="n">created</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                                <span class="n">READY</span>     <span class="n">STATUS</span>    <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">logreader</span><span class="o">-</span><span class="mi">86</span><span class="n">bfcfbf76</span><span class="o">-</span><span class="mi">4</span><span class="n">ghzs</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">h</span>
<span class="n">logreader</span><span class="o">-</span><span class="n">dynamic</span><span class="o">-</span><span class="n">f49f5fcdb</span><span class="o">-</span><span class="n">nl7dt</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">2</span><span class="n">h</span>
<span class="n">secretreader</span><span class="o">-</span><span class="mi">554</span><span class="n">bbcd469</span><span class="o">-</span><span class="n">xfthd</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>   <span class="mi">0</span>          <span class="mi">10</span><span class="n">s</span>
<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">logs</span> <span class="n">secretreader</span><span class="o">-</span><span class="mi">554</span><span class="n">bbcd469</span><span class="o">-</span><span class="n">xfthd</span>
<span class="n">api_key</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variable</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="mi">123456</span><span class="err">&#39;</span>
<span class="n">api_key</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variable</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="mi">123456</span><span class="err">&#39;</span>
<span class="n">api_key</span> <span class="n">passed</span> <span class="n">via</span> <span class="n">env</span> <span class="n">variable</span> <span class="n">was</span><span class="o">:</span> <span class="err">&#39;</span><span class="mi">123456</span><span class="err">&#39;</span>
</pre></div>


<h2 id="running-job">running job</h2>
<h3 id="simple-job">simple job</h3>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">simplejob</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">batch</span><span class="o">/</span><span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Job</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">finalcountdown</span>
<span class="nl">spec:</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">name:</span> <span class="n">finalcountdown</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">counter</span>
        <span class="nl">image:</span> <span class="n">busybox</span>
        <span class="nl">command:</span>
         <span class="o">-</span> <span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
         <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
         <span class="o">-</span> <span class="s">&quot;for i in 9 8 7 6 5 4 3 2 1 ; do echo $i ; done&quot;</span>
      <span class="nl">restartPolicy:</span> <span class="n">Never</span> <span class="err">#</span><span class="n">could</span> <span class="n">also</span> <span class="n">be</span> <span class="n">Always</span> <span class="n">or</span> <span class="n">OnFailure</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">jobs</span>
<span class="n">NAME</span>             <span class="n">DESIRED</span>   <span class="n">SUCCESSFUL</span>   <span class="n">AGE</span>
<span class="n">finalcountdown</span>   <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">13</span><span class="n">s</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span>  <span class="n">get</span> <span class="n">pods</span>
<span class="n">NAME</span>                                <span class="n">READY</span>     <span class="n">STATUS</span>      <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">finalcountdown</span><span class="o">-</span><span class="n">xgwpk</span>                <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Completed</span>   <span class="mi">0</span>          <span class="mi">37</span><span class="n">s</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span>  <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">all</span>
<span class="n">Flag</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">all</span> <span class="n">has</span> <span class="n">been</span> <span class="n">deprecated</span><span class="p">,</span> <span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="n">in</span> <span class="n">an</span> <span class="n">upcoming</span> <span class="n">release</span>
<span class="n">NAME</span>                                <span class="n">READY</span>     <span class="n">STATUS</span>      <span class="n">RESTARTS</span>   <span class="n">AGE</span>
<span class="n">finalcountdown</span><span class="o">-</span><span class="n">xgwpk</span>                <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Completed</span>   <span class="mi">0</span>          <span class="mi">45</span><span class="n">s</span>
<span class="n">logreader</span><span class="o">-</span><span class="mi">86</span><span class="n">bfcfbf76</span><span class="o">-</span><span class="mi">4</span><span class="n">ghzs</span>          <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>     <span class="mi">0</span>          <span class="mi">2</span><span class="n">h</span>
<span class="n">logreader</span><span class="o">-</span><span class="n">dynamic</span><span class="o">-</span><span class="n">f49f5fcdb</span><span class="o">-</span><span class="n">nl7dt</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>     <span class="mi">0</span>          <span class="mi">2</span><span class="n">h</span>
<span class="n">secretreader</span><span class="o">-</span><span class="mi">554</span><span class="n">bbcd469</span><span class="o">-</span><span class="n">xfthd</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>       <span class="n">Running</span>     <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">logs</span> <span class="n">finalcountdown</span><span class="o">-</span><span class="n">xgwpk</span>
<span class="mi">9</span>
<span class="mi">8</span>
<span class="mi">7</span>
<span class="mi">6</span>
<span class="mi">5</span>
<span class="mi">4</span>
<span class="mi">3</span>
<span class="mi">2</span>
<span class="mi">1</span>
</pre></div>


<h3 id="cronjob">cronjob</h3>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">cronjob</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">batch</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">CronJob</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">hellocron</span>
<span class="nl">spec:</span>
  <span class="nl">schedule:</span> <span class="s">&quot;*/1 * * * *&quot;</span> <span class="err">#</span><span class="n">Runs</span> <span class="n">every</span> <span class="n">minute</span> <span class="p">(</span><span class="n">cron</span> <span class="n">syntax</span><span class="p">)</span> <span class="n">or</span> <span class="err">@</span><span class="n">hourly</span><span class="p">.</span>
  <span class="nl">jobTemplate:</span>
    <span class="nl">spec:</span>
      <span class="nl">template:</span>
        <span class="nl">spec:</span>
          <span class="nl">containers:</span>
          <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">hellocron</span>
            <span class="nl">image:</span> <span class="n">busybox</span>
            <span class="nl">args:</span>
            <span class="o">-</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
            <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
            <span class="o">-</span> <span class="n">date</span><span class="p">;</span> <span class="n">echo</span> <span class="n">Hello</span> <span class="n">from</span> <span class="n">your</span> <span class="n">Kubernetes</span> <span class="n">cluster</span>
          <span class="nl">restartPolicy:</span> <span class="n">OnFailure</span> <span class="err">#</span><span class="n">could</span> <span class="n">also</span> <span class="n">be</span> <span class="n">Always</span> <span class="n">or</span> <span class="n">Never</span>
  <span class="nl">suspend:</span> <span class="nb">false</span> <span class="err">#</span><span class="n">Set</span> <span class="n">to</span> <span class="nb">true</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">suspend</span> <span class="n">in</span> <span class="n">the</span> <span class="n">future</span>
</pre></div>


<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">create</span> <span class="na">-f</span> <span class="nx">cronjob.yaml</span>
<span class="nx">cronjob.batch</span> <span class="s2">&quot;hellocron&quot;</span> <span class="nx">created</span>

<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">cronjobs</span>
<span class="nb">NAME</span>        <span class="nx">SCHEDULE</span>      <span class="nb">SUSPEND</span>   <span class="nx">ACTIVE</span>    <span class="nb">LAST</span> <span class="nx">SCHEDULE</span>   <span class="nx">AGE</span>
<span class="nx">hellocron</span>   <span class="o">*/</span><span class="mi">1</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span>   <span class="kc">False</span>     <span class="mi">0</span>         <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>          <span class="mi">13</span><span class="nb">s</span>

<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nx">edit</span> <span class="nx">cronjobs</span><span class="p">/</span><span class="nx">hellocron</span>
<span class="nx">cronjob.batch</span> <span class="s2">&quot;hellocron&quot;</span> <span class="nx">edited</span>

<span class="err">#</span> <span class="nx">修改如下</span>
<span class="o">+</span> <span class="nb">suspend</span><span class="p">:</span> <span class="kc">true</span>
<span class="o">-</span> <span class="nb">suspend</span><span class="p">:</span> <span class="kc">false</span>


<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">cronjobs</span>
<span class="nb">NAME</span>        <span class="nx">SCHEDULE</span>      <span class="nb">SUSPEND</span>   <span class="nx">ACTIVE</span>    <span class="nb">LAST</span> <span class="nx">SCHEDULE</span>   <span class="nx">AGE</span>
<span class="nx">hellocron</span>   <span class="o">*/</span><span class="mi">1</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span>   <span class="kc">True</span>      <span class="mi">0</span>         <span class="mi">32</span><span class="nb">s</span>             <span class="mi">2</span><span class="nx">m</span>
</pre></div>


<h2 id="applications">applications</h2>
<p>运行daemonset</p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">daemonset</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta2</span>
<span class="nl">kind:</span> <span class="n">DaemonSet</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset</span>
  <span class="nl">namespace:</span> <span class="k">default</span>
  <span class="nl">labels:</span>
    <span class="n">k8s</span><span class="o">-</span><span class="n">app</span><span class="o">:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset</span>
<span class="nl">spec:</span>
  <span class="nl">selector:</span>
    <span class="nl">matchLabels:</span>
      <span class="nl">name:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">name:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset</span>
    <span class="nl">spec:</span>
      <span class="err">#</span><span class="n">nodeSelector</span><span class="o">:</span> <span class="n">minikube</span> <span class="err">#</span> <span class="n">Specify</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">run</span> <span class="n">on</span> <span class="n">specific</span> <span class="n">nodes</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset</span>
        <span class="nl">image:</span> <span class="n">busybox</span>
        <span class="nl">args:</span>
        <span class="o">-</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
        <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
        <span class="o">-</span> <span class="n">date</span><span class="p">;</span> <span class="n">sleep</span> <span class="mi">1000</span>
        <span class="nl">resources:</span>
          <span class="nl">limits:</span>
            <span class="nl">memory:</span> <span class="mi">200</span><span class="n">Mi</span>
          <span class="nl">requests:</span>
            <span class="nl">cpu:</span> <span class="mi">100</span><span class="n">m</span>
            <span class="nl">memory:</span> <span class="mi">200</span><span class="n">Mi</span>
      <span class="nl">terminationGracePeriodSeconds:</span> <span class="mi">30</span>
</pre></div>


<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">create</span> <span class="na">-f</span> <span class="nx">daemonset.yaml</span>
<span class="nx">daemonset.apps</span> <span class="s2">&quot;example-daemonset&quot;</span> <span class="nx">created</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">daemonsets</span>
<span class="nb">NAME</span>                <span class="nx">DESIRED</span>   <span class="nx">CURRENT</span>   <span class="nb">READY</span>     <span class="nb">UP</span><span class="na">-TO-DATE</span>   <span class="nx">AVAILABLE</span>   <span class="nx">NODE</span> <span class="nx">SELECTOR</span>   <span class="nx">AGE</span>
<span class="nx">example</span><span class="na">-daemonset</span>   <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">1</span>           <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>          <span class="mi">12</span><span class="nb">s</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">pods</span>
<span class="nb">NAME</span>                                <span class="nb">READY</span>     <span class="nb">STATUS</span>      <span class="nx">RESTARTS</span>   <span class="nx">AGE</span>
<span class="nx">example</span><span class="na">-daemonset-dchr2</span>             <span class="mi">1</span><span class="p">/</span><span class="nx">1</span>       <span class="nb">Running</span>     <span class="mi">0</span>          <span class="mi">20</span><span class="nb">s</span>
<span class="nx">finalcountdown</span><span class="na">-xgwpk</span>                <span class="mi">0</span><span class="p">/</span><span class="nx">1</span>       <span class="nx">Completed</span>   <span class="mi">0</span>          <span class="mi">10</span><span class="nx">m</span>
<span class="nx">hellocron</span><span class="o">-</span><span class="mi">1551613860</span><span class="na">-rthrc</span>          <span class="mi">0</span><span class="p">/</span><span class="nx">1</span>       <span class="nx">Completed</span>   <span class="mi">0</span>          <span class="mi">6</span><span class="nx">m</span>
<span class="nx">hellocron</span><span class="o">-</span><span class="mi">1551613920</span><span class="na">-sc4sc</span>          <span class="mi">0</span><span class="p">/</span><span class="nx">1</span>       <span class="nx">Completed</span>   <span class="mi">0</span>          <span class="mi">5</span><span class="nx">m</span>
<span class="nx">logreader</span><span class="o">-</span><span class="mi">86</span><span class="nx">bfcfbf76</span><span class="o">-</span><span class="mi">4</span><span class="nx">ghzs</span>          <span class="mi">1</span><span class="p">/</span><span class="nx">1</span>       <span class="nb">Running</span>     <span class="mi">0</span>          <span class="mi">2</span><span class="nx">h</span>
<span class="nx">logreader</span><span class="na">-dynamic-f49f5fcdb-nl7dt</span>   <span class="mi">1</span><span class="p">/</span><span class="nx">1</span>       <span class="nb">Running</span>     <span class="mi">0</span>          <span class="mi">2</span><span class="nx">h</span>
<span class="nx">secretreader</span><span class="o">-</span><span class="mi">554</span><span class="nx">bbcd469</span><span class="na">-xfthd</span>       <span class="mi">1</span><span class="p">/</span><span class="nx">1</span>       <span class="nb">Running</span>     <span class="mi">0</span>          <span class="mi">13</span><span class="nx">m</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">nodes</span> <span class="o">--</span><span class="nx">show</span><span class="na">-labels</span>
<span class="nb">NAME</span>       <span class="nb">STATUS</span>    <span class="nx">ROLES</span>     <span class="nx">AGE</span>       <span class="nb">VERSION</span>   <span class="nx">LABELS</span>
<span class="nx">minikube</span>   <span class="nb">Ready</span>     <span class="nx">master</span>    <span class="mi">2</span><span class="nb">d</span>        <span class="nx">v1.13.3</span>   <span class="nx">beta.kubernetes.io</span><span class="p">/</span><span class="nx">arch</span><span class="o">=</span><span class="nx">amd64</span><span class="p">,</span><span class="nx">beta.kubernetes.io</span><span class="p">/</span><span class="nx">os</span><span class="o">=</span><span class="nx">linux</span><span class="p">,</span><span class="nx">kubernetes.io</span><span class="p">/</span><span class="nb">hostname</span><span class="o">=</span><span class="nx">minikube</span><span class="p">,</span><span class="nx">node</span><span class="na">-role.kubernetes.io</span><span class="p">/</span><span class="nx">master</span><span class="o">=</span>
</pre></div>


<p>nodeSelector: development </p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">daemonset</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">development</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta2</span>
<span class="nl">kind:</span> <span class="n">DaemonSet</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset2</span>
  <span class="nl">namespace:</span> <span class="k">default</span>
  <span class="nl">labels:</span>
    <span class="n">k8s</span><span class="o">-</span><span class="n">app</span><span class="o">:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset2</span>
<span class="nl">spec:</span>
  <span class="nl">selector:</span>
    <span class="nl">matchLabels:</span>
      <span class="nl">name:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset2</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">name:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset2</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">example</span><span class="o">-</span><span class="n">daemonset2</span>
        <span class="nl">image:</span> <span class="n">busybox</span>
        <span class="nl">args:</span>
        <span class="o">-</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
        <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
        <span class="o">-</span> <span class="n">date</span><span class="p">;</span> <span class="n">sleep</span> <span class="mi">1000</span>
        <span class="nl">resources:</span>
          <span class="nl">limits:</span>
            <span class="nl">memory:</span> <span class="mi">200</span><span class="n">Mi</span>
          <span class="nl">requests:</span>
            <span class="nl">cpu:</span> <span class="mi">100</span><span class="n">m</span>
            <span class="nl">memory:</span> <span class="mi">200</span><span class="n">Mi</span>
      <span class="nl">terminationGracePeriodSeconds:</span> <span class="mi">30</span>
      <span class="nl">nodeSelector:</span> 
        <span class="n">infra</span><span class="o">:</span> <span class="s">&quot;development&quot;</span>
</pre></div>


<p>nodeSelector: production</p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">daemonset</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">prod</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta2</span>
<span class="nl">kind:</span> <span class="n">DaemonSet</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">prod</span><span class="o">-</span><span class="n">daemonset</span>
  <span class="nl">namespace:</span> <span class="k">default</span>
  <span class="nl">labels:</span>
    <span class="n">k8s</span><span class="o">-</span><span class="n">app</span><span class="o">:</span> <span class="n">prod</span><span class="o">-</span><span class="n">daemonset</span>
<span class="nl">spec:</span>
  <span class="nl">selector:</span>
    <span class="nl">matchLabels:</span>
      <span class="nl">name:</span> <span class="n">prod</span><span class="o">-</span><span class="n">daemonset</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">name:</span> <span class="n">prod</span><span class="o">-</span><span class="n">daemonset</span>
    <span class="nl">spec:</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">prod</span><span class="o">-</span><span class="n">daemonset</span>
        <span class="nl">image:</span> <span class="n">busybox</span>
        <span class="nl">args:</span>
        <span class="o">-</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
        <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
        <span class="o">-</span> <span class="n">date</span><span class="p">;</span> <span class="n">sleep</span> <span class="mi">1000</span>
        <span class="nl">resources:</span>
          <span class="nl">limits:</span>
            <span class="nl">memory:</span> <span class="mi">200</span><span class="n">Mi</span>
          <span class="nl">requests:</span>
            <span class="nl">cpu:</span> <span class="mi">100</span><span class="n">m</span>
            <span class="nl">memory:</span> <span class="mi">200</span><span class="n">Mi</span>
      <span class="nl">terminationGracePeriodSeconds:</span> <span class="mi">30</span>
      <span class="nl">nodeSelector:</span> 
        <span class="n">infra</span><span class="o">:</span> <span class="s">&quot;production&quot;</span>
</pre></div>


<div class="hlcode"><pre><span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">create</span> <span class="na">-f</span> <span class="nx">daemonset</span><span class="na">-infra-prod.yaml</span>
<span class="nx">daemonset.apps</span> <span class="s2">&quot;prod-daemonset&quot;</span> <span class="nx">created</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">daemonsets</span>
<span class="nb">NAME</span>                 <span class="nx">DESIRED</span>   <span class="nx">CURRENT</span>   <span class="nb">READY</span>     <span class="nb">UP</span><span class="na">-TO-DATE</span>   <span class="nx">AVAILABLE</span>   <span class="nx">NODE</span> <span class="nx">SELECTOR</span>       <span class="nx">AGE</span>
<span class="nx">example</span><span class="na">-daemonset</span>    <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">1</span>            <span class="mi">1</span>           <span class="o">&lt;</span><span class="kc">none</span><span class="o">&gt;</span>              <span class="mi">11</span><span class="nx">m</span>
<span class="nx">example</span><span class="na">-daemonset2</span>   <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>            <span class="mi">0</span>           <span class="n">infra</span><span class="o">=</span><span class="nx">development</span>   <span class="mi">8</span><span class="nx">m</span>
<span class="nx">prod</span><span class="na">-daemonset</span>       <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>            <span class="mi">0</span>           <span class="n">infra</span><span class="o">=</span><span class="nx">production</span>    <span class="mi">7</span><span class="nb">s</span>
<span class="nx">xhxu</span><span class="na">-mac</span><span class="p">:</span><span class="nx">test</span> <span class="nx">xhxu</span><span class="err">$</span> <span class="nx">kubectl</span> <span class="nb">get</span> <span class="nx">nodes</span> <span class="o">--</span><span class="nx">show</span><span class="na">-labels</span>
<span class="nb">NAME</span>       <span class="nb">STATUS</span>    <span class="nx">ROLES</span>     <span class="nx">AGE</span>       <span class="nb">VERSION</span>   <span class="nx">LABELS</span>
<span class="nx">minikube</span>   <span class="nb">Ready</span>     <span class="nx">master</span>    <span class="mi">2</span><span class="nb">d</span>        <span class="nx">v1.13.3</span>   <span class="nx">beta.kubernetes.io</span><span class="p">/</span><span class="nx">arch</span><span class="o">=</span><span class="nx">amd64</span><span class="p">,</span><span class="nx">beta.kubernetes.io</span><span class="p">/</span><span class="nx">os</span><span class="o">=</span><span class="nx">linux</span><span class="p">,</span><span class="nx">kubernetes.io</span><span class="p">/</span><span class="nb">hostname</span><span class="o">=</span><span class="nx">minikube</span><span class="p">,</span><span class="nx">node</span><span class="na">-role.kubernetes.io</span><span class="p">/</span><span class="nx">master</span><span class="o">=</span>
</pre></div>


<h3 id="stateful">stateful</h3>
<div class="hlcode"><pre><span class="n">vim</span> <span class="n">statefulset</span><span class="p">.</span><span class="n">yaml</span>

<span class="nl">apiVersion:</span> <span class="n">v1</span>
<span class="nl">kind:</span> <span class="n">Service</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">zk</span><span class="o">-</span><span class="n">cs</span>
  <span class="nl">labels:</span>
    <span class="nl">app:</span> <span class="n">zk</span>
<span class="nl">spec:</span>
  <span class="nl">ports:</span>
  <span class="o">-</span> <span class="n">port</span><span class="o">:</span> <span class="mi">2181</span>
    <span class="nl">name:</span> <span class="n">client</span>
  <span class="nl">selector:</span>
    <span class="nl">app:</span> <span class="n">zk</span>
<span class="o">---</span>
<span class="nl">apiVersion:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="nl">kind:</span> <span class="n">StatefulSet</span>
<span class="nl">metadata:</span>
  <span class="nl">name:</span> <span class="n">zk</span>
<span class="nl">spec:</span>
  <span class="nl">serviceName:</span> <span class="n">zk</span><span class="o">-</span><span class="n">hs</span>
  <span class="nl">replicas:</span> <span class="mi">1</span>
  <span class="nl">podManagementPolicy:</span> <span class="n">Parallel</span>
  <span class="nl">updateStrategy:</span>
    <span class="nl">type:</span> <span class="n">RollingUpdate</span>
  <span class="nl">template:</span>
    <span class="nl">metadata:</span>
      <span class="nl">labels:</span>
        <span class="nl">app:</span> <span class="n">zk</span>
    <span class="nl">spec:</span>
      <span class="nl">affinity:</span>
        <span class="nl">podAntiAffinity:</span>
          <span class="nl">requiredDuringSchedulingIgnoredDuringExecution:</span>
            <span class="o">-</span> <span class="n">labelSelector</span><span class="o">:</span>
                <span class="nl">matchExpressions:</span>
                  <span class="o">-</span> <span class="n">key</span><span class="o">:</span> <span class="s">&quot;app&quot;</span>
                    <span class="nl">operator:</span> <span class="n">In</span>
                    <span class="nl">values:</span>
                    <span class="o">-</span> <span class="n">none</span>
              <span class="nl">topologyKey:</span> <span class="s">&quot;kubernetes.io/hostname&quot;</span>
      <span class="nl">containers:</span>
      <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">kubernetes</span><span class="o">-</span><span class="n">zookeeper</span>
        <span class="nl">imagePullPolicy:</span> <span class="n">Always</span>
        <span class="nl">image:</span> <span class="s">&quot;gcr.io/google_containers/kubernetes-zookeeper:1.0-3.4.10&quot;</span>
        <span class="nl">resources:</span>
          <span class="nl">requests:</span>
            <span class="nl">memory:</span> <span class="s">&quot;500Mi&quot;</span>
            <span class="nl">cpu:</span> <span class="s">&quot;0.5&quot;</span>
        <span class="nl">ports:</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">2181</span>
          <span class="nl">name:</span> <span class="n">client</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">2888</span>
          <span class="nl">name:</span> <span class="n">server</span>
        <span class="o">-</span> <span class="n">containerPort</span><span class="o">:</span> <span class="mi">3888</span>
          <span class="nl">name:</span> <span class="n">leader</span><span class="o">-</span><span class="n">election</span>
        <span class="nl">command:</span>
        <span class="o">-</span> <span class="n">sh</span>
        <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
        <span class="o">-</span> <span class="s">&quot;start-zookeeper \</span>
<span class="s">          --servers=1 \</span>
<span class="s">          --data_dir=/var/lib/zookeeper/data \</span>
<span class="s">          --data_log_dir=/var/lib/zookeeper/data/log \</span>
<span class="s">          --conf_dir=/opt/zookeeper/conf \</span>
<span class="s">          --client_port=2181 \</span>
<span class="s">          --election_port=3888 \</span>
<span class="s">          --server_port=2888 \</span>
<span class="s">          --tick_time=2000 \</span>
<span class="s">          --init_limit=10 \</span>
<span class="s">          --sync_limit=5 \</span>
<span class="s">          --heap=512M \</span>
<span class="s">          --max_client_cnxns=60 \</span>
<span class="s">          --snap_retain_count=3 \</span>
<span class="s">          --purge_interval=12 \</span>
<span class="s">          --max_session_timeout=40000 \</span>
<span class="s">          --min_session_timeout=4000 \</span>
<span class="s">          --log_level=INFO&quot;</span>
        <span class="nl">readinessProbe:</span>
          <span class="nl">exec:</span>
            <span class="nl">command:</span>
            <span class="o">-</span> <span class="n">sh</span>
            <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
            <span class="o">-</span> <span class="s">&quot;zookeeper-ready 2181&quot;</span>
          <span class="nl">initialDelaySeconds:</span> <span class="mi">10</span>
          <span class="nl">timeoutSeconds:</span> <span class="mi">5</span>
        <span class="nl">livenessProbe:</span>
          <span class="nl">exec:</span>
            <span class="nl">command:</span>
            <span class="o">-</span> <span class="n">sh</span>
            <span class="o">-</span> <span class="o">-</span><span class="n">c</span>
            <span class="o">-</span> <span class="s">&quot;zookeeper-ready 2181&quot;</span>
          <span class="nl">initialDelaySeconds:</span> <span class="mi">10</span>
          <span class="nl">timeoutSeconds:</span> <span class="mi">5</span>
        <span class="nl">volumeMounts:</span>
        <span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">datadir</span>
          <span class="nl">mountPath:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">zookeeper</span>
      <span class="nl">securityContext:</span>
        <span class="nl">runAsUser:</span> <span class="mi">1000</span>
        <span class="nl">fsGroup:</span> <span class="mi">1000</span>
  <span class="nl">volumeClaimTemplates:</span>
  <span class="o">-</span> <span class="n">metadata</span><span class="o">:</span>
      <span class="nl">name:</span> <span class="n">datadir</span>
    <span class="nl">spec:</span>
      <span class="nl">accessModes:</span> <span class="p">[</span> <span class="s">&quot;ReadWriteOnce&quot;</span> <span class="p">]</span>
      <span class="nl">resources:</span>
        <span class="nl">requests:</span>
          <span class="nl">storage:</span> <span class="mi">10</span><span class="n">Gi</span>
</pre></div>


<div class="hlcode"><pre><span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">statefulset</span><span class="p">.</span><span class="n">yaml</span>
<span class="n">service</span> <span class="s">&quot;zk-cs&quot;</span> <span class="n">created</span>
<span class="n">statefulset</span><span class="p">.</span><span class="n">apps</span> <span class="s">&quot;zk&quot;</span> <span class="n">created</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">statefulsets</span>
<span class="n">NAME</span>      <span class="n">DESIRED</span>   <span class="n">CURRENT</span>   <span class="n">AGE</span>
<span class="n">zk</span>        <span class="mi">1</span>         <span class="mi">1</span>         <span class="mi">13</span><span class="n">s</span>

<span class="n">xhxu</span><span class="o">-</span><span class="n">mac</span><span class="o">:</span><span class="n">test</span> <span class="n">xhxu</span><span class="err">$</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">pods</span>
<span class="n">zk</span><span class="o">-</span><span class="mi">0</span>                                <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">ContainerCreating</span>   <span class="mi">0</span>          <span class="mi">1</span><span class="n">m</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-11-05 22:57:24</p>
      </span>
    </div>

    
    
  </body>
</html>