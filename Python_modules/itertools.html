<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>itertools - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Python_modules">Python_modules</a>&nbsp;&#187;&nbsp;itertools
    <span class="updated">Page Updated&nbsp;
      2018-10-05 02:58
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">itertools</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#itertools">itertools</a><ul>
<li><a href="#chain">chain()</a></li>
<li><a href="#combinations">combinations()</a></li>
<li><a href="#combinations_with_replacement">combinations_with_replacement()</a></li>
<li><a href="#compress">compress()</a></li>
<li><a href="#islice">islice()</a></li>
<li><a href="#groupby">groupby()</a></li>
<li><a href="#permutations">permutations()</a></li>
<li><a href="#product">product()</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="itertools">itertools</h1>
<h2 id="chain">chain()</h2>
<p>连接两个循环器</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">chain</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="n">chain</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">itertools</span><span class="p">.</span><span class="n">chain</span> <span class="n">at</span> <span class="mh">0x10c411b70</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="n">list</span><span class="p">(</span><span class="n">chain</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>


<h2 id="combinations">combinations()</h2>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">combinations</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">:</span> <span class="n">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="err">&#39;</span><span class="n">abc</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">:</span> <span class="p">[(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">)]</span>
</pre></div>


<h2 id="combinations_with_replacement">combinations_with_replacement()</h2>
<p>只允许两次选出的元素重复</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">combinations_with_replacement</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">:</span> <span class="n">list</span><span class="p">(</span><span class="n">combinations_with_replacement</span><span class="p">(</span><span class="err">&#39;</span><span class="n">abc</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">:</span> <span class="p">[(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">)]</span>
</pre></div>


<h2 id="compress">compress()</h2>
<p>根据[1, 1, 1, 0] 的真假值情况，选择第一个参数“ABCD”中的元素</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">compress</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">:</span> <span class="n">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="err">&#39;</span><span class="n">ABCD</span><span class="err">&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">:</span> <span class="p">[</span><span class="sc">&#39;A&#39;</span><span class="p">,</span> <span class="sc">&#39;B&#39;</span><span class="p">,</span> <span class="sc">&#39;C&#39;</span><span class="p">]</span>
</pre></div>


<h2 id="islice">islice()</h2>
<p>切片操作， 返回一个迭代器</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">42</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">islice</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">43</span><span class="p">]</span><span class="o">:</span> <span class="n">l</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">44</span><span class="p">]</span><span class="o">:</span> <span class="n">l</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">44</span><span class="p">]</span><span class="o">:</span> <span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]</span><span class="o">:</span> <span class="n">t</span> <span class="o">=</span> <span class="n">iter</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">46</span><span class="p">]</span><span class="o">:</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">islice</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">:</span>
    <span class="p">...</span><span class="o">:</span>     <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="p">...</span><span class="o">:</span>
<span class="mi">5</span>
<span class="mi">6</span>
<span class="mi">7</span>
<span class="mi">8</span>
<span class="mi">9</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">47</span><span class="p">]</span><span class="o">:</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">t</span><span class="o">:</span>
    <span class="p">...</span><span class="o">:</span>     <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="p">...</span><span class="o">:</span>
<span class="mi">10</span>
<span class="mi">11</span>
<span class="mi">12</span>
<span class="mi">13</span>
<span class="mi">14</span>
<span class="mi">15</span>
<span class="mi">16</span>
<span class="mi">17</span>
<span class="mi">18</span>
<span class="mi">19</span>
</pre></div>


<h2 id="groupby">groupby()</h2>
<p>将key()函数作用于原循环器的各个元素，根据key函数结果，将拥有相同函数结果的元素分配到一个新的循环器中。</p>
<div class="hlcode"><pre><span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="o">*</span>

<span class="n">def</span> <span class="n">height_class</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">:</span>
    <span class="k">if</span> <span class="n">h</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="o">:</span>
        <span class="k">return</span> <span class="err">&#39;</span><span class="n">tall</span><span class="err">&#39;</span>
    <span class="n">elif</span> <span class="n">h</span> <span class="o">&lt;</span> <span class="mi">160</span><span class="o">:</span>
        <span class="k">return</span> <span class="err">&#39;</span><span class="kt">short</span><span class="err">&#39;</span>
    <span class="nl">else:</span>
        <span class="k">return</span> <span class="err">&#39;</span><span class="n">middle</span><span class="err">&#39;</span>

<span class="n">friends</span> <span class="o">=</span> <span class="p">[</span><span class="mi">191</span><span class="p">,</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span> <span class="mi">154</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">177</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">187</span><span class="p">,</span> <span class="mi">190</span><span class="p">]</span>

<span class="n">friends</span> <span class="o">=</span> <span class="n">sorted</span><span class="p">(</span><span class="n">friends</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">height_class</span><span class="p">)</span>

<span class="k">for</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="n">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">friends</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">height_class</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span>

<span class="n">middle</span>
<span class="p">[</span><span class="mi">170</span><span class="p">,</span> <span class="mi">177</span><span class="p">]</span>
<span class="kt">short</span>
<span class="p">[</span><span class="mi">158</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span> <span class="mi">154</span><span class="p">]</span>
<span class="n">tall</span>
<span class="p">[</span><span class="mi">191</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">187</span><span class="p">,</span> <span class="mi">190</span><span class="p">]</span>
</pre></div>


<h2 id="permutations">permutations()</h2>
<p>从'abcd'中挑选两个元素称为新的循环</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">permutations</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">:</span> <span class="n">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="err">&#39;</span><span class="n">abc</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">:</span> <span class="p">[(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">)]</span>
</pre></div>


<h2 id="product">product()</h2>
<p>多个循环器集合的笛卡尔积，相当于嵌套循环</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span> <span class="n">from</span> <span class="n">itertools</span> <span class="n">import</span> <span class="n">product</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span> <span class="n">product</span><span class="p">(</span><span class="err">&#39;</span><span class="n">abc</span><span class="err">&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">itertools</span><span class="p">.</span><span class="n">product</span> <span class="n">at</span> <span class="mh">0x10a399ea0</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="n">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="err">&#39;</span><span class="n">abc</span><span class="err">&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="p">[(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-11-25 09:39:55</p>
      </span>
    </div>

    
    
  </body>
</html>