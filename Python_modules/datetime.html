<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>datetime - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Python_modules">Python_modules</a>&nbsp;&#187;&nbsp;datetime
    <span class="updated">Page Updated&nbsp;
      2018-07-25 15:18
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">datetime</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#datetime">datetime</a><ul>
<li><a href="#date">.date 日期</a><ul>
<li><a href="#ctime">ctime()</a></li>
<li><a href="#fromtimestamptimestamp">fromtimestamp(timestamp)</a></li>
<li><a href="#isocalendar">isocalendar()</a></li>
<li><a href="#isoformat">isoformat()</a></li>
<li><a href="#isoweekday">isoweekday()</a></li>
<li><a href="#replaceyearmonthday">replace(year,month,day)</a></li>
<li><a href="#strftimeformat">strftime(format)</a><ul>
<li><a href="#_1">日期格式化符号</a></li>
</ul>
</li>
<li><a href="#timetuple">timetuple()</a></li>
<li><a href="#weekday">weekday()</a></li>
</ul>
</li>
<li><a href="#datetime_1">.datetime 日期时间精确到秒</a><ul>
<li><a href="#ctime_1">ctime()</a></li>
<li><a href="#today">today()</a></li>
<li><a href="#now">now() 当前时间</a></li>
<li><a href="#utcnow">utcnow()</a></li>
<li><a href="#fromtimestamp">fromtimestamp()</a></li>
<li><a href="#replace">replace()</a></li>
<li><a href="#strftime">strftime()</a></li>
<li><a href="#strptime">strptime()</a></li>
<li><a href="#timestamp">timestamp()</a></li>
</ul>
</li>
<li><a href="#time">.time 具体时间精确到秒</a><ul>
<li><a href="#replace_1">replace()</a></li>
<li><a href="#strftimeformat_1">strftime(format)</a></li>
<li><a href="#tzname">tzname()</a></li>
<li><a href="#utcoffset">utcoffset()</a></li>
</ul>
</li>
<li><a href="#timedelta">.timedelta 两个时间点的间隔</a></li>
<li><a href="#tzinfo">.tzinfo 时区的相关信息</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="datetime">datetime</h1>
<p>datetime包是基于time包的一个高级包。</p>
<p>datetime 可以理解为date和time 两个组成部分</p>
<p>可以分开管理datetime.date类和datetime.time类</p>
<p>也可以合在一起datetime.datetime类</p>
<p>datetime模块定义了5个类</p>
<h2 id="date">.date 日期</h2>
<p>date类有三个参数,datetime.date(year,month,day)，返回year-month-day</p>
<h3 id="ctime">ctime()</h3>
<p>datetime.date.ctime(),返回格式如 Sun Apr 16 00:00:00 2017</p>
<h3 id="fromtimestamptimestamp">fromtimestamp(timestamp)</h3>
<p>根据给定的时间戮，返回一个date对象；datetime.date.today()作用相同</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="mi">1537550244</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
</pre></div>


<h3 id="isocalendar">isocalendar()</h3>
<p>datetime.date.isocalendar():返回格式如(year，month，day)的元组,(2017, 15, 6)</p>
<h3 id="isoformat">isoformat()</h3>
<p>datetime.date.isoformat()：返回格式如YYYY-MM-DD</p>
<h3 id="isoweekday">isoweekday()</h3>
<p>datetime.date.isoweekday()：返回给定日期的星期（0-6），星期一=0，星期日=6</p>
<h3 id="replaceyearmonthday">replace(year,month,day)</h3>
<p>datetime.date.replace(year,month,day)：替换给定日期，但不改变原日期</p>
<h3 id="strftimeformat">strftime(format)</h3>
<p>datetime.date.strftime(format):把日期时间按照给定的format进行格式化。</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]</span><span class="o">:</span> <span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]</span><span class="o">:</span> <span class="n">x</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="err">&#39;</span><span class="o">%</span><span class="n">Y</span><span class="o">/%</span><span class="n">m</span><span class="o">/%</span><span class="n">d</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span><span class="o">:</span> <span class="err">&#39;</span><span class="mi">2018</span><span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">14</span><span class="err">&#39;</span>
</pre></div>


<h4 id="_1">日期格式化符号</h4>
<div class="hlcode"><pre><span class="c">%y 两位数的年份表示（00-99）</span>

<span class="c">%Y 四位数的年份表示（000-9999）</span>

<span class="c">%m 月份（01-12）</span>

<span class="c">%d 月内中的一天（0-31）</span>

<span class="c">%H 24小时制小时数（0-23）</span>

<span class="c">%I 12小时制小时数（01-12）</span>

<span class="c">%M 分钟数（00=59）</span>

<span class="c">%S 秒（00-59）</span>

<span class="c">%a 本地简化星期名称</span>

<span class="c">%A 本地完整星期名称</span>

<span class="c">%b 本地简化的月份名称</span>

<span class="c">%B 本地完整的月份名称</span>

<span class="c">%c 本地相应的日期表示和时间表示</span>

<span class="c">%j 年内的一天（001-366）</span>

<span class="c">%p 本地A.M.或P.M.的等价符</span>

<span class="c">%U 一年中的星期数（00-53）星期天为星期的开始</span>

<span class="c">%w 星期（0-6），星期天为星期的开始</span>

<span class="c">%W 一年中的星期数（00-53）星期一为星期的开始</span>

<span class="c">%x 本地相应的日期表示</span>

<span class="c">%X 本地相应的时间表示</span>

<span class="c">%Z 当前时区的名称</span>

<span class="c">%% %号本身</span>
</pre></div>


<h3 id="timetuple">timetuple()</h3>
<p>datetime.date.timetuple()：返回日期对应的time.struct_time对象</p>
<p>time.struct_time(tm_year=2017, tm_mon=4, tm_mday=15, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=5, tm_yday=105, tm_isdst=-1)</p>
<h3 id="weekday">weekday()</h3>
<p>datetime.date.weekday()：返回日期的星期</p>
<h2 id="datetime_1">.datetime 日期时间精确到秒</h2>
<p>datetime类有很多参数，datetime(year, month, day[, hour[, minute[, second[, microsecond[,tzinfo]]]]])，返回年月日，时分秒</p>
<h3 id="ctime_1">ctime()</h3>
<p>datetime.datetime.ctime()</p>
<h3 id="today">today()</h3>
<p>返回本地时区当前时间的datetime对象</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">111</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">today</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">111</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">909234</span><span class="p">)</span>
</pre></div>


<h3 id="now">now() 当前时间</h3>
<p>datetime.datetime.now().date()：返回当前日期时间的日期部分</p>
<p>datetime.datetime.now().time()：返回当前日期时间的时间部分</p>
<ul>
<li>当前系统时间</li>
</ul>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">596733</span><span class="p">)</span>
</pre></div>


<ul>
<li>当前时间+3天</li>
</ul>
<div class="hlcode"><pre><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">124379</span><span class="p">)</span>
</pre></div>


<ul>
<li>当前时间-3天</li>
</ul>
<div class="hlcode"><pre><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">474406</span><span class="p">)</span>
</pre></div>


<ul>
<li>当前时间+3小时</li>
</ul>
<div class="hlcode"><pre><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">678310</span><span class="p">)</span>
</pre></div>


<ul>
<li>当前时间+30分钟 </li>
</ul>
<div class="hlcode"><pre><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">392370</span><span class="p">)</span>
</pre></div>


<h3 id="utcnow">utcnow()</h3>
<p>没有时区的当前时间</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">112</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">112</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">764513</span><span class="p">)</span>
</pre></div>


<h3 id="fromtimestamp">fromtimestamp()</h3>
<p>从一个时间戳返回一个datetime对象，</p>
<p>datetime.datetime.fromtimestamp()</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">116</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="mi">1537550244</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">116</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</pre></div>


<h3 id="replace">replace()</h3>
<p>修改并返回新的时间</p>
<p>datetime.datetime.replace()</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">130</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">504532</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">130</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">504532</span><span class="p">)</span>
</pre></div>


<h3 id="strftime">strftime()</h3>
<p>datetime.datetime.strftime()：由日期格式转化为字符串格式</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">137</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">strftime</span><span class="p">(</span><span class="err">&#39;</span><span class="o">%</span><span class="n">b</span><span class="o">-%</span><span class="n">d</span><span class="o">-%</span><span class="n">Y</span> <span class="o">%</span><span class="n">H</span><span class="o">:%</span><span class="n">M</span><span class="o">:%</span><span class="n">S</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">137</span><span class="p">]</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">Jan</span><span class="o">-</span><span class="mi">30</span><span class="o">-</span><span class="mi">2019</span> <span class="mi">13</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">15</span><span class="err">&#39;</span>
</pre></div>


<h3 id="strptime">strptime()</h3>
<p>datetime.datetime.strptime():由字符串格式转化为日期格式</p>
<div class="hlcode"><pre><span class="n">from</span> <span class="n">datetime</span> <span class="n">import</span> <span class="n">datetime</span>

<span class="n">format</span> <span class="o">=</span> <span class="s">&quot;output-%Y-%m-%d-%H%M%S.txt&quot;</span>
<span class="n">str</span> <span class="o">=</span> <span class="s">&quot;output-1990-3-14-001000.txt&quot;</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">format</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="mi">1990</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">14</span> <span class="mo">00</span><span class="o">:</span><span class="mi">10</span><span class="o">:</span><span class="mo">00</span>
</pre></div>


<h3 id="timestamp">timestamp()</h3>
<p>返回一个到微秒的时间戳</p>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">119</span><span class="p">]</span><span class="o">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">119</span><span class="p">]</span><span class="o">:</span> <span class="mf">1548826785.390896</span>
</pre></div>


<h2 id="time">.time 具体时间精确到秒</h2>
<p>time类有5个参数，datetime.time(hour,minute,second,microsecond,tzoninfo),返回08:29:30</p>
<h3 id="replace_1">replace()</h3>
<p>datetime.time.replace()</p>
<h3 id="strftimeformat_1">strftime(format)</h3>
<p>datetime.time.strftime(format):按照format格式返回时间</p>
<h3 id="tzname">tzname()</h3>
<p>datetime.time.tzname()：返回时区名字</p>
<h3 id="utcoffset">utcoffset()</h3>
<p>datetime.time.utcoffset()：返回时区的时间偏移量</p>
<h2 id="timedelta">.timedelta 两个时间点的间隔</h2>
<p>datetime.datetime.timedelta用于计算两个日期之间的差值</p>
<div class="hlcode"><pre><span class="n">import</span> <span class="n">datetime</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">t_next</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mo">00</span><span class="p">)</span>
<span class="n">delta1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
<span class="n">delta2</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">t</span> <span class="o">+</span> <span class="n">delta1</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">t</span> <span class="o">+</span> <span class="n">delta2</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">t_next</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">11</span> <span class="mi">20</span><span class="o">:</span><span class="mi">40</span><span class="o">:</span><span class="mo">00</span>
<span class="mi">2017</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="mi">20</span><span class="o">:</span><span class="mi">30</span><span class="o">:</span><span class="mo">00</span>
<span class="mi">0</span><span class="o">:</span><span class="mi">30</span><span class="o">:</span><span class="mo">00</span>
</pre></div>


<h2 id="tzinfo">.tzinfo 时区的相关信息</h2>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-07-04 17:13:11</p>
      </span>
    </div>

    
    
  </body>
</html>