<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>standard_object - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#JavaScript">JavaScript</a>&nbsp;&#187;&nbsp;standard_object
    <span class="updated">Page Updated&nbsp;
      2018-06-19 13:41
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">standard_object</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">标准对象</a><ul>
<li><a href="#_2">判断对象</a></li>
<li><a href="#_3">包装对象</a></li>
<li><a href="#_4">总结</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">标准对象</h1>
<h2 id="_2">判断对象</h2>
<p>为了区分对象的类型，我们用<code>typeof</code>操作符获取对象的类型，它总是返回一个字符串：</p>
<div class="hlcode"><pre><span class="k">typeof</span> <span class="mi">123</span><span class="p">;</span> <span class="c1">// &#39;number&#39;</span>
<span class="k">typeof</span> <span class="kc">NaN</span><span class="p">;</span> <span class="c1">// &#39;number&#39;</span>
<span class="k">typeof</span> <span class="s1">&#39;str&#39;</span><span class="p">;</span> <span class="c1">// &#39;string&#39;</span>
<span class="k">typeof</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// &#39;boolean&#39;</span>
<span class="k">typeof</span> <span class="kc">undefined</span><span class="p">;</span> <span class="c1">// &#39;undefined&#39;</span>
<span class="k">typeof</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">;</span> <span class="c1">// &#39;function&#39;</span>
<span class="k">typeof</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// &#39;object&#39;</span>
<span class="k">typeof</span> <span class="cp">[]</span><span class="p">;</span> <span class="c1">// &#39;object&#39;</span>
<span class="k">typeof</span> <span class="p">{};</span> <span class="c1">// &#39;object&#39;</span>
</pre></div>


<h2 id="_3">包装对象</h2>
<p>在JavaScript中，字符串也区分<code>string</code>类型和它的包装类型。包装对象用<code>new</code>创建：</p>
<div class="hlcode"><pre><span class="n">var</span> <span class="n">n</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span> <span class="c1">// 123,生成了新的包装类型</span>
<span class="n">var</span> <span class="n">b</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Boolean</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// true,生成了新的包装类型</span>
<span class="n">var</span> <span class="n">s</span> <span class="o">=</span> <span class="n">new</span> <span class="n">String</span><span class="p">(</span><span class="err">&#39;</span><span class="n">str</span><span class="err">&#39;</span><span class="p">);</span> <span class="c1">// &#39;str&#39;,生成了新的包装类型</span>
</pre></div>


<p>虽然包装对象看上去和原来的值一模一样，显示出来也是一模一样，但他们的类型已经变为<code>object</code>了！所以，包装对象和原始值用<code>===</code>比较会返回<code>false</code>：</p>
<div class="hlcode"><pre><span class="n">typeof</span> <span class="n">new</span> <span class="nf">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span> <span class="c1">// &#39;object&#39;</span>
<span class="n">new</span> <span class="n">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="o">===</span> <span class="mi">123</span><span class="p">;</span> <span class="c1">// false</span>

<span class="n">typeof</span> <span class="n">new</span> <span class="nf">Boolean</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// &#39;object&#39;</span>
<span class="n">new</span> <span class="n">Boolean</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="o">===</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// false</span>

<span class="n">typeof</span> <span class="n">new</span> <span class="nf">String</span><span class="p">(</span><span class="err">&#39;</span><span class="n">str</span><span class="err">&#39;</span><span class="p">);</span> <span class="c1">// &#39;object&#39;</span>
<span class="n">new</span> <span class="n">String</span><span class="p">(</span><span class="err">&#39;</span><span class="n">str</span><span class="err">&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="err">&#39;</span><span class="n">str</span><span class="err">&#39;</span><span class="p">;</span> <span class="c1">// false</span>
</pre></div>


<p>如果我们在使用<code>Number</code>、<code>Boolean</code>和<code>String</code>时，没有写<code>new</code>会发生什么情况？</p>
<p>此时，<code>Number()</code>、<code>Boolean</code>和<code>String()</code>被当做普通函数，把任何类型的数据转换为<code>number</code>、<code>boolean</code>和<code>string</code>类型（注意不是其包装类型）：</p>
<div class="hlcode"><pre><span class="n">var</span> <span class="n">n</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">123</span><span class="err">&#39;</span><span class="p">);</span> <span class="c1">// 123，相当于parseInt()或parseFloat()</span>
<span class="n">typeof</span> <span class="n">n</span><span class="p">;</span> <span class="c1">// &#39;number&#39;</span>

<span class="n">var</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="err">&#39;</span><span class="nb">true</span><span class="err">&#39;</span><span class="p">);</span> <span class="c1">// true</span>
<span class="n">typeof</span> <span class="n">b</span><span class="p">;</span> <span class="c1">// &#39;boolean&#39;</span>

<span class="n">var</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="err">&#39;</span><span class="nb">false</span><span class="err">&#39;</span><span class="p">);</span> <span class="c1">// true! &#39;false&#39;字符串转换结果为true！因为它是非空字符串！</span>
<span class="n">var</span> <span class="n">b3</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="err">&#39;&#39;</span><span class="p">);</span> <span class="c1">// false</span>

<span class="n">var</span> <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="mf">123.45</span><span class="p">);</span> <span class="c1">// &#39;123.45&#39;</span>
<span class="n">typeof</span> <span class="n">s</span><span class="p">;</span> <span class="c1">// &#39;string&#39;</span>
</pre></div>


<h2 id="_4">总结</h2>
<p>有这么几条规则需要遵守：</p>
<ul>
<li>不要使用<code>new Number()</code>、<code>new Boolean()</code>、<code>new String()</code>创建包装对象；</li>
<li>用<code>parseInt()</code>或<code>parseFloat()</code>来转换任意类型到<code>number</code>；</li>
<li>用<code>String()</code>来转换任意类型到<code>string</code>，或者直接调用某个对象的<code>toString()</code>方法；</li>
<li>通常不必把任意类型转换为<code>boolean</code>再判断，因为可以直接写<code>if (myVar) {...}</code>；</li>
<li><code>typeof</code>操作符可以判断出<code>number</code>、<code>boolean</code>、<code>string</code>、<code>function</code>和<code>undefined</code>；</li>
<li>判断<code>Array</code>要使用<code>Array.isArray(arr)</code>；</li>
<li>判断<code>null</code>请使用<code>myVar === null</code>；</li>
<li>判断某个全局变量是否存在用<code>typeof window.myVar === 'undefined'</code>；</li>
<li>函数内部判断某个变量是否存在用<code>typeof myVar === 'undefined'</code>。</li>
</ul>
<p>最后有细心的同学指出，任何对象都有<code>toString()</code>方法吗？<code>null</code>和<code>undefined</code>就没有！确实如此，这两个特殊值要除外，虽然<code>null</code>还伪装成了<code>object</code>类型。</p>
<p>更细心的同学指出，<code>number</code>对象调用<code>toString()</code>报SyntaxError：</p>
<div class="hlcode"><pre><span class="mf">123.</span><span class="n">toString</span><span class="p">();</span> <span class="c1">// SyntaxError</span>
</pre></div>


<p>遇到这种情况，要特殊处理一下：</p>
<div class="hlcode"><pre><span class="mf">123.</span><span class="p">.</span><span class="n">toString</span><span class="p">();</span> <span class="c1">// &#39;123&#39;, 注意是两个点！</span>
<span class="p">(</span><span class="mi">123</span><span class="p">).</span><span class="n">toString</span><span class="p">();</span> <span class="c1">// &#39;123&#39;</span>
</pre></div>


<p>不要问为什么，这就是JavaScript代码的乐趣！</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-03-06 00:05:01</p>
      </span>
    </div>

    
    
  </body>
</html>