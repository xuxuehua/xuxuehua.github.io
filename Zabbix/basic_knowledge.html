<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>basic_knowledge - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Zabbix">Zabbix</a>&nbsp;&#187;&nbsp;basic_knowledge
    <span class="updated">Page Updated&nbsp;
      2019-02-15 17:22
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">basic_knowledge</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">组成</a><ul>
<li><a href="#zabbix-server">zabbix-server</a><ul>
<li><a href="#_2">进程</a></li>
<li><a href="#zabbix_serverconf">zabbix_server.conf</a></li>
<li><a href="#zabbix_serverlog">zabbix_server.log</a></li>
<li><a href="#zabbix_get">zabbix_get</a></li>
</ul>
</li>
<li><a href="#zabbix-agent">zabbix-agent</a><ul>
<li><a href="#zabbix_agentd">zabbix_agentd</a></li>
<li><a href="#zabbix_agentdconf">zabbix_agentd.conf</a></li>
<li><a href="#zabbix_agentdlog">zabbix_agentd.log</a></li>
</ul>
</li>
<li><a href="#zabbix-database">zabbix-database</a></li>
<li><a href="#zabbix-web">zabbix-web</a></li>
<li><a href="#zabbix-proxy">zabbix-proxy</a><ul>
<li><a href="#zabbix_proxyconf">zabbix_proxy.conf</a></li>
<li><a href="#zabbix_proxylog">zabbix_proxy.log</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#installation">Installation 安装</a></li>
<li><a href="#_3">术语</a><ul>
<li><a href="#template">template</a></li>
<li><a href="#application">application</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">组成</h1>
<h2 id="zabbix-server">zabbix-server</h2>
<p>C语言编写</p>
<h3 id="_2">进程</h3>
<p>watchdog</p>
<p>housekeeper</p>
<p>alerter</p>
<p>poller</p>
<p>httppoller</p>
<p>discoverer</p>
<p>pinger</p>
<p>db_config_syncer</p>
<p>db_data_syncer</p>
<p>nodewatcher</p>
<p>timer</p>
<p>escalater</p>
<h3 id="zabbix_serverconf">zabbix_server.conf</h3>
<p>配置文件</p>
<h3 id="zabbix_serverlog">zabbix_server.log</h3>
<p>日志</p>
<h3 id="zabbix_get">zabbix_get</h3>
<p>收集数据</p>
<p>和zabbix_agentd 通信</p>
<h2 id="zabbix-agent">zabbix-agent</h2>
<p>C语言编写</p>
<h3 id="zabbix_agentd">zabbix_agentd</h3>
<p>收集本地数据</p>
<h3 id="zabbix_agentdconf">zabbix_agentd.conf</h3>
<h3 id="zabbix_agentdlog">zabbix_agentd.log</h3>
<h2 id="zabbix-database">zabbix-database</h2>
<p>支持MySQL，PostgreSQL， Oracle，DB2， </p>
<h2 id="zabbix-web">zabbix-web</h2>
<p>GUI，用于实现zabbix设定和展示</p>
<h2 id="zabbix-proxy">zabbix-proxy</h2>
<p>分布式监控环境中的专用组件</p>
<h3 id="zabbix_proxyconf">zabbix_proxy.conf</h3>
<h3 id="zabbix_proxylog">zabbix_proxy.log</h3>
<h1 id="installation">Installation 安装</h1>
<div class="hlcode"><pre><span class="n">rpm</span> <span class="o">-</span><span class="n">Uvh</span> <span class="n">https</span><span class="o">:</span><span class="c1">//repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm</span>
<span class="n">yum</span> <span class="n">clean</span> <span class="n">all</span>
<span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">zabbix</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">mysql</span> <span class="n">zabbix</span><span class="o">-</span><span class="n">web</span><span class="o">-</span><span class="n">mysql</span> <span class="n">zabbix</span><span class="o">-</span><span class="n">agent</span>
<span class="n">zcat</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">mysql</span><span class="err">*/</span><span class="n">create</span><span class="p">.</span><span class="n">sql</span><span class="p">.</span><span class="n">gz</span> <span class="o">|</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">uzbxuser</span> <span class="o">-</span><span class="n">p</span> <span class="n">zabbix</span>
</pre></div>


<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">database</span> <span class="n">zabbix</span> <span class="n">character</span> <span class="n">set</span> <span class="n">utf8</span> <span class="n">collate</span> <span class="n">utf8_bin</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">grant</span> <span class="n">all</span> <span class="n">on</span> <span class="n">zabbix</span><span class="p">.</span><span class="o">*</span> <span class="n">TO</span> <span class="err">&#39;</span><span class="n">zbxuser</span><span class="sc">&#39;@&#39;</span><span class="n">localhost</span><span class="err">&#39;</span> <span class="n">identified</span> <span class="n">by</span> <span class="err">&#39;</span><span class="n">zbxpass</span><span class="err">&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre><span class="n">Edit</span> <span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">zabbix_server</span><span class="p">.</span><span class="n">conf</span>

<span class="n">DBPassword</span><span class="o">=</span><span class="n">password</span>
</pre></div>


<div class="hlcode"><pre><span class="n">Edit</span> <span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">conf</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">zabbix</span><span class="p">.</span><span class="n">conf</span><span class="p">,</span> <span class="n">uncomment</span> <span class="n">and</span> <span class="n">set</span> <span class="n">the</span> <span class="n">right</span> <span class="n">timezone</span> <span class="k">for</span> <span class="n">you</span><span class="p">.</span>
<span class="cp"># php_value date.timezone Europe/Riga</span>
</pre></div>


<div class="hlcode"><pre><span class="n">Start</span> <span class="n">Zabbix</span> <span class="n">server</span> <span class="n">and</span> <span class="n">agent</span> <span class="n">processes</span>
<span class="n">Start</span> <span class="n">Zabbix</span> <span class="n">server</span> <span class="n">and</span> <span class="n">agent</span> <span class="n">processes</span> <span class="n">and</span> <span class="n">make</span> <span class="n">it</span> <span class="n">start</span> <span class="n">at</span> <span class="n">system</span> <span class="n">boot</span><span class="o">:</span>

<span class="cp"># systemctl restart zabbix-server zabbix-agent httpd</span>
<span class="cp"># systemctl enable zabbix-server zabbix-agent httpd</span>
</pre></div>


<h1 id="_3">术语</h1>
<h2 id="template">template</h2>
<p>通常包含item， trigger， graph， screen</p>
<p>模版可以直接链接至单个主机</p>
<h2 id="application">application</h2>
<p>一组item的集合</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-02-24 13:42:28</p>
      </span>
    </div>

    
    
  </body>
</html>