<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>calculation 运算 - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Shell">Shell</a>&nbsp;&#187;&nbsp;calculation 运算
    <span class="updated">Page Updated&nbsp;
      2018-11-10 21:18
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">calculation 运算</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">数字运算</a><ul>
<li><a href="#-">四则运算 + - * /</a></li>
<li><a href="#_2">其它运算</a><ul>
<li><a href="#_3">% 求余</a></li>
<li><a href="#_4">== 相等</a></li>
<li><a href="#_5">!= 不相等</a></li>
</ul>
</li>
<li><a href="#_6">整数运算符</a><ul>
<li><a href="#-eq">-eq</a></li>
<li><a href="#-ne">-ne</a></li>
<li><a href="#-gt">-gt</a></li>
<li><a href="#-lt">-lt</a></li>
<li><a href="#-ge">-ge</a></li>
<li><a href="#-le">-le</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_7">字符串运算</a><ul>
<li><a href="#_8">=</a></li>
<li><a href="#_9">!=</a></li>
<li><a href="#-z">-z</a></li>
<li><a href="#-n">-n</a></li>
</ul>
</li>
<li><a href="#_10">文件运算</a><ul>
<li><a href="#-e">-e</a></li>
<li><a href="#-f">-f</a></li>
<li><a href="#-s">-s</a></li>
<li><a href="#-d">-d</a></li>
<li><a href="#-r">-r</a></li>
<li><a href="#-w">-w</a></li>
<li><a href="#-x">-x</a></li>
</ul>
</li>
<li><a href="#_11">组合条件运算</a><ul>
<li><a href="#-a">-a 与关系</a></li>
<li><a href="#-o">-o 或关系</a></li>
<li><a href="#_12">! 非关系</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">数字运算</h1>
<h2 id="-">四则运算 + - * /</h2>
<table class="hlcodetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="hlcode"><pre><span class="c">#!/bin/bash</span>

<span class="nv">a</span><span class="o">=</span>3
<span class="nv">b</span><span class="o">=</span>5

<span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> + <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&quot;a+b=$val&quot;</span>

<span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> - <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&quot;a-b=$val&quot;</span>

<span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&quot;a*b=$val&quot;</span>

<span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> / <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&quot;a/b=$val&quot;</span>

&gt;&gt;&gt;
a+b<span class="o">=</span>8
a-b<span class="o">=</span>-2
a*b<span class="o">=</span>15
a/b<span class="o">=</span>0
</pre></div>
</td></tr></table>

<h2 id="_2">其它运算</h2>
<h3 id="_3">% 求余</h3>
<table class="hlcodetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="hlcode"><pre><span class="c">#!/bin/bash</span>

<span class="nv">a</span><span class="o">=</span>3
<span class="nv">b</span><span class="o">=</span>5

<span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> % <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&quot;a%b=$val&quot;</span>

&gt;&gt;&gt;
a%b<span class="o">=</span>3
</pre></div>
</td></tr></table>

<h3 id="_4">== 相等</h3>
<table class="hlcodetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="hlcode"><pre><span class="c">#!/bin/bash</span>

<span class="nv">a</span><span class="o">=</span>5
<span class="nv">b</span><span class="o">=</span>5

<span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span>; <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;$a is equal to $b&quot;</span>
<span class="k">fi</span>

&gt;&gt;&gt;
5 is equal to 5
</pre></div>
</td></tr></table>

<h3 id="_5">!= 不相等</h3>
<table class="hlcodetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="hlcode"><pre><span class="c">#!/bin/bash</span>

<span class="nv">a</span><span class="o">=</span>3
<span class="nv">b</span><span class="o">=</span>5

<span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> !<span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span>; <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;$a is not equal to $b&quot;</span>
<span class="k">fi</span>

&gt;&gt;&gt;
3 is not equal to 5
</pre></div>
</td></tr></table>

<h2 id="_6">整数运算符</h2>
<h3 id="-eq">-eq</h3>
<p>两数相等返回true</p>
<div class="hlcode"><pre><span class="err">$</span> <span class="k">if</span> <span class="p">[</span> <span class="mi">10</span> <span class="o">-</span><span class="n">eq</span> <span class="mi">10</span> <span class="p">];</span> <span class="n">then</span> <span class="n">echo</span> <span class="s">&quot;yes&quot;</span> <span class="p">;</span> <span class="n">fi</span>
<span class="n">yes</span>
</pre></div>


<ul>
<li>条件测试的表达式</li>
</ul>
<div class="hlcode"><pre><span class="n">INT1</span><span class="o">=</span><span class="mi">63</span>
<span class="n">INT2</span><span class="o">=</span><span class="mi">77</span>
     <span class="mf">1.</span> <span class="p">[</span> <span class="n">expression</span> <span class="p">]</span> <span class="err">一定要有空格</span>
         <span class="p">[</span> <span class="err">$</span><span class="n">INT1</span> <span class="o">-</span><span class="n">eq</span> <span class="err">$</span><span class="n">INT2</span> <span class="p">]</span>
     <span class="mf">2.</span> <span class="p">[</span> <span class="p">[</span> <span class="n">expression</span> <span class="p">]</span> <span class="p">]</span>
          <span class="p">[</span> <span class="p">[</span> <span class="err">$</span><span class="n">INT1</span> <span class="o">-</span><span class="n">eq</span> <span class="err">$</span><span class="n">INT2</span> <span class="p">]</span> <span class="p">]</span>
     <span class="mf">3.</span> <span class="n">test</span> <span class="n">expression</span>
          <span class="n">test</span> <span class="err">$</span><span class="n">INT1</span> <span class="o">-</span><span class="n">eq</span> <span class="err">$</span><span class="n">INT2</span><span class="err">条件测试的表达式</span>
</pre></div>


<h3 id="-ne">-ne</h3>
<p>两数不等返回true</p>
<div class="hlcode"><pre><span class="k">if</span> <span class="p">[</span> <span class="err">$</span><span class="n">UID</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">0</span> <span class="p">]</span>  <span class="p">;</span> <span class="n">then</span>
    <span class="n">echo</span> <span class="n">Not</span> <span class="n">root</span> <span class="n">user</span><span class="p">,</span> <span class="n">Please</span> <span class="n">run</span> <span class="n">as</span> <span class="n">root</span><span class="p">.</span>
<span class="k">else</span>
    <span class="n">echo</span> <span class="n">Root</span> <span class="n">user</span><span class="p">.</span>
<span class="n">fi</span>
</pre></div>


<h3 id="-gt">-gt</h3>
<p>左侧大于右侧返回true</p>
<h3 id="-lt">-lt</h3>
<p>左侧小雨右侧返回true</p>
<h3 id="-ge">-ge</h3>
<p>左侧大于等于右侧返回true</p>
<h3 id="-le">-le</h3>
<p>左侧小于等于右侧返回true</p>
<h1 id="_7">字符串运算</h1>
<h2 id="_8">=</h2>
<p>两个字符串相等返回true</p>
<h2 id="_9">!=</h2>
<p>两个字符串不相等返回true</p>
<h2 id="-z">-z</h2>
<p>字符串长度为0返回true， 测试指定字符串是否不空</p>
<div class="hlcode"><pre><span class="p">[</span> <span class="o">-</span><span class="n">z</span> <span class="err">`</span><span class="n">hostname</span><span class="err">`</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[</span> <span class="err">`</span><span class="n">hostname</span><span class="err">`</span> <span class="o">==</span> <span class="err">‘</span><span class="n">local</span><span class="err">’</span> <span class="o">-</span><span class="n">o</span>  <span class="err">`</span><span class="n">hostname</span><span class="err">`</span> <span class="o">==</span> <span class="err">‘</span><span class="p">(</span><span class="n">none</span><span class="p">)</span><span class="err">’</span>  <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">hostname</span> <span class="err">$</span><span class="n">HOSTNAME</span>
</pre></div>


<h2 id="-n">-n</h2>
<p>字符串长度不为0返回true</p>
<h1 id="_10">文件运算</h1>
<h2 id="-e">-e</h2>
<p>filename or file path 测试文件是否存在，包括目录</p>
<table class="hlcodetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="hlcode"><pre><span class="c">#!/bin/bash</span>
<span class="k">if</span> <span class="o">[</span> ! -e <span class="nv">$FILE</span> <span class="o">]</span> ;     <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> “No <span class="nv">$FILE</span> file.”
    <span class="nb">exit </span>8    /只要不是0就可以
<span class="k">fi</span>
</pre></div>
</td></tr></table>

<div class="hlcode"><pre><span class="p">[</span> <span class="o">-</span><span class="n">e</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">inittab</span> <span class="p">]</span>
</pre></div>


<h2 id="-f">-f</h2>
<p>filename or file path 测试是否为普通文件</p>
<h2 id="-s">-s</h2>
<p>file existence along with file size greater than 0</p>
<h2 id="-d">-d</h2>
<p>filename or file path 测试指定路径是否／为目录</p>
<h2 id="-r">-r</h2>
<p>测试指定文件对当前用户而言，是否可读</p>
<h2 id="-w">-w</h2>
<p>测试指定文件对当前用户而言，是否可写</p>
<h2 id="-x">-x</h2>
<p>测试指定文件对当前用户而言，是否可执行</p>
<div class="hlcode"><pre><span class="p">[</span> <span class="o">-</span><span class="n">x</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">rc</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">rc</span><span class="p">.</span><span class="n">sysint</span> <span class="p">]</span>
</pre></div>


<h1 id="_11">组合条件运算</h1>
<h2 id="-a">-a 与关系</h2>
<div class="hlcode"><pre><span class="k">if</span> <span class="p">[</span> <span class="err">$#</span> <span class="o">-</span><span class="n">gt</span> <span class="mi">1</span> <span class="o">-</span><span class="n">a</span> <span class="err">$#</span> <span class="o">-</span><span class="n">le</span> <span class="mi">3</span> <span class="p">]</span>
<span class="k">if</span> <span class="p">[</span> <span class="err">$#</span> <span class="o">-</span><span class="n">gt</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="err">$#</span> <span class="o">-</span><span class="n">le</span> <span class="mi">3</span> <span class="p">]</span>
</pre></div>


<h2 id="-o">-o 或关系</h2>
<h2 id="_12">! 非关系</h2>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-02-21 11:54:09</p>
      </span>
    </div>

    
    
  </body>
</html>