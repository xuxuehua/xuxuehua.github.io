<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>transaction 事务 - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Mysql">Mysql</a>&nbsp;&#187;&nbsp;transaction 事务
    <span class="updated">Page Updated&nbsp;
      2019-01-05 21:46
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">transaction 事务</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">事务</a><ul>
<li><a href="#acid">ACID 测试</a><ul>
<li><a href="#atomicity">原子性 Atomicity</a></li>
<li><a href="#consistency">一致性 Consistency</a></li>
<li><a href="#isolation">隔离性 Isolation</a></li>
<li><a href="#durability">持久性 Durability</a></li>
</ul>
</li>
<li><a href="#_2">使用事务</a><ul>
<li><a href="#_3">启动事务</a></li>
<li><a href="#_4">结束事务</a></li>
<li><a href="#_5">关闭自动提交</a></li>
</ul>
</li>
<li><a href="#savepoint">savepoint</a><ul>
<li><a href="#usage">usage</a></li>
</ul>
</li>
<li><a href="#_6">事务隔离级别</a><ul>
<li><a href="#read-uncommitted">READ UNCOMMITTED 读未提交</a></li>
<li><a href="#read-committed">READ COMMITTED 读提交</a></li>
<li><a href="#repeatable-read">REPEATABLE READ 可重读</a></li>
<li><a href="#serializable">SERIALIZABLE 可串行化</a></li>
</ul>
</li>
<li><a href="#_7">死锁</a></li>
</ul>
</li>
<li><a href="#_8">事务日志</a></li>
<li><a href="#_9"></a><ul>
<li><a href="#_10">事务日志设定</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">事务</h1>
<p>事务是一组原子性的SQL查询，或者说一个独立工作单元</p>
<p>MySQL 事务主要用于处理操作量大，复杂度高的数据。比如说，在人员管理系统中，你删除一个人员，你即需要删除人员的基本资料，也要删除和该人员相关的信息，如信箱，文章等等，这样，这些数据库操作语句就构成一个事务</p>
<ul>
<li>在 MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。</li>
<li>事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行。</li>
<li>事务用来管理 insert,update,delete 语句</li>
</ul>
<h2 id="acid">ACID 测试</h2>
<p>一般来说，事务是必须满足4个条件（ACID）：：原子性（<strong>A</strong>tomicity，或称不可分割性）、一致性（<strong>C</strong>onsistency）、隔离性（<strong>I</strong>solation，又称独立性）、持久性（<strong>D</strong>urability）。</p>
<h3 id="atomicity">原子性 Atomicity</h3>
<p>一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</p>
<h3 id="consistency">一致性 Consistency</h3>
<p>在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</p>
<h3 id="isolation">隔离性 Isolation</h3>
<p>数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。</p>
<p>事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</p>
<h3 id="durability">持久性 Durability</h3>
<p>事务处理结束后，对数据的修改就是永久保存于数据库中，即便系统故障也不会丢失。</p>
<h2 id="_2">使用事务</h2>
<h3 id="_3">启动事务</h3>
<div class="hlcode"><pre><span class="n">START</span> <span class="n">TRANSACTION</span>
</pre></div>


<h3 id="_4">结束事务</h3>
<div class="hlcode"><pre><span class="n">COMMIT</span> <span class="err">提交</span>
<span class="n">ROLLBACK</span> <span class="err">回滚</span>
</pre></div>


<p>可以回滚事务操作</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span> <span class="n">IN</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">23</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">2</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">23</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">ROLLBACK</span>
    <span class="o">-&gt;</span> <span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="_5">关闭自动提交</h3>
<p>在 MySQL 命令行的默认设置下，事务都是自动提交的，即执行 SQL 语句后就会马上执行 COMMIT 操作。因此要显式地开启一个事务务须使用命令 BEGIN 或 START TRANSACTION，或者执行命令 SET AUTOCOMMIT=0，用来禁止使用当前会话的自动提交。</p>
<ul>
<li>临时关闭</li>
</ul>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">SESSION</span> <span class="n">autocommit</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[(</span><span class="n">none</span><span class="p">)]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">VARIABLES</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="o">%</span><span class="k">auto</span><span class="o">%</span><span class="err">&#39;</span><span class="p">;</span>
<span class="o">+-----------------------------+-------+</span>
<span class="o">|</span> <span class="n">Variable_name</span>               <span class="o">|</span> <span class="n">Value</span> <span class="o">|</span>
<span class="o">+-----------------------------+-------+</span>
<span class="o">|</span> <span class="n">auto_increment_increment</span>    <span class="o">|</span> <span class="mi">1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">auto_increment_offset</span>       <span class="o">|</span> <span class="mi">1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">autocommit</span>                  <span class="o">|</span> <span class="n">OFF</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">automatic_sp_privileges</span>     <span class="o">|</span> <span class="n">ON</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">innodb_autoextend_increment</span> <span class="o">|</span> <span class="mi">8</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">innodb_autoinc_lock_mode</span>    <span class="o">|</span> <span class="mi">1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">innodb_stats_auto_update</span>    <span class="o">|</span> <span class="mi">1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">sql_auto_is_null</span>            <span class="o">|</span> <span class="n">OFF</span>   <span class="o">|</span>
<span class="o">+-----------------------------+-------+</span>
<span class="mi">8</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="savepoint">savepoint</h2>
<h3 id="usage">usage</h3>
<div class="hlcode"><pre><span class="n">SAVEPOINT</span> <span class="n">identifier</span>
<span class="n">ROLLBACK</span> <span class="p">[</span><span class="n">WORK</span><span class="p">]</span> <span class="n">TO</span> <span class="n">SAVEPOINT</span> <span class="n">identifier</span>
<span class="n">RELEASE</span> <span class="n">SAVEPOINT</span> <span class="n">identifier</span>
</pre></div>


<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">18</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SAVEPOINT</span> <span class="n">sp1</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">students</span> <span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Age</span><span class="p">,</span> <span class="n">Gender</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">Jinjiao</span> <span class="n">King</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SAVEPOINT</span> <span class="n">sp2</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">UPDATE</span> <span class="n">students</span> <span class="n">SET</span> <span class="n">Age</span><span class="o">=</span><span class="mi">43</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Rows</span> <span class="n">matched</span><span class="o">:</span> <span class="mi">1</span>  <span class="n">Changed</span><span class="o">:</span> <span class="mi">1</span>  <span class="n">Warnings</span><span class="o">:</span> <span class="mi">0</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">43</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">26</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">ROLLBACK</span> <span class="n">TO</span> <span class="n">sp2</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">26</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">ROLLBACK</span> <span class="n">TO</span> <span class="n">sp1</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">24</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">ROLLBACK</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="_6">事务隔离级别</h2>
<p>使用<code>SET tx_isolation=""</code> 方式设置，临时会话加上<code>SESSION</code>参数</p>
<h3 id="read-uncommitted">READ UNCOMMITTED 读未提交</h3>
<p>即一个事务还没有提交的时候，他做的变更就被其他事务看到</p>
<p>存在脏读问题， 即读到了别人的脏数据</p>
<p>开启两个session 会话，并修改隔离级别</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">PROCESSLIST</span><span class="p">;</span>
<span class="o">+----+------+-----------+---------+---------+------+-------+------------------+----------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">User</span> <span class="o">|</span> <span class="n">Host</span>      <span class="o">|</span> <span class="n">db</span>      <span class="o">|</span> <span class="n">Command</span> <span class="o">|</span> <span class="n">Time</span> <span class="o">|</span> <span class="n">State</span> <span class="o">|</span> <span class="n">Info</span>             <span class="o">|</span> <span class="n">Progress</span> <span class="o">|</span>
<span class="o">+----+------+-----------+---------+---------+------+-------+------------------+----------+</span>
<span class="o">|</span> <span class="mi">14</span> <span class="o">|</span> <span class="n">root</span> <span class="o">|</span> <span class="n">localhost</span> <span class="o">|</span> <span class="n">hellodb</span> <span class="o">|</span> <span class="n">Sleep</span>   <span class="o">|</span>  <span class="mi">416</span> <span class="o">|</span>       <span class="o">|</span> <span class="nb">NULL</span>             <span class="o">|</span>    <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">15</span> <span class="o">|</span> <span class="n">root</span> <span class="o">|</span> <span class="n">localhost</span> <span class="o">|</span> <span class="n">hellodb</span> <span class="o">|</span> <span class="n">Query</span>   <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span> <span class="nb">NULL</span>  <span class="o">|</span> <span class="n">SHOW</span> <span class="n">PROCESSLIST</span> <span class="o">|</span>    <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">+----+------+-----------+---------+---------+------+-------+------------------+----------+</span>
<span class="mi">2</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">tx_isolation</span><span class="o">=</span><span class="err">&#39;</span><span class="n">READ</span><span class="o">-</span><span class="n">UNCOMMITTED</span><span class="err">&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">VARIABLES</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="o">%</span><span class="n">isolation</span><span class="o">%</span><span class="err">&#39;</span><span class="p">;</span>
<span class="o">+---------------+------------------+</span>
<span class="o">|</span> <span class="n">Variable_name</span> <span class="o">|</span> <span class="n">Value</span>            <span class="o">|</span>
<span class="o">+---------------+------------------+</span>
<span class="o">|</span> <span class="n">tx_isolation</span>  <span class="o">|</span> <span class="n">READ</span><span class="o">-</span><span class="n">UNCOMMITTED</span> <span class="o">|</span>
<span class="o">+---------------+------------------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>两边开启事务</p>
<div class="hlcode"><pre><span class="n">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
</pre></div>


<p>会话一更新数据</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">UPDATE</span> <span class="n">students</span> <span class="n">SET</span> <span class="n">Age</span><span class="o">=</span><span class="mi">40</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Rows</span> <span class="n">matched</span><span class="o">:</span> <span class="mi">1</span>  <span class="n">Changed</span><span class="o">:</span> <span class="mi">1</span>  <span class="n">Warnings</span><span class="o">:</span> <span class="mi">0</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">40</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话二查看数据</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>         <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span> <span class="o">|</span>  <span class="mi">40</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话一回滚</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>         <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span> <span class="o">|</span>  <span class="mi">40</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">ROLLBACK</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>         <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span> <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话二查看数据， 发现数据也被修改了</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>         <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span> <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+--------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="read-committed">READ COMMITTED 读提交</h3>
<p>即一个事务提交之后，他做的变更才会被其他事务看到</p>
<p>解决脏读问题，但是会有不可重复读，和幻读的问题。即提交前读到一种数据，提交后读到另外一种数据</p>
<p>并发性能还不错，但是复制的时候会出现数据不一致的问题</p>
<p>开启两个会话，并设置隔离级别， 开启事务</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">tx_isolation</span><span class="o">=</span><span class="err">&#39;</span><span class="n">READ</span><span class="o">-</span><span class="n">COMMITTED</span><span class="err">&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">VARIABLES</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="o">%</span><span class="n">isolation</span><span class="err">&#39;</span><span class="p">;</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Variable_name</span> <span class="o">|</span> <span class="n">Value</span>          <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">tx_isolation</span>  <span class="o">|</span> <span class="n">READ</span><span class="o">-</span><span class="n">COMMITTED</span> <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">START</span>  <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话一插入数据</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">students</span> <span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Age</span><span class="p">,</span> <span class="n">Gender</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">Jinjiao</span> <span class="n">King</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">27</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">26</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">27</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">COMMIT</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">27</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话二删除数据</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">1</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">27</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">26</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">27</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">COMMIT</span>
    <span class="o">-&gt;</span> <span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">3</span> <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">5</span> <span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">6</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">7</span> <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">8</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>     <span class="mi">9</span> <span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span> <span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span> <span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span> <span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span> <span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">15</span> <span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">16</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">17</span> <span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">18</span> <span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">19</span> <span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">20</span> <span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">21</span> <span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">22</span> <span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">23</span> <span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">24</span> <span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">25</span> <span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">27</span> <span class="o">|</span> <span class="n">Jinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+---------------+-----+--------+---------+-----------+</span>
<span class="mi">25</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="repeatable-read">REPEATABLE READ 可重读</h3>
<p>即一个事务执行过程中看到的数据，总是跟这个事务在启动时看到的数据是一致的，未提交的变更对其他事务是不可见的</p>
<p>解决了不可重复读的问题，但是依旧有幻读的问题。即一方自己的事务修改提交后，另一方读到的数据还是自己本身的</p>
<p>InnoDB 默认服务器参数, 可以在SESSION级别修改</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">GLOBAL</span> <span class="n">VARIABLES</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="o">%</span><span class="n">isolation</span><span class="o">%</span><span class="err">&#39;</span><span class="p">;</span>
<span class="o">+---------------+-----------------+</span>
<span class="o">|</span> <span class="n">Variable_name</span> <span class="o">|</span> <span class="n">Value</span>           <span class="o">|</span>
<span class="o">+---------------+-----------------+</span>
<span class="o">|</span> <span class="n">tx_isolation</span>  <span class="o">|</span> <span class="n">REPEATABLE</span><span class="o">-</span><span class="n">READ</span> <span class="o">|</span>
<span class="o">+---------------+-----------------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="serializable">SERIALIZABLE 可串行化</h3>
<p>即对同一行数据，写时会加写锁，读时会加读锁。出现读写冲突的时候，后访问的事务必须等前一个事务执行完成之后才能继续执行</p>
<p>解决幻读的问题，但是会引起加锁读问题，效率非常低</p>
<p>除非对事物安全性非常高，否则不要使用</p>
<p>两会话开启serializable， 并启动事务</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">tx_isolation</span><span class="o">=</span><span class="err">&#39;</span><span class="n">SERIALIZABLE</span><span class="err">&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">VARIABLES</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="o">%</span><span class="n">isolation</span><span class="err">&#39;</span><span class="p">;</span>
<span class="o">+---------------+--------------+</span>
<span class="o">|</span> <span class="n">Variable_name</span> <span class="o">|</span> <span class="n">Value</span>        <span class="o">|</span>
<span class="o">+---------------+--------------+</span>
<span class="o">|</span> <span class="n">tx_isolation</span>  <span class="o">|</span> <span class="n">SERIALIZABLE</span> <span class="o">|</span>
<span class="o">+---------------+--------------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话一更新数据并查看</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">14</span><span class="p">;</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>        <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span> <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">UPDATE</span> <span class="n">students</span> <span class="n">SET</span> <span class="n">Age</span><span class="o">=</span><span class="mi">21</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">14</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Rows</span> <span class="n">matched</span><span class="o">:</span> <span class="mi">1</span>  <span class="n">Changed</span><span class="o">:</span> <span class="mi">1</span>  <span class="n">Warnings</span><span class="o">:</span> <span class="mi">0</span>

<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span>
<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span>
<span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">14</span><span class="p">;</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>        <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span> <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<p>会话二访问被阻塞</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">14</span><span class="p">;</span>

<span class="n">ERROR</span> <span class="mi">1205</span> <span class="p">(</span><span class="n">HY000</span><span class="p">)</span><span class="o">:</span> <span class="n">Lock</span> <span class="n">wait</span> <span class="n">timeout</span> <span class="n">exceeded</span><span class="p">;</span> <span class="n">try</span> <span class="n">restarting</span> <span class="n">transaction</span>
</pre></div>


<p>会话一COMMIT 之后会执行会话二</p>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">StuID</span><span class="o">=</span><span class="mi">14</span><span class="p">;</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="o">|</span> <span class="n">StuID</span> <span class="o">|</span> <span class="n">Name</span>        <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span> <span class="n">TeacherID</span> <span class="o">|</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="o">|</span>    <span class="mi">14</span> <span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span> <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>      <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+-------+-------------+-----+--------+---------+-----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">5.48</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="_7">死锁</h2>
<p>两个或者多个事物在一组资源上相互占用，并请求锁定对方占用的资源的状态。</p>
<h1 id="_8">事务日志</h1>
<p>事务日志的写入类型为追加，因此其操作为顺序IO， 此日志通常也被称为预写式日志(write and logging)</p>
<p>不建议设置过大的事务日志，这样会导致大量的同步日志事件，一旦崩溃，需要大量时间恢复</p>
<h1 id="_9"></h1>
<h2 id="_10">事务日志设定</h2>
<div class="hlcode"><pre><span class="n">MariaDB</span> <span class="p">[</span><span class="n">hellodb</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">GLOBAL</span> <span class="n">VARIABLES</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="n">innodb_log</span><span class="o">%</span><span class="err">&#39;</span><span class="p">;</span>
<span class="o">+---------------------------+---------+</span>
<span class="o">|</span> <span class="n">Variable_name</span>             <span class="o">|</span> <span class="n">Value</span>   <span class="o">|</span>
<span class="o">+---------------------------+---------+</span>
<span class="o">|</span> <span class="n">innodb_log_block_size</span>     <span class="o">|</span> <span class="mi">512</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">innodb_log_buffer_size</span>    <span class="o">|</span> <span class="mi">8388608</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">innodb_log_file_size</span>      <span class="o">|</span> <span class="mi">5242880</span> <span class="o">|</span> <span class="err">#不支持运行时修改，需要写到配置文件里面</span>
<span class="o">|</span> <span class="n">innodb_log_files_in_group</span> <span class="o">|</span> <span class="mi">2</span>       <span class="o">|</span> <span class="err">#不支持运行时修改，需要写到配置文件里面</span>
<span class="o">|</span> <span class="n">innodb_log_group_home_dir</span> <span class="o">|</span> <span class="p">.</span><span class="o">/</span>      <span class="o">|</span> <span class="err">#不支持运行时修改，需要写到配置文件里面</span>
<span class="o">+---------------------------+---------+</span>
<span class="mi">5</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">rw</span><span class="o">----</span><span class="p">.</span> <span class="mi">1</span> <span class="n">mysql</span> <span class="n">mysql</span> <span class="mf">5.0</span><span class="n">M</span> <span class="n">Jan</span>  <span class="mi">6</span> <span class="mo">06</span><span class="o">:</span><span class="mi">24</span> <span class="n">ib_logfile0</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">rw</span><span class="o">----</span><span class="p">.</span> <span class="mi">1</span> <span class="n">mysql</span> <span class="n">mysql</span> <span class="mf">5.0</span><span class="n">M</span> <span class="n">Jan</span>  <span class="mi">5</span> <span class="mo">06</span><span class="o">:</span><span class="mi">47</span> <span class="n">ib_logfile1</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-05-24 01:26:43</p>
      </span>
    </div>

    
    
  </body>
</html>