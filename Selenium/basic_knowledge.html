<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>basic_knowledge - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Selenium">Selenium</a>&nbsp;&#187;&nbsp;basic_knowledge
    <span class="updated">Page Updated&nbsp;
      2018-07-19 18:03
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">basic_knowledge</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#selenium">Selenium</a><ul>
<li><a href="#_1">简介</a><ul>
<li><a href="#selenium-ide">Selenium IDE</a></li>
<li><a href="#selenium-grid">Selenium Grid</a></li>
<li><a href="#webdriver">WebDriver</a></li>
</ul>
</li>
<li><a href="#python">Python下 安装</a><ul>
<li><a href="#_2">简单测试</a></li>
<li><a href="#_3">浏览器驱动</a><ul>
<li><a href="#install-phantomjs-in-centos">Install PhantomJS in Centos</a></li>
<li><a href="#_4">驱动调用</a></li>
<li><a href="#chromedriver">chromedriver</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nodejs">nodejs 下 安装</a><ul>
<li><a href="#phantomjs">PhantomJS</a></li>
<li><a href="#chrome-driver">chrome driver</a></li>
<li><a href="#_5">简单的环境验证测试</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="selenium">Selenium</h1>
<h2 id="_1">简介</h2>
<p>Jason Huggins在2004年发起了Selenium项目，当时身处ThoughtWorks的他，为了不想让自己的时间浪费在无聊的重复性工作中，幸运的是，所有被测试的浏览器都支持Javascript。Jason和他所在的团队采用Javascript编写一种测试工具来验证浏览器页面的行为；这个JavaScript类库就是Selenium core，同时也是seleniumRC、Selenium IDE的核心组件。Selenium由此诞生。</p>
<p>关于Selenium的命名比较有意思，当时QTP mercury是主流的商业自化工具，是化学元素汞（俗称水银），而Selenium是开源自动化工具，是化学元素硒，硒可以对抗汞。</p>
<h3 id="selenium-ide">Selenium IDE</h3>
<p>Selenium IDE是嵌入到Firefox浏览器中的一个插件，实现简单的浏览器操作的录制与回放功能。</p>
<h3 id="selenium-grid">Selenium Grid</h3>
<p>Selenium Grid是一种自动化的测试辅助工具，Grid通过利用现有的计算机基础设施，能加快Web-App的功能测试。利用Grid可以很方便地实现在多台机器上和异构环境中运行测试用例</p>
<h3 id="webdriver">WebDriver</h3>
<p>WebDriver是通过原生浏览器支持或者浏览器扩展来直接控制浏览器。WebDriver针对各个浏览器而开发，取代了嵌入到被测Web应用中的JavaScript，与浏览器紧密集成，因此支持创建更高级的测试，避免了JavaScript安全模型导致的限制。除了来自浏览器厂商的支持之外，WebDriver还利用操作系统级的调用，模拟用户输入。</p>
<h2 id="python">Python下 安装</h2>
<p><code>pip install selenium</code></p>
<h3 id="_2">简单测试</h3>
<p>打开一款Python编辑器，默认Python自带的IDLE也行。创建 baidu.py文件，输入以下内容：</p>
<div class="hlcode"><pre><span class="n">from</span> <span class="n">selenium</span> <span class="n">import</span> <span class="n">webdriver</span>


<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">()</span>
<span class="n">driver</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">https</span><span class="o">:</span><span class="c1">//www.baidu.com&#39;)</span>

<span class="n">print</span><span class="p">(</span><span class="n">driver</span><span class="p">.</span><span class="n">title</span><span class="p">)</span>

<span class="n">driver</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>


<h3 id="_3">浏览器驱动</h3>
<p>Firefox浏览器驱动：<a href="https://github.com/mozilla/geckodriver/releases">geckodriver</a></p>
<p>Chrome浏览器驱动：<a href="https://sites.google.com/a/chromium.org/chromedriver/home">chromedriver</a> , <a href="https://npm.taobao.org/mirrors/chromedriver">taobao备用地址</a></p>
<blockquote>
<p><a href="http://chromedriver.storage.googleapis.com/index.html">chrome_all_version_list</a></p>
</blockquote>
<p>IE浏览器驱动：<a href="http://selenium-release.storage.googleapis.com/index.html">IEDriverServer</a></p>
<p>Edge浏览器驱动：<a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver">MicrosoftWebDriver</a></p>
<p>Opera浏览器驱动：<a href="https://github.com/operasoftware/operachromiumdriver/releases">operadriver</a></p>
<p>PhantomJS浏览器驱动：<a href="http://phantomjs.org/">phantomjs</a></p>
<h4 id="install-phantomjs-in-centos">Install PhantomJS in Centos</h4>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">mv</span> <span class="err">$</span><span class="n">PHANTOM_JS</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span>
<span class="n">sudo</span> <span class="n">tar</span> <span class="n">xvjf</span> <span class="n">phantomjs</span><span class="o">-</span><span class="mf">1.9.2</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x86_64</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span>
<span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">sf</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="err">$</span><span class="n">PHANTOM_JS</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">phantomjs</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">phantomjs</span>
<span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">sf</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="err">$</span><span class="n">PHANTOM_JS</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">phantomjs</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">phantomjs</span>
<span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">sf</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="err">$</span><span class="n">PHANTOM_JS</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">phantomjs</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">phantomjs</span>
</pre></div>


<blockquote>
<p>上面软链接都需要加上</p>
</blockquote>
<h4 id="_4">驱动调用</h4>
<div class="hlcode"><pre><span class="n">from</span> <span class="n">selenium</span> <span class="n">import</span> <span class="n">webdriver</span>


<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Firefox</span><span class="p">()</span>   <span class="err">#</span> <span class="n">Firefox</span><span class="err">浏览器</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">()</span>    <span class="err">#</span> <span class="n">Chrome</span><span class="err">浏览器</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Ie</span><span class="p">()</span>        <span class="err">#</span> <span class="n">Internet</span> <span class="n">Explorer</span><span class="err">浏览器</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Edge</span><span class="p">()</span>      <span class="err">#</span> <span class="n">Edge</span><span class="err">浏览器</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Opera</span><span class="p">()</span>     <span class="err">#</span> <span class="n">Opera</span><span class="err">浏览器</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">PhantomJS</span><span class="p">()</span>   <span class="err">#</span> <span class="n">PhantomJS</span>
</pre></div>


<h4 id="chromedriver">chromedriver</h4>
<p>Install chromedriver in debian </p>
<div class="hlcode"><pre><span class="n">apt</span> <span class="n">install</span> <span class="n">chromedriver</span>
</pre></div>


<p>python file</p>
<div class="hlcode"><pre><span class="n">from</span> <span class="n">selenium</span> <span class="n">import</span> <span class="n">webdriver</span>

<span class="n">chrome_options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
<span class="n">chrome_options</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="err">&#39;</span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">sandbox</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">chrome_options</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="err">&#39;</span><span class="o">--</span><span class="n">window</span><span class="o">-</span><span class="n">size</span><span class="o">=</span><span class="mi">1420</span><span class="p">,</span><span class="mi">1080</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">chrome_options</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="err">&#39;</span><span class="o">--</span><span class="n">headless</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">chrome_options</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="err">&#39;</span><span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">gpu</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">chrome_options</span><span class="o">=</span><span class="n">chrome_options</span><span class="p">)</span>
<span class="n">driver</span><span class="p">.</span><span class="n">maximize_window</span><span class="p">()</span>
<span class="n">driver</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</pre></div>


<h2 id="nodejs">nodejs 下 安装</h2>
<div class="hlcode"><pre><span class="n">mkdir</span> <span class="n">se</span>
<span class="n">cd</span> <span class="n">se</span>
<span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="n">selenium</span><span class="o">-</span><span class="n">webdriver</span><span class="err">@</span><span class="mf">2.44.0</span>
</pre></div>


<h3 id="phantomjs">PhantomJS</h3>
<div class="hlcode"><pre><span class="n">npm</span> <span class="n">install</span> <span class="n">phantomjs</span> <span class="o">-</span><span class="n">g</span> 
</pre></div>


<h3 id="chrome-driver">chrome driver</h3>
<div class="hlcode"><pre><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="n">chromedriver</span><span class="err">@</span><span class="mf">2.12.0</span>
</pre></div>


<h3 id="_5">简单的环境验证测试</h3>
<p>新建文件start.js，并键入下面的内容。</p>
<div class="hlcode"><pre><span class="c1">// start.js</span>
<span class="k">var</span> <span class="n">webdriver</span> <span class="o">=</span> <span class="n">require</span><span class="p">(&#39;</span><span class="n">selenium</span><span class="o">-</span><span class="n">webdriver</span><span class="p">&#39;);</span>

<span class="k">var</span> <span class="n">driver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Builder</span><span class="p">().</span><span class="n">forBrowser</span><span class="p">(&#39;</span><span class="n">chrome</span><span class="p">&#39;).</span><span class="n">build</span><span class="p">();</span>

<span class="n">driver</span><span class="p">.</span><span class="n">get</span><span class="p">(&#39;</span><span class="nl">https:</span><span class="c1">//www.google.com&#39;);</span>

<span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(&#39;</span><span class="n">quit</span> <span class="n">driver</span><span class="p">&#39;);</span>
<span class="n">driver</span><span class="p">.</span><span class="n">quit</span><span class="p">();</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-07-08 11:49:54</p>
      </span>
    </div>

    
    
  </body>
</html>