<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>error - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Python">Python</a>&nbsp;&#187;&nbsp;error
    <span class="updated">Page Updated&nbsp;
      2018-08-30 15:34
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">error</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">异常处理</a><ul>
<li><a href="#_2">语法</a></li>
<li><a href="#_3">异常类型</a></li>
<li><a href="#_4">异常处理顺序</a></li>
<li><a href="#finally">finally</a></li>
<li><a href="#raise">raise 抛出异常</a><ul>
<li><a href="#_5">异常种类</a></li>
</ul>
</li>
<li><a href="#_6">自定义异常</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">异常处理</h1>
<p>异常处理一般用于debug程序</p>
<h2 id="_2">语法</h2>
<p>在try语句块中放入容易犯错的部分，跟上except，说明语句在发生错误的时候会执行的返回值</p>
<div class="hlcode"><pre><span class="n">re</span> <span class="o">=</span> <span class="n">iter</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="nl">try:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">:</span>
        <span class="n">print</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">__next__</span><span class="p">())</span>
<span class="n">except</span> <span class="n">StopIteration</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="err">&#39;</span><span class="n">End</span> <span class="n">at</span> <span class="n">here</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="err">&#39;</span><span class="n">hahaha</span><span class="err">&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="mi">0</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="n">End</span> <span class="n">at</span> <span class="n">here</span> <span class="mi">5</span>
<span class="n">hahaha</span>
</pre></div>


<h2 id="_3">异常类型</h2>
<p>Exception 能抓住所有错误，不建议使用</p>
<h2 id="_4">异常处理顺序</h2>
<p>无法将异常交给合适的对象，异常将继续向上层抛出，直到捕捉或者造成主程序出错</p>
<div class="hlcode"><pre><span class="nx">def</span> <span class="nx">test_func</span><span class="p">()</span><span class="o">:</span>
    <span class="k">try</span><span class="o">:</span>
        <span class="nx">m</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
    <span class="nx">except</span> <span class="nx">NameError</span><span class="o">:</span>
        <span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Catch NameError in the sub-function&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="o">:</span>
    <span class="nx">test_func</span><span class="p">()</span>
<span class="nx">except</span> <span class="nx">ZeroDivisionError</span><span class="o">:</span>
    <span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Catch error in the main program&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="nx">Catch</span> <span class="nx">error</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">main</span> <span class="nx">program</span>
</pre></div>


<h2 id="finally">finally</h2>
<p>finally是无论是否有异常，最后都要做的一件事<br />
1. try -&gt; 异常 -&gt; except -&gt; finally<br />
2. try -&gt; 无异常 -&gt; else -&gt; finally</p>
<h2 id="raise">raise 抛出异常</h2>
<p>raise 语句可以抛出异常</p>
<div class="hlcode"><pre><span class="nx">print</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="nx">raise</span> <span class="nx">StopIteration</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="nx">Traceback</span> <span class="p">(</span><span class="nx">most</span> <span class="nx">recent</span> <span class="nb">call</span> <span class="nb">last</span><span class="p">):</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/xhxu/python/machine_learning/test.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">2</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="nx">raise</span> <span class="nx">StopIteration</span>
<span class="nx">StopIteration</span>
<span class="nx">test</span>
</pre></div>


<h3 id="_5">异常种类</h3>
<table>
<thead>
<tr>
<th>异常名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>BaseException</td>
<td>所有异常的基类</td>
</tr>
<tr>
<td>SystemExit</td>
<td>解释器请求退出</td>
</tr>
<tr>
<td>KeyboardInterrupt</td>
<td>用户中断执行(通常是输入^C)</td>
</tr>
<tr>
<td>Exception</td>
<td>常规错误的基类</td>
</tr>
<tr>
<td>StopIteration</td>
<td>迭代器没有更多的值</td>
</tr>
<tr>
<td>GeneratorExit</td>
<td>生成器(generator)发生异常来通知退出</td>
</tr>
<tr>
<td>StandardError</td>
<td>所有的内建标准异常的基类</td>
</tr>
<tr>
<td>ArithmeticError</td>
<td>所有数值计算错误的基类</td>
</tr>
<tr>
<td>FloatingPointError</td>
<td>浮点计算错误</td>
</tr>
<tr>
<td>OverflowError</td>
<td>数值运算超出最大限制</td>
</tr>
<tr>
<td>ZeroDivisionError</td>
<td>除(或取模)零 (所有数据类型)</td>
</tr>
<tr>
<td>AssertionError</td>
<td>断言语句失败</td>
</tr>
<tr>
<td>AttributeError</td>
<td>对象没有这个属性</td>
</tr>
<tr>
<td>EOFError</td>
<td>没有内建输入,到达EOF 标记</td>
</tr>
<tr>
<td>EnvironmentError</td>
<td>操作系统错误的基类</td>
</tr>
<tr>
<td>IOError</td>
<td>输入/输出操作失败</td>
</tr>
<tr>
<td>OSError</td>
<td>操作系统错误</td>
</tr>
<tr>
<td>WindowsError</td>
<td>系统调用失败</td>
</tr>
<tr>
<td>ImportError</td>
<td>导入模块/对象失败</td>
</tr>
<tr>
<td>LookupError</td>
<td>无效数据查询的基类</td>
</tr>
<tr>
<td>IndexError</td>
<td>序列中没有此索引(index)</td>
</tr>
<tr>
<td>KeyError</td>
<td>映射中没有这个键</td>
</tr>
<tr>
<td>MemoryError</td>
<td>内存溢出错误(对于Python 解释器不是致命的)</td>
</tr>
<tr>
<td>NameError</td>
<td>未声明/初始化对象 (没有属性)</td>
</tr>
<tr>
<td>UnboundLocalError</td>
<td>访问未初始化的本地变量</td>
</tr>
<tr>
<td>ReferenceError</td>
<td>弱引用(Weak reference)试图访问已经垃圾回收了的对象</td>
</tr>
<tr>
<td>RuntimeError</td>
<td>一般的运行时错误</td>
</tr>
<tr>
<td>NotImplementedError</td>
<td>尚未实现的方法</td>
</tr>
<tr>
<td>SyntaxError</td>
<td>Python 语法错误</td>
</tr>
<tr>
<td>IndentationError</td>
<td>缩进错误</td>
</tr>
<tr>
<td>TabError</td>
<td>Tab 和空格混用</td>
</tr>
<tr>
<td>SystemError</td>
<td>一般的解释器系统错误</td>
</tr>
<tr>
<td>TypeError</td>
<td>对类型无效的操作</td>
</tr>
<tr>
<td>ValueError</td>
<td>传入无效的参数</td>
</tr>
<tr>
<td>UnicodeError</td>
<td>Unicode 相关的错误</td>
</tr>
<tr>
<td>UnicodeDecodeError</td>
<td>Unicode 解码时的错误</td>
</tr>
<tr>
<td>UnicodeEncodeError</td>
<td>Unicode 编码时错误</td>
</tr>
<tr>
<td>UnicodeTranslateError</td>
<td>Unicode 转换时错误</td>
</tr>
<tr>
<td>Warning</td>
<td>警告的基类</td>
</tr>
<tr>
<td>DeprecationWarning</td>
<td>关于被弃用的特征的警告</td>
</tr>
<tr>
<td>FutureWarning</td>
<td>关于构造将来语义会有改变的警告</td>
</tr>
<tr>
<td>OverflowWarning</td>
<td>旧的关于自动提升为长整型(long)的警告</td>
</tr>
<tr>
<td>PendingDeprecationWarning</td>
<td>关于特性将会被废弃的警告</td>
</tr>
<tr>
<td>RuntimeWarning</td>
<td>可疑的运行时行为(runtime behavior)的警告</td>
</tr>
<tr>
<td>SyntaxWarning</td>
<td>可疑的语法的警告</td>
</tr>
<tr>
<td>UserWarning</td>
<td>用户代码生成的警告</td>
</tr>
</tbody>
</table>
<h2 id="_6">自定义异常</h2>
<div class="hlcode"><pre><span class="n">class</span> <span class="n">MyError</span><span class="p">(</span><span class="n">Exception</span><span class="p">)</span><span class="o">:</span>

    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">msg</span>

<span class="nl">try:</span>
    <span class="n">raise</span> <span class="n">MyError</span><span class="p">(</span><span class="err">&#39;</span><span class="n">This</span> <span class="n">is</span> <span class="n">my</span> <span class="n">error</span><span class="p">.</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">except</span> <span class="n">MyError</span> <span class="n">as</span> <span class="n">e</span><span class="o">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-06-24 20:58:46</p>
      </span>
    </div>

    
    
  </body>
</html>