<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>tuple - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Python">Python</a>&nbsp;&#187;&nbsp;tuple
    <span class="updated">Page Updated&nbsp;
      2018-08-17 21:27
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">tuple</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">元组</a><ul>
<li><a href="#_2">定义元组</a></li>
<li><a href="#_3">元组常用操作</a><ul>
<li><a href="#count">count 计数</a></li>
<li><a href="#index">index 索引</a></li>
<li><a href="#len">len 长度</a></li>
<li><a href="#_4">下标操作及切片</a></li>
<li><a href="#packing-unpacking">Packing &amp; Unpacking</a></li>
</ul>
</li>
<li><a href="#list-vs-tuple">List vs Tuple</a><ul>
<li><a href="#_5">空列表创建</a></li>
<li><a href="#_6">使用场景</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">元组</h1>
<p>元组是不可变的结构<br />
元组和列表的大多数地方相似</p>
<p>参考源码<br />
列表:https://github.com/python/cpython/blob/3.7/Include/listobject.h<br />
元祖:https://github.com/python/cpython/blob/3.7/Include/tupleobject.h</p>
<h2 id="_2">定义元组</h2>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">26</span><span class="p">]:</span> <span class="n">T</span> <span class="o">=</span> <span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">27</span><span class="p">]:</span> <span class="n">T</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">28</span><span class="p">]:</span> <span class="n">T</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>


<h2 id="_3">元组常用操作</h2>
<h3 id="count">count 计数</h3>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span> <span class="n">name</span>  <span class="o">=</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">Michelle</span><span class="err">&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="n">name</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="n">name</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="mi">0</span>
</pre></div>


<h3 id="index">index 索引</h3>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span> <span class="n">name</span>  <span class="o">=</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">Michelle</span><span class="err">&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="n">name</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="mi">0</span>
</pre></div>


<h3 id="len">len 长度</h3>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">33</span><span class="p">]</span><span class="o">:</span> <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">34</span><span class="p">]</span><span class="o">:</span> <span class="n">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">34</span><span class="p">]</span><span class="o">:</span> <span class="mi">3</span>
</pre></div>


<h3 id="_4">下标操作及切片</h3>
<div class="hlcode"><pre><span class="nv">In</span> <span class="p">[</span><span class="m">7</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">7</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">8</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="m">3</span><span class="s-Atom">:</span><span class="m">5</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">8</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">9</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="m">3</span><span class="s-Atom">:</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">9</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="s-Atom">:</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">11</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="m">3</span><span class="p">:-</span><span class="m">2</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">11</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">()</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">12</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="m">3</span><span class="p">:-</span><span class="m">1</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">12</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">4</span><span class="p">,)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">13</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="o">-</span><span class="m">4</span><span class="p">:-</span><span class="m">1</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">13</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">14</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="m">1</span><span class="s-Atom">:</span><span class="m">6</span><span class="s-Atom">:</span><span class="m">2</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">14</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">15</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="s-Atom">::-</span><span class="m">1</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">15</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>

<span class="nv">In</span> <span class="p">[</span><span class="m">16</span><span class="p">]</span><span class="s-Atom">:</span> <span class="nv">T</span><span class="p">[</span><span class="s-Atom">::</span><span class="m">2</span><span class="p">]</span>
<span class="nv">Out</span><span class="p">[</span><span class="m">16</span><span class="p">]</span><span class="s-Atom">:</span> <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
</pre></div>


<h3 id="packing-unpacking">Packing &amp; Unpacking</h3>
<div class="hlcode"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">42</span><span class="p">]:</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">43</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">43</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">44</span><span class="p">]:</span> <span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">44</span><span class="p">]:</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">48</span><span class="p">]:</span> <span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">48</span><span class="p">]:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">49</span><span class="p">]:</span> <span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">51</span><span class="p">]:</span> <span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">51</span><span class="p">]:</span> <span class="mi">4</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">52</span><span class="p">]:</span> <span class="n">_</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">52</span><span class="p">]:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">53</span><span class="p">]:</span> <span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">54</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">54</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">55</span><span class="p">]:</span> <span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">55</span><span class="p">]:</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">56</span><span class="p">]:</span> <span class="n">z</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">56</span><span class="p">]:</span> <span class="mi">3</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">68</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">69</span><span class="p">]:</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">70</span><span class="p">]:</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">71</span><span class="p">]:</span> <span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">71</span><span class="p">]:</span> <span class="mi">2</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">72</span><span class="p">]:</span> <span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">72</span><span class="p">]:</span> <span class="mi">1</span>
</pre></div>


<h2 id="list-vs-tuple">List vs Tuple</h2>
<p>相同的元素，但是元组的存储空间，却比列表要少16字节</p>
<p>由于列表是动态的，所以它需要存储指针，来指向对应的元素(上述例子中，对于int型，8字节)。另外，由于列表可变，所以需要额外存储已经分配的长度大小(8字节)，这样才可以实时追踪列表空间的使用情况，当空间不足时，及时分配额外空间。</p>
<div class="hlcode"><pre><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">lst</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span>
<span class="mi">64</span>

<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">tup</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span>
<span class="mi">48</span>
</pre></div>


<div class="hlcode"><pre><span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">l</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span> <span class="c1">// 空列表的存储空间为40字节</span>
<span class="mi">40</span>
<span class="n">l</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">l</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="mi">72</span> <span class="c1">// 加入了元素1之后，列表为其分配了可以存储4个元素的空间 (72 - 40)/8 = 4 l.append(2)</span>
<span class="n">l</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="mi">72</span> <span class="c1">// 由于之前分配了空间，所以加入元素2，列表空间不变</span>
<span class="n">l</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">l</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="mi">72</span> <span class="c1">// 同上</span>
<span class="n">l</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">l</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="mi">72</span> <span class="c1">// 同上</span>
<span class="n">l</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">l</span><span class="p">.</span><span class="n">__sizeof__</span><span class="p">()</span>
<span class="mi">104</span> <span class="c1">// 加入元素5之后，列表的空间不足，所以又额外分配了可以存储4个元素的空间</span>
</pre></div>


<p>Python每次分配空间时都会额外多分配一些，这样的机制(over-allocating)保证了其操作的高效 性:增加/删除的时间复杂度均为O(1)。 </p>
<p>但是对于元组，情况就不同了。元组长度大小固定，元素不可变，所以存储空间固定。</p>
<p>是计算初始化一个相同元素的列表和元组分别所需的时间。我们可以看到，元组的初始化速 度，要比列表快5倍。 </p>
<div class="hlcode"><pre>  <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="err">&#39;</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span><span class="err">&#39;</span>
  <span class="mi">20000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">5</span><span class="o">:</span> <span class="mf">9.97</span> <span class="n">nsec</span> <span class="n">per</span> <span class="n">loop</span>
  <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="err">&#39;</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span><span class="err">&#39;</span>
  <span class="mi">5000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">5</span><span class="o">:</span> <span class="mf">50.1</span> <span class="n">nsec</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>


<p>但如果是索引操作的话，两者的速度差别非常小，几乎可以忽略不计。 </p>
<div class="hlcode"><pre>  <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="o">-</span><span class="n">s</span> <span class="err">&#39;</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span><span class="sc">&#39; &#39;</span><span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="err">&#39;</span>
  <span class="mi">10000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">5</span><span class="o">:</span> <span class="mf">22.2</span> <span class="n">nsec</span> <span class="n">per</span> <span class="n">loop</span>
  <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="o">-</span><span class="n">s</span> <span class="err">&#39;</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span><span class="sc">&#39; &#39;</span><span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="err">&#39;</span>
  <span class="mi">10000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">5</span><span class="o">:</span> <span class="mf">21.9</span> <span class="n">nsec</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>


<h3 id="_5">空列表创建</h3>
<p>区别主要在于list()是一个function call，Python的function call会创建stack，并且进行一系列参数检查的<br />
操作，比较expensive，反观[]是一个内置的C函数，可以直接被调用，因此效率高。</p>
<div class="hlcode"><pre><span class="cp"># option A </span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="n">list</span><span class="p">()</span>

<span class="cp"># option B</span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>


<div class="hlcode"><pre><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="err">&#39;</span><span class="n">empty_list</span> <span class="o">=</span> <span class="n">list</span><span class="p">()</span><span class="err">&#39;</span>
<span class="mi">10000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="o">:</span> <span class="mf">0.0829</span> <span class="n">usec</span> <span class="n">per</span> <span class="n">loop</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="err">&#39;</span><span class="n">empty_list</span> <span class="o">=</span> <span class="p">[]</span><span class="err">&#39;</span>
<span class="mi">10000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="o">:</span> <span class="mf">0.0218</span> <span class="n">usec</span> <span class="n">per</span> <span class="n">loop</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="err">&#39;</span><span class="n">empty_list</span> <span class="o">=</span> <span class="p">()</span><span class="err">&#39;</span>
<span class="mi">100000000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="o">:</span> <span class="mf">0.0126</span> <span class="n">usec</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>


<h3 id="_6">使用场景</h3>
<p>如果存储的数据和数量不变，比如你有一个函数，需要返回的是一个地点的经纬度，然后直接传给前端<br />
渲染，那么肯定选用元组更合适</p>
<div class="hlcode"><pre><span class="n">def</span> <span class="n">get_location</span><span class="p">()</span><span class="o">:</span>
      <span class="p">.....</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">longitude</span><span class="p">,</span> <span class="n">latitude</span><span class="p">)</span>
</pre></div>


<p>如果存储的数据或数量是可变的，比如社交平台上的一个日志功能，是统计一个用户在一周之内看了哪<br />
些用户的帖子，那么则用列表更合适。</p>
<div class="hlcode"><pre><span class="n">viewer_owner_id_list</span> <span class="o">=</span> <span class="p">[]</span> <span class="err">#</span> <span class="err">里面的每个元素记录了这个</span><span class="n">viewer</span><span class="err">一周内看过的所有</span><span class="n">owner</span><span class="err">的</span><span class="n">id</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">queryDB</span><span class="p">(</span><span class="n">viewer_id</span><span class="p">)</span> <span class="err">#</span> <span class="err">索引数据库，拿到某个</span><span class="n">viewer</span><span class="err">一周内的日志</span> <span class="k">for</span> <span class="n">record</span> <span class="n">in</span> <span class="n">records</span><span class="o">:</span>
      <span class="n">viewer_owner_id_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-01-05 13:48:06</p>
      </span>
    </div>

    
    
  </body>
</html>